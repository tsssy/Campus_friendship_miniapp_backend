2025-08-04 19:55:12,342 - database - INFO - Inserted document with id: 191
2025-08-04 19:55:12,345 - database - INFO - Inserted document with id: 192
2025-08-04 19:56:56,185 - database - INFO - Inserted document with id: 193
2025-08-04 19:56:56,188 - database - INFO - Inserted document with id: 194
2025-08-04 19:57:10,188 - database - INFO - Inserted document with id: 195
2025-08-04 19:57:10,189 - database - INFO - Inserted document with id: 196
2025-08-04 19:58:02,571 - database - INFO - Inserted document with id: 197
2025-08-04 19:58:02,572 - database - INFO - Inserted document with id: 198
2025-08-04 19:58:12,146 - database - INFO - Inserted document with id: 199
2025-08-04 19:58:12,148 - database - INFO - Inserted document with id: 200
2025-08-04 19:58:34,237 - database - INFO - Inserted document with id: 201
2025-08-04 19:58:34,245 - database - INFO - Inserted document with id: 202
2025-08-04 19:58:49,475 - database - INFO - Inserted document with id: 203
2025-08-04 19:58:49,485 - database - INFO - Inserted document with id: 204
2025-08-04 19:59:15,210 - database - INFO - Inserted document with id: 205
2025-08-04 19:59:15,211 - database - INFO - Inserted document with id: 206
2025-08-04 19:59:23,279 - database - INFO - Inserted document with id: 207
2025-08-04 19:59:23,282 - database - INFO - Inserted document with id: 208
2025-08-04 19:59:36,599 - database - INFO - Inserted document with id: 209
2025-08-04 19:59:36,600 - database - INFO - Inserted document with id: 210
2025-08-04 20:00:01,997 - database - INFO - Inserted document with id: 211
2025-08-04 20:00:01,997 - database - INFO - Inserted document with id: 212
2025-08-04 20:00:12,741 - database - INFO - Inserted document with id: 213
2025-08-04 20:00:12,742 - database - INFO - Inserted document with id: 214
2025-08-04 20:00:21,839 - database - INFO - Inserted document with id: 215
2025-08-04 20:00:21,841 - database - INFO - Inserted document with id: 216
2025-08-04 20:00:43,466 - database - INFO - Inserted document with id: 217
2025-08-04 20:00:43,469 - database - INFO - Inserted document with id: 218
2025-08-04 20:01:48,346 - database - INFO - Inserted document with id: 219
2025-08-04 20:01:48,348 - database - INFO - Inserted document with id: 220
2025-08-04 20:02:24,209 - database - INFO - Inserted document with id: 221
2025-08-04 20:02:24,210 - database - INFO - Inserted document with id: 222
2025-08-04 20:02:27,828 - database - INFO - Inserted document with id: 297581214
2025-08-04 20:02:27,847 - database - INFO - Inserted document with id: 6890a153609d80a5aa008469
2025-08-04 20:03:00,474 - database - INFO - Inserted document with id: 223
2025-08-04 20:03:00,475 - database - INFO - Inserted document with id: 224
2025-08-04 20:03:26,591 - database - INFO - Inserted document with id: 225
2025-08-04 20:03:26,593 - database - INFO - Inserted document with id: 226
2025-08-04 20:03:36,723 - database - INFO - Inserted document with id: 227
2025-08-04 20:03:36,725 - database - INFO - Inserted document with id: 228
2025-08-04 20:04:06,477 - database - INFO - Inserted document with id: 229
2025-08-04 20:04:06,479 - database - INFO - Inserted document with id: 230
2025-08-04 20:14:02,680 - database - INFO - Closed MongoDB connection
2025-08-05 11:19:34,726 - server - INFO - HTTP API路由已注册
2025-08-05 11:19:34,726 - server - INFO - WebSocket路由已注册
2025-08-05 11:19:34,726 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 11:19:34,727 - server - INFO - 启动服务器: NewLoveLushUserService v1.0.0
2025-08-05 11:19:34,784 - server - INFO - HTTP API路由已注册
2025-08-05 11:19:34,784 - server - INFO - WebSocket路由已注册
2025-08-05 11:19:34,784 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 11:19:34,785 - server - INFO - 正在连接数据库...
2025-08-05 11:19:34,831 - database - ERROR - Failed to connect to MongoDB: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed'}
2025-08-05 11:19:34,832 - server - ERROR - 数据库连接或初始化失败: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed'}
2025-08-05 13:18:34,680 - server - INFO - HTTP API路由已注册
2025-08-05 13:18:34,681 - server - INFO - WebSocket路由已注册
2025-08-05 13:18:34,681 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 13:18:34,681 - server - INFO - 启动服务器: NewLoveLushUserService v1.0.0
2025-08-05 13:18:34,739 - server - INFO - HTTP API路由已注册
2025-08-05 13:18:34,739 - server - INFO - WebSocket路由已注册
2025-08-05 13:18:34,739 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 13:18:34,740 - server - INFO - 正在连接数据库...
2025-08-05 13:18:34,785 - database - ERROR - Failed to connect to MongoDB: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed'}
2025-08-05 13:18:34,786 - server - ERROR - 数据库连接或初始化失败: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed'}
2025-08-05 13:36:57,989 - server - INFO - HTTP API路由已注册
2025-08-05 13:36:57,990 - server - INFO - WebSocket路由已注册
2025-08-05 13:36:57,990 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 13:36:57,990 - server - INFO - 启动服务器: NewLoveLushUserService v1.0.0
2025-08-05 13:36:58,027 - server - INFO - HTTP API路由已注册
2025-08-05 13:36:58,027 - server - INFO - WebSocket路由已注册
2025-08-05 13:36:58,027 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 13:36:58,027 - server - INFO - 正在连接数据库...
2025-08-05 13:36:58,054 - database - INFO - Connected to MongoDB successfully
2025-08-05 13:36:58,054 - server - INFO - 数据库连接成功
2025-08-05 13:36:58,054 - server - INFO - 🎮 正在初始化抽卡游戏基础数据...
2025-08-05 13:36:58,054 - server - INFO - 🎮 开始初始化性格测试数据（抽卡游戏数据）...
2025-08-05 13:36:58,109 - server - INFO - 🎮 现有题目数量: 16, 现有卡片数量: 8
2025-08-05 13:36:58,109 - server - INFO - 🎮 题目数据完整(16/16)，跳过导入
2025-08-05 13:36:58,109 - server - INFO - 🎮 卡片数据完整(8/8)，跳过导入
2025-08-05 13:36:58,111 - server - INFO - 🎮 最终数据统计 - 题目: 16/16, 卡片: 8/8
2025-08-05 13:36:58,111 - server - INFO - 🎉 性格测试数据初始化完成！抽卡游戏已就绪
2025-08-05 13:36:58,111 - server - INFO - ✅ 抽卡游戏基础数据初始化成功
2025-08-05 13:36:58,111 - server - INFO - 正在初始化UserManagement缓存...
2025-08-05 13:36:58,113 - server - INFO - UserManagement缓存初始化完成
2025-08-05 13:36:58,113 - server - INFO - 正在初始化MatchManager缓存...
2025-08-05 13:36:58,113 - MatchManager - INFO - MatchManager singleton instance created
2025-08-05 13:36:58,113 - MatchManager - INFO - MatchManager construct: Initializing Match counter...
2025-08-05 13:36:58,114 - Match - INFO - No existing matches found, starting counter from 0
2025-08-05 13:36:58,114 - MatchManager - INFO - MatchManager construct: Loading matches from database...
2025-08-05 13:36:58,115 - MatchManager - INFO - MatchManager construct: Found 0 matches in database
2025-08-05 13:36:58,115 - MatchManager - INFO - MatchManager construct: Loaded 0 matches from database
2025-08-05 13:36:58,115 - MatchManager - INFO - MatchManager construct completed successfully
2025-08-05 13:36:58,115 - server - INFO - MatchManager缓存初始化完成
2025-08-05 13:36:58,115 - server - INFO - 正在初始化ChatroomManager缓存...
2025-08-05 13:36:58,115 - ChatroomManager - INFO - ChatroomManager singleton instance created
2025-08-05 13:36:58,116 - ChatroomManager - INFO - ChatroomManager construct: Initializing counters...
2025-08-05 13:36:58,116 - Message - INFO - No existing messages found, starting counter from 0
2025-08-05 13:36:58,117 - Chatroom - INFO - No existing chatrooms found, starting counter from 0
2025-08-05 13:36:58,117 - ChatroomManager - INFO - ChatroomManager construct: Querying chatrooms from database...
2025-08-05 13:36:58,117 - ChatroomManager - INFO - ChatroomManager construct: Found 0 chatrooms in database
2025-08-05 13:36:58,118 - ChatroomManager - INFO - ChatroomManager construct: Loaded 0 chatrooms from database
2025-08-05 13:36:58,118 - ChatroomManager - INFO - ChatroomManager construct: Final chatrooms in memory: []
2025-08-05 13:36:58,118 - server - INFO - ChatroomManager缓存初始化完成 - 加载了 0 个聊天室
2025-08-05 13:36:58,118 - server - INFO - ChatroomManager可用的聊天室ID: []
2025-08-05 13:36:58,118 - server - INFO - ChatroomManager缓存初始化完成
2025-08-05 13:36:58,118 - server - INFO - 正在初始化N8nWebhookManager...
2025-08-05 13:36:58,118 - server - INFO - N8nWebhookManager初始化完成
2025-08-05 13:36:58,118 - server - INFO - 正在初始化AIResponseProcessor...
2025-08-05 13:36:58,126 - AIResponseProcessor - INFO - AI消息计数器从数据库初始化: 从 230 开始
2025-08-05 13:36:58,126 - AIResponseProcessor - INFO - AIResponseProcessor: 开始从数据库加载AI聊天数据到内存
2025-08-05 13:36:58,132 - AIResponseProcessor - INFO - AIResponseProcessor: 成功从数据库加载 20 个AI聊天室，230 条消息到内存
2025-08-05 13:36:58,132 - AIResponseProcessor - INFO - AIResponseProcessor: 当前内存中有 20 个聊天室，230 条消息
2025-08-05 13:36:58,132 - server - INFO - AIResponseProcessor初始化完成
2025-08-05 13:36:58,132 - server - INFO - 正在初始化PersonalityTestManager...
2025-08-05 13:36:58,132 - PersonalityTestManager - INFO - PersonalityTestManager: 开始从数据库加载数据到内存
2025-08-05 13:36:58,139 - PersonalityTestManager - INFO - PersonalityTestManager: 成功加载 16 道题目，8 张卡片，15 个测试会话
2025-08-05 13:36:58,139 - PersonalityTestManager - INFO - PersonalityTestManager: 加载了 7 条用户历史记录
2025-08-05 13:36:58,139 - server - INFO - PersonalityTestManager初始化完成
2025-08-05 13:36:58,139 - server - INFO - 正在启动自动保存后台任务...
2025-08-05 13:36:58,139 - server - INFO - 自动保存后台任务已启动
2025-08-05 13:36:58,139 - server - INFO - 启动自动保存任务，每10秒保存一次所有单例数据到数据库
2025-08-05 13:37:08,140 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:37:08,142 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:37:08,143 - DataIntegrity - INFO - DataIntegrity singleton instance created
2025-08-05 13:37:08,143 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:37:08,144 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:37:08,144 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:37:08,144 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:37:08,144 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:37:08,144 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:37:08,144 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:37:08,144 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:37:08,144 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:37:08,144 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:37:08,144 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:37:08,150 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:37:08,152 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:37:08,152 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:37:08,152 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:37:08,152 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:37:08,154 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:37:08,154 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:37:08,154 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:37:08,155 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:37:08,193 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:37:08,193 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:37:08,193 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:37:08,193 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:37:08,194 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:37:08,335 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:37:08,335 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:37:08,340 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:37:08,341 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:37:08,341 - server - INFO - 🔄 自动保存完成，耗时: 0.198秒
2025-08-05 13:37:18,341 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:37:18,341 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:37:18,342 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:37:18,342 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:37:18,342 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:37:18,342 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:37:18,342 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:37:18,342 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:37:18,342 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:37:18,342 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:37:18,342 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:37:18,342 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:37:18,343 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:37:18,344 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:37:18,345 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:37:18,346 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:37:18,346 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:37:18,346 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:37:18,348 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:37:18,348 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:37:18,348 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:37:18,348 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:37:18,381 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:37:18,381 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:37:18,381 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:37:18,381 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:37:18,381 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:37:18,606 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:37:18,606 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:37:18,619 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:37:18,620 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:37:18,620 - server - INFO - 🔄 自动保存完成，耗时: 0.278秒
2025-08-05 13:37:28,620 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:37:28,622 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:37:28,622 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:37:28,622 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:37:28,622 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:37:28,623 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:37:28,623 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:37:28,623 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:37:28,623 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:37:28,623 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:37:28,623 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:37:28,623 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:37:28,623 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:37:28,625 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:37:28,627 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:37:28,628 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:37:28,628 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:37:28,628 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:37:28,629 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:37:28,629 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:37:28,629 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:37:28,630 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:37:28,666 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:37:28,666 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:37:28,666 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:37:28,667 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:37:28,667 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:37:28,819 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:37:28,819 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:37:28,825 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:37:28,825 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:37:28,825 - server - INFO - 🔄 自动保存完成，耗时: 0.203秒
2025-08-05 13:37:38,826 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:37:38,828 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:37:38,828 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:37:38,828 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:37:38,828 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:37:38,829 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:37:38,829 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:37:38,829 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:37:38,829 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:37:38,829 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:37:38,829 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:37:38,829 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:37:38,829 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:37:38,831 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:37:38,832 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:37:38,832 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:37:38,832 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:37:38,832 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:37:38,837 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:37:38,837 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:37:38,837 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:37:38,837 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:37:38,881 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:37:38,881 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:37:38,881 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:37:38,882 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:37:38,882 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:37:39,054 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:37:39,054 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:37:39,059 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:37:39,059 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:37:39,059 - server - INFO - 🔄 自动保存完成，耗时: 0.231秒
2025-08-05 13:37:49,060 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:37:49,063 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:37:49,063 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:37:49,064 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:37:49,064 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:37:49,064 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:37:49,064 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:37:49,064 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:37:49,065 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:37:49,065 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:37:49,065 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:37:49,065 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:37:49,065 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:37:49,071 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:37:49,082 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:37:49,082 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:37:49,082 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:37:49,082 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:37:49,083 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:37:49,084 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:37:49,084 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:37:49,084 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:37:49,135 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:37:49,135 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:37:49,136 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:37:49,136 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:37:49,136 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:37:49,271 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:37:49,271 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:37:49,280 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:37:49,280 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:37:49,280 - server - INFO - 🔄 自动保存完成，耗时: 0.217秒
2025-08-05 13:37:59,281 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:37:59,284 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:37:59,285 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:37:59,285 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:37:59,285 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:37:59,286 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:37:59,286 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:37:59,286 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:37:59,286 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:37:59,286 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:37:59,286 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:37:59,287 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:37:59,287 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:37:59,291 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:37:59,292 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:37:59,292 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:37:59,292 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:37:59,292 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:37:59,293 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:37:59,293 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:37:59,293 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:37:59,293 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:37:59,361 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:37:59,361 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:37:59,361 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:37:59,361 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:37:59,362 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:37:59,487 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:37:59,487 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:37:59,493 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:37:59,493 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:37:59,493 - server - INFO - 🔄 自动保存完成，耗时: 0.209秒
2025-08-05 13:38:09,494 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:38:09,495 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:38:09,495 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:38:09,495 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:38:09,496 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:38:09,496 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:38:09,496 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:38:09,496 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:38:09,496 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:38:09,496 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:38:09,496 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:38:09,496 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:38:09,496 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:38:09,499 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:38:09,506 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:38:09,507 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:38:09,508 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:38:09,508 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:38:09,510 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:38:09,510 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:38:09,510 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:38:09,510 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:38:09,551 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:38:09,552 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:38:09,552 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:38:09,552 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:38:09,552 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:38:09,756 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:38:09,756 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:38:09,764 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:38:09,764 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:38:09,764 - server - INFO - 🔄 自动保存完成，耗时: 0.269秒
2025-08-05 13:38:19,765 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:38:19,769 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:38:19,769 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:38:19,769 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:38:19,770 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:38:19,770 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:38:19,770 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:38:19,772 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:38:19,773 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:38:19,778 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:38:19,778 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:38:19,779 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:38:19,779 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:38:19,783 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:38:19,787 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:38:19,788 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:38:19,788 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:38:19,788 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:38:19,789 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:38:19,790 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:38:19,790 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:38:19,790 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:38:19,832 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:38:19,832 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:38:19,832 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:38:19,833 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:38:19,833 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:38:20,020 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:38:20,020 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:38:20,032 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:38:20,032 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:38:20,032 - server - INFO - 🔄 自动保存完成，耗时: 0.263秒
2025-08-05 13:38:30,033 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:38:30,036 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:38:30,036 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:38:30,036 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:38:30,036 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:38:30,036 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:38:30,036 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:38:30,037 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:38:30,037 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:38:30,037 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:38:30,037 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:38:30,037 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:38:30,037 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:38:30,041 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:38:30,051 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:38:30,051 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:38:30,051 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:38:30,051 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:38:30,053 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:38:30,053 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:38:30,053 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:38:30,053 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:38:30,116 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:38:30,116 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:38:30,116 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:38:30,117 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:38:30,117 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:38:30,243 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:38:30,243 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:38:30,249 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:38:30,249 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:38:30,249 - server - INFO - 🔄 自动保存完成，耗时: 0.214秒
2025-08-05 13:38:40,251 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:38:40,263 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:38:40,264 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:38:40,264 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:38:40,264 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:38:40,264 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:38:40,264 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:38:40,264 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:38:40,264 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:38:40,264 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:38:40,264 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:38:40,265 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:38:40,265 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:38:40,275 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:38:40,276 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:38:40,277 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:38:40,277 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:38:40,277 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:38:40,277 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:38:40,278 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:38:40,278 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:38:40,278 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:38:40,301 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:38:40,301 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:38:40,301 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:38:40,302 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:38:40,302 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:38:40,530 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:38:40,530 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:38:40,544 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:38:40,544 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:38:40,544 - server - INFO - 🔄 自动保存完成，耗时: 0.281秒
2025-08-05 13:38:50,563 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:38:50,567 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:38:50,577 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:38:50,577 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:38:50,577 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:38:50,578 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:38:50,578 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:38:50,578 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:38:50,578 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:38:50,578 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:38:50,578 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:38:50,578 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:38:50,578 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:38:50,670 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:38:50,720 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:38:50,721 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:38:50,721 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:38:50,721 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:38:50,739 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:38:50,743 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:38:50,744 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:38:50,744 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:38:50,897 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:38:50,898 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:38:50,898 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:38:50,898 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:38:50,898 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:38:51,106 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:38:51,106 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:38:51,111 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:38:51,111 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:38:51,111 - server - INFO - 🔄 自动保存完成，耗时: 0.545秒
2025-08-05 13:39:01,112 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:39:01,114 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:39:01,114 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:39:01,114 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:39:01,114 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:39:01,114 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:39:01,114 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:39:01,114 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:39:01,114 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:39:01,114 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:39:01,114 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:39:01,114 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:39:01,114 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:39:01,118 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:39:01,119 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:39:01,119 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:39:01,119 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:39:01,119 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:39:01,120 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:39:01,120 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:39:01,120 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:39:01,121 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:39:01,161 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:39:01,161 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:39:01,161 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:39:01,161 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:39:01,161 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:39:01,295 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:39:01,295 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:39:01,302 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:39:01,303 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:39:01,303 - server - INFO - 🔄 自动保存完成，耗时: 0.189秒
2025-08-05 13:39:11,305 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:39:11,306 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:39:11,306 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:39:11,306 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:39:11,306 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:39:11,306 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:39:11,306 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:39:11,306 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:39:11,306 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:39:11,306 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:39:11,306 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:39:11,306 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:39:11,306 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:39:11,309 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:39:11,309 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:39:11,310 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:39:11,310 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:39:11,310 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:39:11,310 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:39:11,310 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:39:11,310 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:39:11,310 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:39:11,343 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:39:11,343 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:39:11,343 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:39:11,343 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:39:11,344 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:39:11,477 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:39:11,477 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:39:11,483 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:39:11,483 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:39:11,483 - server - INFO - 🔄 自动保存完成，耗时: 0.178秒
2025-08-05 13:39:21,485 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:39:21,486 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:39:21,487 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:39:21,487 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:39:21,487 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:39:21,487 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:39:21,487 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:39:21,487 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:39:21,488 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:39:21,488 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:39:21,488 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:39:21,488 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:39:21,488 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:39:21,491 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:39:21,494 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:39:21,496 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:39:21,497 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:39:21,497 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:39:21,499 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:39:21,499 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:39:21,499 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:39:21,499 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:39:21,523 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:39:21,523 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:39:21,523 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:39:21,523 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:39:21,523 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:39:21,750 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:39:21,750 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:39:21,762 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:39:21,762 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:39:21,762 - server - INFO - 🔄 自动保存完成，耗时: 0.276秒
2025-08-05 13:39:31,764 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:39:31,765 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:39:31,765 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:39:31,766 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:39:31,766 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:39:31,766 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:39:31,766 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:39:31,768 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:39:31,768 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:39:31,768 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:39:31,768 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:39:31,768 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:39:31,768 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:39:31,775 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:39:31,777 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:39:31,778 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:39:31,778 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:39:31,778 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:39:31,781 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:39:31,781 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:39:31,781 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:39:31,781 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:39:31,815 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:39:31,815 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:39:31,815 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:39:31,816 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:39:31,816 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:39:31,959 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:39:31,959 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:39:31,965 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:39:31,965 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:39:31,965 - server - INFO - 🔄 自动保存完成，耗时: 0.200秒
2025-08-05 13:39:41,967 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:39:41,972 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:39:41,973 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:39:41,975 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:39:41,975 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:39:41,975 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:39:41,975 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:39:41,976 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:39:41,977 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:39:41,977 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:39:41,977 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:39:41,977 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:39:41,977 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:39:41,985 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:39:41,986 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:39:41,986 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:39:41,986 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:39:41,987 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:39:41,988 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:39:41,988 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:39:41,988 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:39:41,988 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:39:42,017 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:39:42,018 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:39:42,018 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:39:42,018 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:39:42,018 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:39:42,230 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:39:42,230 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:39:42,238 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:39:42,238 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:39:42,238 - server - INFO - 🔄 自动保存完成，耗时: 0.266秒
2025-08-05 13:39:52,240 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:39:52,241 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:39:52,241 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:39:52,241 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:39:52,242 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:39:52,242 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:39:52,242 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:39:52,242 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:39:52,242 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:39:52,242 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:39:52,243 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:39:52,243 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:39:52,243 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:39:52,247 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:39:52,248 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:39:52,248 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:39:52,249 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:39:52,256 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:39:52,259 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:39:52,259 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:39:52,259 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:39:52,260 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:39:52,305 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:39:52,305 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:39:52,305 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:39:52,306 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:39:52,306 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:39:52,605 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:39:52,605 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:39:52,622 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:39:52,623 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:39:52,623 - server - INFO - 🔄 自动保存完成，耗时: 0.382秒
2025-08-05 13:40:02,624 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:40:02,626 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:40:02,627 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:40:02,627 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:40:02,627 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:40:02,627 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:40:02,627 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:40:02,628 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:40:02,628 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:40:02,628 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:40:02,628 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:40:02,628 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:40:02,628 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:40:02,639 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:40:02,641 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:40:02,641 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:40:02,642 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:40:02,642 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:40:02,644 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:40:02,645 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:40:02,645 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:40:02,645 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:40:02,690 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:40:02,690 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:40:02,690 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:40:02,691 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:40:02,691 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:40:02,843 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:40:02,843 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:40:02,850 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:40:02,850 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:40:02,851 - server - INFO - 🔄 自动保存完成，耗时: 0.224秒
2025-08-05 13:40:12,852 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:40:12,857 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:40:12,862 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:40:12,862 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:40:12,862 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:40:12,862 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:40:12,862 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:40:12,863 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:40:12,863 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:40:12,863 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:40:12,863 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:40:12,863 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:40:12,863 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:40:12,869 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:40:12,875 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:40:12,876 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:40:12,877 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:40:12,877 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:40:12,878 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:40:12,879 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:40:12,879 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:40:12,879 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:40:12,924 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:40:12,925 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:40:12,925 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:40:12,925 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:40:12,925 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:40:13,144 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:40:13,144 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:40:13,157 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:40:13,157 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:40:13,158 - server - INFO - 🔄 自动保存完成，耗时: 0.300秒
2025-08-05 13:40:23,158 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:40:23,160 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:40:23,160 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:40:23,160 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:40:23,160 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:40:23,161 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:40:23,161 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:40:23,161 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:40:23,161 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:40:23,161 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:40:23,161 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:40:23,161 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:40:23,161 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:40:23,164 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:40:23,168 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:40:23,170 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:40:23,170 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:40:23,171 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:40:23,174 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:40:23,175 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:40:23,175 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:40:23,175 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:40:23,213 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:40:23,213 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:40:23,213 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:40:23,213 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:40:23,214 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:40:23,374 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:40:23,374 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:40:23,381 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:40:23,381 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:40:23,381 - server - INFO - 🔄 自动保存完成，耗时: 0.221秒
2025-08-05 13:40:33,382 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:40:33,384 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:40:33,384 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:40:33,384 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:40:33,384 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:40:33,384 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:40:33,384 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:40:33,385 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:40:33,385 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:40:33,385 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:40:33,385 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:40:33,385 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:40:33,385 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:40:33,389 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:40:33,398 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:40:33,398 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:40:33,398 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:40:33,398 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:40:33,404 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:40:33,405 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:40:33,405 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:40:33,405 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:40:33,431 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:40:33,431 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:40:33,431 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:40:33,431 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:40:33,431 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:40:33,658 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:40:33,658 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:40:33,672 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:40:33,673 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:40:33,673 - server - INFO - 🔄 自动保存完成，耗时: 0.289秒
2025-08-05 13:40:43,674 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:40:43,675 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:40:43,676 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:40:43,676 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:40:43,676 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:40:43,676 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:40:43,676 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:40:43,676 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:40:43,676 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:40:43,676 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:40:43,676 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:40:43,676 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:40:43,676 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:40:43,680 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:40:43,681 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:40:43,682 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:40:43,682 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:40:43,682 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:40:43,685 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:40:43,686 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:40:43,686 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:40:43,686 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:40:43,716 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:40:43,717 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:40:43,717 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:40:43,717 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:40:43,717 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:40:43,876 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:40:43,876 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:40:43,882 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:40:43,882 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:40:43,882 - server - INFO - 🔄 自动保存完成，耗时: 0.207秒
2025-08-05 13:40:53,884 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:40:53,886 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:40:53,886 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:40:53,886 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:40:53,886 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:40:53,886 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:40:53,886 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:40:53,886 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:40:53,886 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:40:53,886 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:40:53,886 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:40:53,886 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:40:53,886 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:40:53,892 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:40:53,893 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:40:53,893 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:40:53,894 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:40:53,894 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:40:53,895 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:40:53,896 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:40:53,896 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:40:53,896 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:40:53,915 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:40:53,916 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:40:53,916 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:40:53,917 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:40:53,918 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:40:54,057 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:40:54,057 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:40:54,062 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:40:54,062 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:40:54,062 - server - INFO - 🔄 自动保存完成，耗时: 0.177秒
2025-08-05 13:41:04,063 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:41:04,064 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:41:04,064 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:41:04,065 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:41:04,065 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:41:04,065 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:41:04,065 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:41:04,065 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:41:04,065 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:41:04,065 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:41:04,065 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:41:04,065 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:41:04,066 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:41:04,068 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:41:04,070 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:41:04,071 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:41:04,071 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:41:04,072 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:41:04,076 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:41:04,076 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:41:04,076 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:41:04,076 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:41:04,090 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:41:04,090 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:41:04,090 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:41:04,090 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:41:04,090 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:41:04,207 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:41:04,207 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:41:04,212 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:41:04,213 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:41:04,213 - server - INFO - 🔄 自动保存完成，耗时: 0.148秒
2025-08-05 13:41:14,215 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:41:14,218 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:41:14,218 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:41:14,219 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:41:14,219 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:41:14,219 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:41:14,219 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:41:14,220 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:41:14,220 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:41:14,220 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:41:14,220 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:41:14,220 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:41:14,220 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:41:14,230 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:41:14,234 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:41:14,234 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:41:14,236 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:41:14,236 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:41:14,238 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:41:14,238 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:41:14,238 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:41:14,238 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:41:14,282 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:41:14,282 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:41:14,282 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:41:14,282 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:41:14,282 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:41:14,408 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:41:14,408 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:41:14,414 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:41:14,414 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:41:14,414 - server - INFO - 🔄 自动保存完成，耗时: 0.196秒
2025-08-05 13:41:24,415 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:41:24,416 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:41:24,417 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:41:24,417 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:41:24,417 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:41:24,417 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:41:24,417 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:41:24,417 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:41:24,417 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:41:24,418 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:41:24,418 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:41:24,418 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:41:24,418 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:41:24,421 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:41:24,423 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:41:24,424 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:41:24,424 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:41:24,424 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:41:24,426 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:41:24,426 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:41:24,426 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:41:24,426 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:41:24,448 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:41:24,448 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:41:24,448 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:41:24,448 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:41:24,448 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:41:24,759 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:41:24,759 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:41:24,777 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:41:24,777 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:41:24,777 - server - INFO - 🔄 自动保存完成，耗时: 0.361秒
2025-08-05 13:41:34,779 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:41:34,789 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:41:34,789 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:41:34,790 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:41:34,790 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:41:34,790 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:41:34,790 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:41:34,790 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:41:34,790 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:41:34,790 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:41:34,791 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:41:34,791 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:41:34,791 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:41:35,014 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:41:35,020 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:41:35,022 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:41:35,022 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:41:35,022 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:41:35,035 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:41:35,035 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:41:35,035 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:41:35,035 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:41:35,082 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:41:35,082 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:41:35,083 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:41:35,083 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:41:35,083 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:41:35,283 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:41:35,283 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:41:35,293 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:41:35,293 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:41:35,294 - server - INFO - 🔄 自动保存完成，耗时: 0.504秒
2025-08-05 13:41:45,295 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:41:45,297 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:41:45,297 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:41:45,297 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:41:45,297 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:41:45,297 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:41:45,297 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:41:45,297 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:41:45,297 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:41:45,297 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:41:45,298 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:41:45,298 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:41:45,298 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:41:45,304 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:41:45,306 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:41:45,306 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:41:45,306 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:41:45,306 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:41:45,306 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:41:45,307 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:41:45,307 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:41:45,307 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:41:45,357 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:41:45,358 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:41:45,358 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:41:45,358 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:41:45,358 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:41:45,470 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:41:45,471 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:41:45,476 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:41:45,476 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:41:45,476 - server - INFO - 🔄 自动保存完成，耗时: 0.179秒
2025-08-05 13:41:55,478 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:41:55,491 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:41:55,491 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:41:55,492 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:41:55,492 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:41:55,492 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:41:55,492 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:41:55,492 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:41:55,492 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:41:55,492 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:41:55,492 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:41:55,492 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:41:55,493 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:41:55,498 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:41:55,500 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:41:55,500 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:41:55,501 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:41:55,501 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:41:55,502 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:41:55,503 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:41:55,503 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:41:55,503 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:41:55,573 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:41:55,573 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:41:55,573 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:41:55,573 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:41:55,573 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:41:55,694 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:41:55,694 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:41:55,699 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:41:55,699 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:41:55,699 - server - INFO - 🔄 自动保存完成，耗时: 0.208秒
2025-08-05 13:42:05,703 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:42:05,704 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:42:05,705 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:42:05,705 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:42:05,705 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:42:05,705 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:42:05,705 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:42:05,706 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:42:05,706 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:42:05,706 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:42:05,706 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:42:05,706 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:42:05,706 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:42:05,710 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:42:05,713 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:42:05,714 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:42:05,715 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:42:05,715 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:42:05,717 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:42:05,717 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:42:05,717 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:42:05,718 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:42:05,773 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:42:05,773 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:42:05,773 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:42:05,773 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:42:05,773 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:42:05,893 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:42:05,893 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:42:05,898 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:42:05,899 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:42:05,899 - server - INFO - 🔄 自动保存完成，耗时: 0.194秒
2025-08-05 13:42:15,899 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:42:15,901 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:42:15,902 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:42:15,902 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:42:15,902 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:42:15,902 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:42:15,902 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:42:15,902 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:42:15,903 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:42:15,903 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:42:15,903 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:42:15,903 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:42:15,903 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:42:15,906 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:42:15,920 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:42:15,920 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:42:15,920 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:42:15,921 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:42:15,922 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:42:15,922 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:42:15,922 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:42:15,922 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:42:15,986 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:42:15,986 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:42:15,986 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:42:15,987 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:42:15,987 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:42:16,109 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:42:16,110 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:42:16,115 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:42:16,115 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:42:16,115 - server - INFO - 🔄 自动保存完成，耗时: 0.214秒
2025-08-05 13:42:26,116 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:42:26,118 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:42:26,118 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:42:26,119 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:42:26,119 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:42:26,119 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:42:26,119 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:42:26,120 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:42:26,120 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:42:26,120 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:42:26,120 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:42:26,120 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:42:26,120 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:42:26,138 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:42:26,139 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:42:26,139 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:42:26,139 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:42:26,139 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:42:26,140 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:42:26,140 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:42:26,140 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:42:26,140 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:42:26,199 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:42:26,199 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:42:26,200 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:42:26,200 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:42:26,200 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:42:26,331 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:42:26,332 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:42:26,337 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:42:26,338 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:42:26,338 - server - INFO - 🔄 自动保存完成，耗时: 0.220秒
2025-08-05 13:42:36,339 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:42:36,341 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:42:36,341 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:42:36,341 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:42:36,341 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:42:36,341 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:42:36,341 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:42:36,341 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:42:36,341 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:42:36,341 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:42:36,341 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:42:36,341 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:42:36,341 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:42:36,345 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:42:36,347 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:42:36,347 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:42:36,347 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:42:36,347 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:42:36,348 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:42:36,349 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:42:36,349 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:42:36,350 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:42:36,395 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:42:36,396 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:42:36,396 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:42:36,396 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:42:36,396 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:42:36,529 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:42:36,529 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:42:36,535 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:42:36,535 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:42:36,535 - server - INFO - 🔄 自动保存完成，耗时: 0.194秒
2025-08-05 13:42:46,537 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:42:46,539 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:42:46,539 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:42:46,539 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:42:46,540 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:42:46,540 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:42:46,540 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:42:46,540 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:42:46,540 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:42:46,541 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:42:46,541 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:42:46,541 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:42:46,541 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:42:46,547 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:42:46,548 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:42:46,549 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:42:46,549 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:42:46,549 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:42:46,549 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:42:46,549 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:42:46,549 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:42:46,549 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:42:46,583 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:42:46,583 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:42:46,583 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:42:46,584 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:42:46,584 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:42:46,780 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:42:46,780 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:42:46,786 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:42:46,786 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:42:46,786 - server - INFO - 🔄 自动保存完成，耗时: 0.248秒
2025-08-05 13:42:56,788 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:42:56,799 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:42:56,799 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:42:56,799 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:42:56,800 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:42:56,800 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:42:56,800 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:42:56,801 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:42:56,802 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:42:56,802 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:42:56,803 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:42:56,803 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:42:56,803 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:42:56,809 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:42:56,810 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:42:56,810 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:42:56,810 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:42:56,810 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:42:56,811 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:42:56,811 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:42:56,811 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:42:56,811 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:42:56,846 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:42:56,846 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:42:56,846 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:42:56,847 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:42:56,847 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:42:57,063 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:42:57,064 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:42:57,075 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:42:57,076 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:42:57,076 - server - INFO - 🔄 自动保存完成，耗时: 0.277秒
2025-08-05 13:43:07,077 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:43:07,080 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:43:07,080 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:43:07,081 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:43:07,081 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:43:07,081 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:43:07,081 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:43:07,082 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:43:07,082 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:43:07,082 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:43:07,082 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:43:07,082 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:43:07,082 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:43:07,091 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:43:07,092 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:43:07,092 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:43:07,093 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:43:07,093 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:43:07,094 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:43:07,094 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:43:07,094 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:43:07,094 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:43:07,127 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:43:07,127 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:43:07,127 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:43:07,128 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:43:07,128 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:43:07,274 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:43:07,274 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:43:07,280 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:43:07,280 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:43:07,280 - server - INFO - 🔄 自动保存完成，耗时: 0.201秒
2025-08-05 13:43:17,282 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:43:17,284 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:43:17,284 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:43:17,284 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:43:17,284 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:43:17,285 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:43:17,285 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:43:17,285 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:43:17,285 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:43:17,285 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:43:17,285 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:43:17,285 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:43:17,285 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:43:17,288 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:43:17,292 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:43:17,293 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:43:17,293 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:43:17,294 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:43:17,295 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:43:17,295 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:43:17,295 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:43:17,295 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:43:17,324 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:43:17,326 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:43:17,326 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:43:17,329 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:43:17,330 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:43:17,485 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:43:17,485 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:43:17,490 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:43:17,490 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:43:17,490 - server - INFO - 🔄 自动保存完成，耗时: 0.207秒
2025-08-05 13:43:27,491 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:43:27,493 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:43:27,493 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:43:27,493 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:43:27,493 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:43:27,493 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:43:27,493 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:43:27,493 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:43:27,493 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:43:27,493 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:43:27,493 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:43:27,493 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:43:27,493 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:43:27,497 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:43:27,498 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:43:27,498 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:43:27,499 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:43:27,499 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:43:27,500 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:43:27,500 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:43:27,500 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:43:27,500 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:43:27,544 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:43:27,544 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:43:27,544 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:43:27,544 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:43:27,544 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:43:27,691 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:43:27,691 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:43:27,705 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:43:27,706 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:43:27,706 - server - INFO - 🔄 自动保存完成，耗时: 0.213秒
2025-08-05 13:43:38,061 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:43:38,088 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:43:38,091 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:43:38,096 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:43:38,097 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:43:38,097 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:43:38,097 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:43:38,103 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:43:38,103 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:43:38,160 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:43:38,160 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:43:38,161 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:43:38,162 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:43:38,224 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:43:38,240 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:43:38,240 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:43:38,240 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:43:38,240 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:43:38,263 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:43:38,263 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:43:38,263 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:43:38,263 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:43:38,525 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:43:38,526 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:43:38,526 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:43:38,527 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:43:38,527 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:43:39,054 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:43:39,054 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:43:39,075 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:43:39,077 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:43:39,079 - server - INFO - 🔄 自动保存完成，耗时: 0.989秒
2025-08-05 13:43:49,081 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:43:49,083 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:43:49,083 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:43:49,084 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:43:49,084 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:43:49,084 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:43:49,084 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:43:49,084 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:43:49,084 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:43:49,084 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:43:49,084 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:43:49,085 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:43:49,085 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:43:49,094 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:43:49,095 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:43:49,095 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:43:49,095 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:43:49,095 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:43:49,096 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:43:49,096 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:43:49,096 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:43:49,096 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:43:49,148 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:43:49,148 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:43:49,148 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:43:49,148 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:43:49,148 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:43:49,295 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:43:49,295 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:43:49,306 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:43:49,306 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:43:49,306 - server - INFO - 🔄 自动保存完成，耗时: 0.223秒
2025-08-05 13:43:59,308 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:43:59,312 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:43:59,313 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:43:59,313 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:43:59,313 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:43:59,313 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:43:59,313 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:43:59,315 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:43:59,315 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:43:59,316 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:43:59,316 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:43:59,316 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:43:59,316 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:43:59,330 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:43:59,331 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:43:59,331 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:43:59,331 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:43:59,331 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:43:59,336 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:43:59,336 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:43:59,336 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:43:59,336 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:43:59,357 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:43:59,357 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:43:59,357 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:43:59,358 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:43:59,358 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:43:59,530 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:43:59,531 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:43:59,536 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:43:59,536 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:43:59,537 - server - INFO - 🔄 自动保存完成，耗时: 0.225秒
2025-08-05 13:44:09,537 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:44:09,544 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:44:09,545 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:44:09,545 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:44:09,545 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:44:09,545 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:44:09,545 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:44:09,545 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:44:09,545 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:44:09,545 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:44:09,546 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:44:09,546 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:44:09,546 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:44:09,555 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:44:09,556 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:44:09,557 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:44:09,557 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:44:09,557 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:44:09,558 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:44:09,558 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:44:09,559 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:44:09,559 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:44:09,602 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:44:09,603 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:44:09,603 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:44:09,603 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:44:09,603 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:44:09,749 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:44:09,749 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:44:09,755 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:44:09,756 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:44:09,756 - server - INFO - 🔄 自动保存完成，耗时: 0.211秒
2025-08-05 13:44:19,757 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:44:19,759 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:44:19,759 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:44:19,759 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:44:19,759 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:44:19,759 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:44:19,759 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:44:19,760 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:44:19,760 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:44:19,760 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:44:19,760 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:44:19,760 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:44:19,760 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:44:19,769 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:44:19,776 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:44:19,777 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:44:19,777 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:44:19,777 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:44:19,779 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:44:19,779 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:44:19,779 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:44:19,779 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:44:19,851 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:44:19,851 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:44:19,851 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:44:19,851 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:44:19,851 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:44:19,991 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:44:19,991 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:44:19,996 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:44:19,996 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:44:19,996 - server - INFO - 🔄 自动保存完成，耗时: 0.238秒
2025-08-05 13:44:30,000 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:44:30,005 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:44:30,006 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:44:30,006 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:44:30,006 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:44:30,006 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:44:30,006 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:44:30,006 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:44:30,007 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:44:30,007 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:44:30,007 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:44:30,007 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:44:30,007 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:44:30,012 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:44:30,013 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:44:30,014 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:44:30,014 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:44:30,014 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:44:30,016 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:44:30,017 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:44:30,017 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:44:30,017 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:44:30,099 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:44:30,099 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:44:30,099 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:44:30,099 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:44:30,099 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:44:30,230 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:44:30,230 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:44:30,242 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:44:30,242 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:44:30,242 - server - INFO - 🔄 自动保存完成，耗时: 0.237秒
2025-08-05 13:44:40,255 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:44:40,257 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:44:40,257 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:44:40,257 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:44:40,257 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:44:40,257 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:44:40,257 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:44:40,257 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:44:40,257 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:44:40,258 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:44:40,258 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:44:40,258 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:44:40,258 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:44:40,261 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:44:40,262 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:44:40,262 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:44:40,262 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:44:40,262 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:44:40,263 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:44:40,263 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:44:40,263 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:44:40,263 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:44:40,313 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:44:40,313 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:44:40,313 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:44:40,314 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:44:40,314 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:44:40,443 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:44:40,443 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:44:40,449 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:44:40,449 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:44:40,449 - server - INFO - 🔄 自动保存完成，耗时: 0.192秒
2025-08-05 13:44:50,450 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:44:50,452 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:44:50,452 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:44:50,452 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:44:50,452 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:44:50,452 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:44:50,453 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:44:50,453 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:44:50,453 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:44:50,453 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:44:50,453 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:44:50,453 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:44:50,453 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:44:50,457 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:44:50,460 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:44:50,460 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:44:50,460 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:44:50,461 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:44:50,463 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:44:50,463 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:44:50,463 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:44:50,463 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:44:50,545 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:44:50,546 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:44:50,546 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:44:50,546 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:44:50,546 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:44:50,664 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:44:50,664 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:44:50,670 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:44:50,671 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:44:50,671 - server - INFO - 🔄 自动保存完成，耗时: 0.219秒
2025-08-05 13:45:00,673 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:45:00,674 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:45:00,674 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:45:00,674 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:45:00,674 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:45:00,674 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:45:00,674 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:45:00,674 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:45:00,674 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:45:00,674 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:45:00,674 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:45:00,674 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:45:00,674 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:45:00,677 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:45:00,678 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:45:00,678 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:45:00,678 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:45:00,678 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:45:00,679 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:45:00,679 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:45:00,679 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:45:00,679 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:45:00,743 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:45:00,743 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:45:00,743 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:45:00,743 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:45:00,743 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:45:00,889 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:45:00,889 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:45:00,895 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:45:00,895 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:45:00,895 - server - INFO - 🔄 自动保存完成，耗时: 0.222秒
2025-08-05 13:45:10,897 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:45:10,900 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:45:10,901 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:45:10,901 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:45:10,901 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:45:10,901 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:45:10,902 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:45:10,902 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:45:10,902 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:45:10,902 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:45:10,902 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:45:10,902 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:45:10,902 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:45:10,907 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:45:10,910 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:45:10,910 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:45:10,911 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:45:10,911 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:45:10,912 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:45:10,912 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:45:10,913 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:45:10,913 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:45:10,962 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:45:10,963 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:45:10,963 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:45:10,963 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:45:10,963 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:45:11,106 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:45:11,106 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:45:11,112 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:45:11,112 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:45:11,112 - server - INFO - 🔄 自动保存完成，耗时: 0.212秒
2025-08-05 13:45:21,114 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:45:21,120 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:45:21,121 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:45:21,121 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:45:21,121 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:45:21,122 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:45:21,122 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:45:21,122 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:45:21,123 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:45:21,124 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:45:21,124 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:45:21,124 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:45:21,124 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:45:21,236 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:45:21,238 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:45:21,239 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:45:21,239 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:45:21,239 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:45:21,256 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:45:21,257 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:45:21,257 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:45:21,258 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:45:21,297 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:45:21,303 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:45:21,304 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:45:21,304 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:45:21,305 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:45:21,453 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:45:21,453 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:45:21,458 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:45:21,458 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:45:21,458 - server - INFO - 🔄 自动保存完成，耗时: 0.338秒
2025-08-05 13:45:31,459 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:45:31,462 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:45:31,462 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:45:31,474 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:45:31,475 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:45:31,476 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:45:31,476 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:45:31,476 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:45:31,476 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:45:31,476 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:45:31,476 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:45:31,477 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:45:31,478 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:45:31,481 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:45:31,483 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:45:31,483 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:45:31,483 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:45:31,483 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:45:31,484 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:45:31,484 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:45:31,484 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:45:31,484 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:45:31,544 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:45:31,544 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:45:31,544 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:45:31,544 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:45:31,544 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:45:31,673 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:45:31,673 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:45:31,679 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:45:31,679 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:45:31,679 - server - INFO - 🔄 自动保存完成，耗时: 0.218秒
2025-08-05 13:45:41,680 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:45:41,683 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:45:41,683 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:45:41,684 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:45:41,684 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:45:41,685 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:45:41,685 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:45:41,685 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:45:41,685 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:45:41,685 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:45:41,685 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:45:41,686 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:45:41,686 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:45:41,690 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:45:41,695 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:45:41,695 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:45:41,695 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:45:41,695 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:45:41,702 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:45:41,704 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:45:41,704 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:45:41,704 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:45:41,737 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:45:41,738 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:45:41,738 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:45:41,738 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:45:41,738 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:45:41,878 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:45:41,878 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:45:41,886 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:45:41,886 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:45:41,887 - server - INFO - 🔄 自动保存完成，耗时: 0.204秒
2025-08-05 13:45:51,887 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:45:51,888 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:45:51,888 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:45:51,888 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:45:51,889 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:45:51,889 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:45:51,889 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:45:51,889 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:45:51,889 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:45:51,889 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:45:51,889 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:45:51,889 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:45:51,889 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:45:51,891 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:45:51,892 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:45:51,892 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:45:51,892 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:45:51,892 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:45:51,892 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:45:51,892 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:45:51,892 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:45:51,892 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:45:51,921 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:45:51,922 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:45:51,922 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:45:51,922 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:45:51,922 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:45:52,094 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:45:52,094 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:45:52,103 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:45:52,103 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:45:52,103 - server - INFO - 🔄 自动保存完成，耗时: 0.215秒
2025-08-05 13:46:02,103 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:46:02,105 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:46:02,105 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:46:02,106 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:46:02,106 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:46:02,106 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:46:02,106 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:46:02,106 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:46:02,106 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:46:02,106 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:46:02,106 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:46:02,106 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:46:02,107 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:46:02,110 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:46:02,111 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:46:02,112 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:46:02,112 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:46:02,112 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:46:02,118 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:46:02,119 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:46:02,120 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:46:02,120 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:46:02,170 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:46:02,171 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:46:02,171 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:46:02,171 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:46:02,171 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:46:02,306 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:46:02,306 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:46:02,312 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:46:02,313 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:46:02,313 - server - INFO - 🔄 自动保存完成，耗时: 0.208秒
2025-08-05 13:46:12,315 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:46:12,317 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:46:12,317 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:46:12,318 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:46:12,318 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:46:12,318 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:46:12,318 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:46:12,319 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:46:12,319 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:46:12,320 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:46:12,320 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:46:12,320 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:46:12,320 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:46:12,350 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:46:12,364 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:46:12,372 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:46:12,373 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:46:12,375 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:46:12,392 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:46:12,392 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:46:12,393 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:46:12,393 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:46:12,490 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:46:12,491 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:46:12,491 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:46:12,492 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:46:12,492 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:46:13,138 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:46:13,139 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:46:13,151 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:46:13,152 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:46:13,152 - server - INFO - 🔄 自动保存完成，耗时: 0.836秒
2025-08-05 13:46:23,154 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:46:23,158 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:46:23,158 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:46:23,159 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:46:23,159 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:46:23,159 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:46:23,159 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:46:23,159 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:46:23,159 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:46:23,159 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:46:23,159 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:46:23,159 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:46:23,160 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:46:23,163 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:46:23,171 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:46:23,172 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:46:23,172 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:46:23,172 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:46:23,176 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:46:23,176 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:46:23,176 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:46:23,176 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:46:23,254 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:46:23,255 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:46:23,255 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:46:23,255 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:46:23,255 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:46:23,371 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:46:23,371 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:46:23,376 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:46:23,376 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:46:23,376 - server - INFO - 🔄 自动保存完成，耗时: 0.218秒
2025-08-05 13:46:33,377 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:46:33,378 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:46:33,378 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:46:33,378 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:46:33,378 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:46:33,378 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:46:33,379 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:46:33,379 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:46:33,379 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:46:33,379 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:46:33,379 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:46:33,379 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:46:33,379 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:46:33,383 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:46:33,385 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:46:33,386 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:46:33,386 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:46:33,386 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:46:33,389 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:46:33,390 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:46:33,390 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:46:33,391 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:46:33,435 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:46:33,435 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:46:33,435 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:46:33,435 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:46:33,435 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:46:33,569 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:46:33,570 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:46:33,575 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:46:33,575 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:46:33,575 - server - INFO - 🔄 自动保存完成，耗时: 0.197秒
2025-08-05 13:46:43,576 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:46:43,578 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:46:43,578 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:46:43,578 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:46:43,578 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:46:43,579 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:46:43,579 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:46:43,579 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:46:43,579 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:46:43,580 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:46:43,580 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:46:43,581 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:46:43,581 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:46:43,596 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:46:43,597 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:46:43,597 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:46:43,597 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:46:43,598 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:46:43,598 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:46:43,599 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:46:43,599 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:46:43,599 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:46:43,662 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:46:43,662 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:46:43,662 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:46:43,662 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:46:43,662 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:46:43,773 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:46:43,773 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:46:43,779 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:46:43,779 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:46:43,779 - server - INFO - 🔄 自动保存完成，耗时: 0.201秒
2025-08-05 13:46:53,780 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:46:53,781 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:46:53,782 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:46:53,785 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:46:53,785 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:46:53,785 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:46:53,785 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:46:53,786 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:46:53,786 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:46:53,786 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:46:53,786 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:46:53,786 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:46:53,786 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:46:53,790 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:46:53,792 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:46:53,793 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:46:53,793 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:46:53,794 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:46:53,795 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:46:53,796 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:46:53,796 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:46:53,796 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:46:53,836 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:46:53,836 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:46:53,836 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:46:53,836 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:46:53,836 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:46:53,979 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:46:53,979 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:46:53,984 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:46:53,984 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:46:53,984 - server - INFO - 🔄 自动保存完成，耗时: 0.203秒
2025-08-05 13:47:03,987 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:47:03,988 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:47:03,989 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:47:03,989 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:47:03,989 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:47:03,989 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:47:03,989 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:47:03,989 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:47:03,990 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:47:03,990 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:47:03,990 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:47:03,990 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:47:03,990 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:47:03,994 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:47:04,000 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:47:04,000 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:47:04,001 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:47:04,001 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:47:04,003 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:47:04,003 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:47:04,004 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:47:04,004 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:47:04,074 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:47:04,074 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:47:04,074 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:47:04,074 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:47:04,074 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:47:04,211 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:47:04,211 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:47:04,217 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:47:04,217 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:47:04,217 - server - INFO - 🔄 自动保存完成，耗时: 0.229秒
2025-08-05 13:47:14,218 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:47:14,220 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:47:14,220 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:47:14,220 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:47:14,221 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:47:14,221 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:47:14,221 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:47:14,221 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:47:14,221 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:47:14,221 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:47:14,221 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:47:14,222 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:47:14,222 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:47:14,233 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:47:14,236 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:47:14,236 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:47:14,237 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:47:14,237 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:47:14,238 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:47:14,238 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:47:14,238 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:47:14,238 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:47:14,306 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:47:14,307 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:47:14,307 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:47:14,307 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:47:14,307 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:47:14,430 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:47:14,431 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:47:14,436 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:47:14,437 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:47:14,437 - server - INFO - 🔄 自动保存完成，耗时: 0.217秒
2025-08-05 13:47:24,438 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:47:24,443 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:47:24,444 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:47:24,444 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:47:24,444 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:47:24,444 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:47:24,444 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:47:24,445 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:47:24,445 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:47:24,445 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:47:24,445 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:47:24,445 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:47:24,445 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:47:24,455 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:47:24,459 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:47:24,459 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:47:24,460 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:47:24,460 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:47:24,463 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:47:24,463 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:47:24,464 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:47:24,464 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:47:24,562 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:47:24,562 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:47:24,562 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:47:24,562 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:47:24,562 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:47:24,741 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:47:24,741 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:47:24,746 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:47:24,746 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:47:24,746 - server - INFO - 🔄 自动保存完成，耗时: 0.303秒
2025-08-05 13:47:34,748 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:47:34,749 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:47:34,750 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:47:34,750 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:47:34,750 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:47:34,750 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:47:34,750 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:47:34,750 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:47:34,750 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:47:34,750 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:47:34,750 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:47:34,750 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:47:34,750 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:47:34,755 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:47:34,757 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:47:34,758 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:47:34,758 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:47:34,758 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:47:34,760 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:47:34,761 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:47:34,761 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:47:34,761 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:47:34,788 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:47:34,789 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:47:34,789 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:47:34,789 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:47:34,789 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:47:35,121 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:47:35,121 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:47:35,141 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:47:35,141 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:47:35,141 - server - INFO - 🔄 自动保存完成，耗时: 0.392秒
2025-08-05 13:47:45,143 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:47:45,145 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:47:45,145 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:47:45,146 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:47:45,146 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:47:45,146 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:47:45,146 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:47:45,147 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:47:45,147 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:47:45,147 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:47:45,147 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:47:45,147 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:47:45,147 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:47:45,163 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:47:45,165 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:47:45,166 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:47:45,166 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:47:45,166 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:47:45,168 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:47:45,168 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:47:45,169 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:47:45,169 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:47:45,239 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:47:45,239 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:47:45,239 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:47:45,239 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:47:45,239 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:47:45,384 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:47:45,384 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:47:45,390 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:47:45,390 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:47:45,390 - server - INFO - 🔄 自动保存完成，耗时: 0.245秒
2025-08-05 13:47:55,391 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:47:55,392 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:47:55,392 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:47:55,392 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:47:55,392 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:47:55,393 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:47:55,393 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:47:55,393 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:47:55,393 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:47:55,393 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:47:55,393 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:47:55,393 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:47:55,393 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:47:55,398 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:47:55,399 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:47:55,401 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:47:55,401 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:47:55,401 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:47:55,403 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:47:55,403 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:47:55,403 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:47:55,404 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:47:55,438 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:47:55,439 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:47:55,439 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:47:55,439 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:47:55,439 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:47:55,628 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:47:55,629 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:47:55,635 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:47:55,636 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:47:55,636 - server - INFO - 🔄 自动保存完成，耗时: 0.244秒
2025-08-05 13:48:05,637 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:48:05,638 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:48:05,638 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:48:05,638 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:48:05,638 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:48:05,639 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:48:05,639 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:48:05,639 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:48:05,639 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:48:05,639 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:48:05,639 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:48:05,639 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:48:05,639 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:48:05,641 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:48:05,644 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:48:05,644 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:48:05,644 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:48:05,644 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:48:05,646 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:48:05,646 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:48:05,646 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:48:05,646 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:48:05,675 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:48:05,675 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:48:05,675 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:48:05,675 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:48:05,675 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:48:05,833 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:48:05,833 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:48:05,839 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:48:05,839 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:48:05,839 - server - INFO - 🔄 自动保存完成，耗时: 0.202秒
2025-08-05 13:48:15,840 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:48:15,842 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:48:15,842 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:48:15,842 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:48:15,843 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:48:15,843 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:48:15,843 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:48:15,843 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:48:15,843 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:48:15,844 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:48:15,844 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:48:15,844 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:48:15,844 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:48:15,846 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:48:15,850 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:48:15,850 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:48:15,850 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:48:15,851 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:48:15,853 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:48:15,853 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:48:15,853 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:48:15,853 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:48:15,880 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:48:15,880 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:48:15,880 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:48:15,880 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:48:15,881 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:48:16,101 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:48:16,101 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:48:16,114 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:48:16,114 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:48:16,114 - server - INFO - 🔄 自动保存完成，耗时: 0.273秒
2025-08-05 13:48:26,116 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:48:26,118 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:48:26,118 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:48:26,118 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:48:26,118 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:48:26,118 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:48:26,118 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:48:26,119 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:48:26,119 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:48:26,119 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:48:26,119 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:48:26,119 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:48:26,119 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:48:26,129 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:48:26,131 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:48:26,131 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:48:26,131 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:48:26,132 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:48:26,132 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:48:26,133 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:48:26,133 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:48:26,133 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:48:26,203 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:48:26,204 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:48:26,204 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:48:26,204 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:48:26,204 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:48:26,323 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:48:26,323 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:48:26,328 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:48:26,328 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:48:26,328 - server - INFO - 🔄 自动保存完成，耗时: 0.211秒
2025-08-05 13:48:36,330 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:48:36,331 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:48:36,331 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:48:36,332 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:48:36,332 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:48:36,332 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:48:36,332 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:48:36,332 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:48:36,332 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:48:36,332 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:48:36,332 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:48:36,332 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:48:36,333 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:48:36,335 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:48:36,336 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:48:36,336 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:48:36,336 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:48:36,336 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:48:36,337 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:48:36,337 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:48:36,337 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:48:36,338 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:48:36,384 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:48:36,385 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:48:36,385 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:48:36,385 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:48:36,385 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:48:36,516 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:48:36,516 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:48:36,522 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:48:36,522 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:48:36,522 - server - INFO - 🔄 自动保存完成，耗时: 0.191秒
2025-08-05 13:48:46,523 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:48:46,524 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:48:46,525 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:48:46,525 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:48:46,525 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:48:46,525 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:48:46,525 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:48:46,525 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:48:46,525 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:48:46,525 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:48:46,525 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:48:46,525 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:48:46,526 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:48:46,529 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:48:46,531 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:48:46,531 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:48:46,531 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:48:46,531 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:48:46,533 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:48:46,533 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:48:46,534 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:48:46,534 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:48:46,585 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:48:46,585 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:48:46,585 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:48:46,585 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:48:46,585 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:48:46,719 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:48:46,719 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:48:46,725 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:48:46,725 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:48:46,725 - server - INFO - 🔄 自动保存完成，耗时: 0.200秒
2025-08-05 13:48:56,725 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:48:56,726 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:48:56,726 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:48:56,726 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:48:56,726 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:48:56,727 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:48:56,727 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:48:56,727 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:48:56,727 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:48:56,727 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:48:56,727 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:48:56,727 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:48:56,727 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:48:56,736 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:48:56,740 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:48:56,740 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:48:56,740 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:48:56,741 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:48:56,742 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:48:56,743 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:48:56,743 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:48:56,743 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:48:56,800 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:48:56,800 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:48:56,801 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:48:56,801 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:48:56,801 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:48:56,934 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:48:56,934 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:48:56,940 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:48:56,940 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:48:56,940 - server - INFO - 🔄 自动保存完成，耗时: 0.214秒
2025-08-05 13:49:06,942 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:49:06,950 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:49:06,951 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:49:06,953 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:49:06,953 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:49:06,953 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:49:06,954 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:49:06,955 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:49:06,955 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:49:06,955 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:49:06,955 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:49:06,955 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:49:06,955 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:49:06,961 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:49:06,963 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:49:06,963 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:49:06,963 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:49:06,964 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:49:06,965 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:49:06,965 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:49:06,966 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:49:06,966 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:49:07,037 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:49:07,038 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:49:07,038 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:49:07,038 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:49:07,038 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:49:07,165 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:49:07,165 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:49:07,173 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:49:07,173 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:49:07,173 - server - INFO - 🔄 自动保存完成，耗时: 0.228秒
2025-08-05 13:49:17,175 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:49:17,178 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:49:17,178 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:49:17,178 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:49:17,179 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:49:17,179 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:49:17,179 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:49:17,179 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:49:17,179 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:49:17,179 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:49:17,179 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:49:17,180 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:49:17,180 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:49:17,185 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:49:17,186 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:49:17,187 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:49:17,189 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:49:17,189 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:49:17,194 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:49:17,194 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:49:17,194 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:49:17,194 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:49:17,227 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:49:17,227 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:49:17,228 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:49:17,228 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:49:17,228 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:49:17,364 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:49:17,364 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:49:17,369 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:49:17,369 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:49:17,369 - server - INFO - 🔄 自动保存完成，耗时: 0.192秒
2025-08-05 13:49:27,371 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:49:27,373 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:49:27,374 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:49:27,374 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:49:27,374 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:49:27,375 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:49:27,375 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:49:27,375 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:49:27,375 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:49:27,376 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:49:27,376 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:49:27,376 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:49:27,376 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:49:27,381 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:49:27,383 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:49:27,383 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:49:27,383 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:49:27,384 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:49:27,387 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:49:27,387 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:49:27,387 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:49:27,388 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:49:27,425 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:49:27,425 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:49:27,426 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:49:27,426 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:49:27,427 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:49:27,550 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:49:27,551 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:49:27,556 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:49:27,556 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:49:27,556 - server - INFO - 🔄 自动保存完成，耗时: 0.183秒
2025-08-05 13:49:37,558 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:49:37,561 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:49:37,561 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:49:37,562 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:49:37,562 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:49:37,562 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:49:37,562 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:49:37,563 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:49:37,563 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:49:37,563 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:49:37,563 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:49:37,563 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:49:37,563 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:49:37,568 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:49:37,571 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:49:37,572 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:49:37,572 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:49:37,572 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:49:37,573 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:49:37,574 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:49:37,574 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:49:37,575 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:49:37,621 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:49:37,621 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:49:37,621 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:49:37,621 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:49:37,622 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:49:37,778 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:49:37,778 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:49:37,784 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:49:37,784 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:49:37,784 - server - INFO - 🔄 自动保存完成，耗时: 0.223秒
2025-08-05 13:49:47,786 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:49:47,787 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:49:47,787 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:49:47,787 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:49:47,787 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:49:47,787 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:49:47,788 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:49:47,788 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:49:47,788 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:49:47,789 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:49:47,789 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:49:47,789 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:49:47,789 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:49:47,800 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:49:47,802 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:49:47,803 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:49:47,803 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:49:47,803 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:49:47,805 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:49:47,805 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:49:47,805 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:49:47,805 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:49:47,850 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:49:47,850 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:49:47,851 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:49:47,851 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:49:47,851 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:49:47,973 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:49:47,973 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:49:47,978 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:49:47,978 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:49:47,978 - server - INFO - 🔄 自动保存完成，耗时: 0.191秒
2025-08-05 13:49:57,980 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:49:57,981 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:49:57,981 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:49:57,982 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:49:57,982 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:49:57,982 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:49:57,982 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:49:57,982 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:49:57,982 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:49:57,982 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:49:57,982 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:49:57,983 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:49:57,983 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:49:57,994 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:49:57,995 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:49:57,995 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:49:57,995 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:49:57,995 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:49:57,997 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:49:57,997 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:49:57,997 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:49:57,997 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:49:58,049 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:49:58,050 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:49:58,050 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:49:58,050 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:49:58,050 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:49:58,183 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:49:58,183 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:49:58,188 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:49:58,189 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:49:58,189 - server - INFO - 🔄 自动保存完成，耗时: 0.207秒
2025-08-05 13:50:08,189 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:50:08,191 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:50:08,192 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:50:08,192 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:50:08,192 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:50:08,192 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:50:08,192 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:50:08,193 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:50:08,193 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:50:08,193 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:50:08,193 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:50:08,193 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:50:08,193 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:50:08,198 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:50:08,207 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:50:08,207 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:50:08,207 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:50:08,208 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:50:08,208 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:50:08,208 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:50:08,208 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:50:08,208 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:50:08,245 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:50:08,246 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:50:08,246 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:50:08,246 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:50:08,246 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:50:08,383 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:50:08,383 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:50:08,389 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:50:08,389 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:50:08,389 - server - INFO - 🔄 自动保存完成，耗时: 0.198秒
2025-08-05 13:50:18,390 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:50:18,393 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:50:18,394 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:50:18,394 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:50:18,395 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:50:18,395 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:50:18,395 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:50:18,395 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:50:18,395 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:50:18,396 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:50:18,396 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:50:18,396 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:50:18,396 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:50:18,407 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:50:18,409 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:50:18,409 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:50:18,409 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:50:18,409 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:50:18,410 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:50:18,410 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:50:18,410 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:50:18,410 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:50:18,452 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:50:18,452 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:50:18,452 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:50:18,452 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:50:18,452 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:50:18,587 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:50:18,588 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:50:18,593 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:50:18,593 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:50:18,593 - server - INFO - 🔄 自动保存完成，耗时: 0.200秒
2025-08-05 13:50:28,594 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:50:28,598 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:50:28,598 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:50:28,598 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:50:28,598 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:50:28,598 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:50:28,599 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:50:28,599 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:50:28,599 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:50:28,599 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:50:28,599 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:50:28,599 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:50:28,599 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:50:28,606 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:50:28,607 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:50:28,610 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:50:28,610 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:50:28,610 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:50:28,611 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:50:28,611 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:50:28,611 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:50:28,611 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:50:28,692 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:50:28,692 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:50:28,692 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:50:28,692 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:50:28,692 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:50:28,837 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:50:28,837 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:50:28,843 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:50:28,843 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:50:28,843 - server - INFO - 🔄 自动保存完成，耗时: 0.246秒
2025-08-05 13:50:38,845 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:50:38,847 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:50:38,848 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:50:38,848 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:50:38,848 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:50:38,848 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:50:38,848 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:50:38,849 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:50:38,849 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:50:38,849 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:50:38,849 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:50:38,849 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:50:38,849 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:50:38,855 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:50:38,856 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:50:38,857 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:50:38,857 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:50:38,857 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:50:38,858 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:50:38,858 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:50:38,859 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:50:38,859 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:50:38,967 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:50:38,967 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:50:38,968 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:50:38,968 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:50:38,968 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:50:39,192 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:50:39,192 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:50:39,198 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:50:39,198 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:50:39,198 - server - INFO - 🔄 自动保存完成，耗时: 0.351秒
2025-08-05 13:50:49,199 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:50:49,201 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:50:49,201 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:50:49,201 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:50:49,201 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:50:49,201 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:50:49,201 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:50:49,202 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:50:49,202 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:50:49,202 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:50:49,202 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:50:49,202 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:50:49,202 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:50:49,205 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:50:49,212 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:50:49,213 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:50:49,213 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:50:49,213 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:50:49,214 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:50:49,214 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:50:49,214 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:50:49,215 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:50:49,264 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:50:49,264 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:50:49,265 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:50:49,265 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:50:49,266 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:50:49,428 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:50:49,428 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:50:49,434 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:50:49,434 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:50:49,434 - server - INFO - 🔄 自动保存完成，耗时: 0.233秒
2025-08-05 13:50:59,435 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:50:59,438 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:50:59,438 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:50:59,439 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:50:59,439 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:50:59,439 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:50:59,439 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:50:59,439 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:50:59,439 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:50:59,439 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:50:59,440 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:50:59,440 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:50:59,440 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:50:59,445 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:50:59,446 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:50:59,446 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:50:59,446 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:50:59,447 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:50:59,448 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:50:59,448 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:50:59,448 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:50:59,448 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:50:59,482 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:50:59,484 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:50:59,484 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:50:59,484 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:50:59,484 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:50:59,789 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:50:59,790 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:50:59,818 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:50:59,818 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:50:59,818 - server - INFO - 🔄 自动保存完成，耗时: 0.380秒
2025-08-05 13:51:09,820 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:51:09,821 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:51:09,821 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:51:09,822 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:51:09,822 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:51:09,822 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:51:09,822 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:51:09,822 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:51:09,822 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:51:09,822 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:51:09,823 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:51:09,823 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:51:09,823 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:51:09,835 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:51:09,841 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:51:09,844 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:51:09,844 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:51:09,845 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:51:09,849 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:51:09,849 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:51:09,849 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:51:09,849 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:51:09,921 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:51:09,921 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:51:09,921 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:51:09,922 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:51:09,922 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:51:10,057 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:51:10,058 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:51:10,064 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:51:10,065 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:51:10,065 - server - INFO - 🔄 自动保存完成，耗时: 0.244秒
2025-08-05 13:51:20,065 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:51:20,067 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:51:20,068 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:51:20,068 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:51:20,068 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:51:20,068 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:51:20,068 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:51:20,068 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:51:20,069 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:51:20,069 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:51:20,069 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:51:20,069 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:51:20,069 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:51:20,082 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:51:20,084 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:51:20,084 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:51:20,084 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:51:20,084 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:51:20,085 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:51:20,085 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:51:20,085 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:51:20,085 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:51:20,125 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:51:20,125 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:51:20,125 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:51:20,125 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:51:20,125 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:51:20,320 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:51:20,320 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:51:20,327 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:51:20,327 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:51:20,327 - server - INFO - 🔄 自动保存完成，耗时: 0.260秒
2025-08-05 13:51:30,328 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:51:30,334 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:51:30,334 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:51:30,335 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:51:30,335 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:51:30,335 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:51:30,335 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:51:30,335 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:51:30,335 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:51:30,335 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:51:30,335 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:51:30,335 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:51:30,336 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:51:30,343 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:51:30,344 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:51:30,344 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:51:30,344 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:51:30,344 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:51:30,345 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:51:30,346 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:51:30,346 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:51:30,347 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:51:30,394 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:51:30,394 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:51:30,394 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:51:30,394 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:51:30,394 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:51:30,515 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:51:30,515 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:51:30,520 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:51:30,520 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:51:30,521 - server - INFO - 🔄 自动保存完成，耗时: 0.187秒
2025-08-05 13:51:40,522 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:51:40,524 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:51:40,524 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:51:40,524 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:51:40,525 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:51:40,525 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:51:40,525 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:51:40,525 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:51:40,525 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:51:40,525 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:51:40,525 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:51:40,525 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:51:40,525 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:51:40,540 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:51:40,541 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:51:40,542 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:51:40,542 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:51:40,542 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:51:40,543 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:51:40,543 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:51:40,543 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:51:40,543 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:51:40,598 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:51:40,598 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:51:40,599 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:51:40,599 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:51:40,599 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:51:40,737 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:51:40,737 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:51:40,743 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:51:40,743 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:51:40,743 - server - INFO - 🔄 自动保存完成，耗时: 0.220秒
2025-08-05 13:51:50,744 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:51:50,746 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:51:50,746 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:51:50,747 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:51:50,747 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:51:50,747 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:51:50,747 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:51:50,747 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:51:50,747 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:51:50,747 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:51:50,747 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:51:50,747 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:51:50,748 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:51:50,751 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:51:50,760 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:51:50,761 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:51:50,761 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:51:50,761 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:51:50,762 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:51:50,762 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:51:50,762 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:51:50,763 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:51:50,823 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:51:50,824 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:51:50,824 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:51:50,824 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:51:50,825 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:51:50,957 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:51:50,957 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:51:50,963 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:51:50,963 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:51:50,963 - server - INFO - 🔄 自动保存完成，耗时: 0.217秒
2025-08-05 13:52:00,965 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:52:00,968 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:52:00,968 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:52:00,968 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:52:00,968 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:52:00,969 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:52:00,969 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:52:00,969 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:52:00,969 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:52:00,969 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:52:00,969 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:52:00,970 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:52:00,970 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:52:00,975 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:52:00,984 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:52:00,984 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:52:00,984 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:52:00,984 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:52:00,985 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:52:00,985 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:52:00,985 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:52:00,985 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:52:01,018 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:52:01,018 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:52:01,019 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:52:01,019 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:52:01,019 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:52:01,231 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:52:01,231 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:52:01,244 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:52:01,245 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:52:01,245 - server - INFO - 🔄 自动保存完成，耗时: 0.277秒
2025-08-05 13:52:11,246 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:52:11,249 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:52:11,250 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:52:11,250 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:52:11,250 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:52:11,251 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:52:11,251 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:52:11,251 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:52:11,251 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:52:11,251 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:52:11,251 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:52:11,252 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:52:11,252 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:52:11,257 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:52:11,259 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:52:11,259 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:52:11,259 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:52:11,259 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:52:11,260 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:52:11,260 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:52:11,261 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:52:11,261 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:52:11,290 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:52:11,290 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:52:11,290 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:52:11,290 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:52:11,290 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:52:11,452 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:52:11,452 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:52:11,457 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:52:11,458 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:52:11,458 - server - INFO - 🔄 自动保存完成，耗时: 0.208秒
2025-08-05 13:52:21,458 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:52:21,459 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:52:21,460 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:52:21,460 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:52:21,460 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:52:21,461 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:52:21,461 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:52:21,461 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:52:21,461 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:52:21,461 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:52:21,461 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:52:21,462 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:52:21,462 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:52:21,464 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:52:21,466 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:52:21,466 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:52:21,466 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:52:21,466 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:52:21,468 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:52:21,468 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:52:21,468 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:52:21,468 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:52:21,497 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:52:21,497 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:52:21,497 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:52:21,497 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:52:21,497 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:52:21,769 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:52:21,770 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:52:21,786 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:52:21,786 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:52:21,786 - server - INFO - 🔄 自动保存完成，耗时: 0.327秒
2025-08-05 13:52:31,788 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:52:31,792 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:52:31,793 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:52:31,796 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:52:31,797 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:52:31,797 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:52:31,797 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:52:31,798 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:52:31,798 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:52:31,798 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:52:31,798 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:52:31,798 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:52:31,798 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:52:31,803 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:52:31,805 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:52:31,805 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:52:31,805 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:52:31,805 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:52:31,807 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:52:31,807 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:52:31,807 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:52:31,807 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:52:31,855 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:52:31,855 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:52:31,855 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:52:31,856 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:52:31,857 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:52:32,029 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:52:32,029 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:52:32,035 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:52:32,035 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:52:32,035 - server - INFO - 🔄 自动保存完成，耗时: 0.243秒
2025-08-05 13:52:42,036 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:52:42,039 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:52:42,041 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:52:42,042 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:52:42,042 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:52:42,042 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:52:42,042 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:52:42,043 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:52:42,043 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:52:42,043 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:52:42,043 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:52:42,043 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:52:42,043 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:52:42,051 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:52:42,052 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:52:42,053 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:52:42,053 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:52:42,053 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:52:42,055 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:52:42,055 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:52:42,055 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:52:42,055 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:52:42,103 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:52:42,104 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:52:42,104 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:52:42,104 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:52:42,104 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:52:42,240 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:52:42,240 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:52:42,246 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:52:42,246 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:52:42,246 - server - INFO - 🔄 自动保存完成，耗时: 0.207秒
2025-08-05 13:52:52,247 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:52:52,251 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:52:52,252 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:52:52,252 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:52:52,252 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:52:52,252 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:52:52,253 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:52:52,254 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:52:52,254 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:52:52,254 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:52:52,254 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:52:52,254 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:52:52,254 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:52:52,270 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:52:52,271 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:52:52,271 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:52:52,271 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:52:52,271 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:52:52,272 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:52:52,272 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:52:52,272 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:52:52,273 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:52:52,328 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:52:52,328 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:52:52,328 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:52:52,328 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:52:52,328 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:52:52,457 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:52:52,457 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:52:52,463 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:52:52,463 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:52:52,463 - server - INFO - 🔄 自动保存完成，耗时: 0.213秒
2025-08-05 13:53:02,465 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:53:02,472 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:53:02,473 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:53:02,475 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:53:02,475 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:53:02,476 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:53:02,476 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:53:02,477 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:53:02,477 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:53:02,477 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:53:02,478 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:53:02,478 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:53:02,478 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:53:02,488 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:53:02,489 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:53:02,489 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:53:02,489 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:53:02,489 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:53:02,489 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:53:02,489 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:53:02,490 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:53:02,490 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:53:02,532 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:53:02,532 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:53:02,532 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:53:02,532 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:53:02,532 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:53:02,683 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:53:02,683 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:53:02,692 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:53:02,692 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:53:02,692 - server - INFO - 🔄 自动保存完成，耗时: 0.220秒
2025-08-05 13:53:12,692 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:53:12,692 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:53:12,693 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:53:12,693 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:53:12,693 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:53:12,693 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:53:12,693 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:53:12,693 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:53:12,693 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:53:12,693 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:53:12,693 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:53:12,693 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:53:12,693 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:53:12,697 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:53:12,698 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:53:12,698 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:53:12,698 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:53:12,698 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:53:12,700 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:53:12,700 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:53:12,700 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:53:12,700 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:53:12,740 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:53:12,741 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:53:12,741 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:53:12,741 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:53:12,741 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:53:12,896 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:53:12,897 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:53:12,905 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:53:12,905 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:53:12,905 - server - INFO - 🔄 自动保存完成，耗时: 0.212秒
2025-08-05 13:53:22,907 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:53:22,911 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:53:22,913 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:53:22,914 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:53:22,914 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:53:22,914 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:53:22,914 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:53:22,914 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:53:22,914 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:53:22,914 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:53:22,914 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:53:22,914 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:53:22,914 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:53:22,917 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:53:22,918 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:53:22,919 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:53:22,919 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:53:22,919 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:53:22,920 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:53:22,920 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:53:22,920 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:53:22,920 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:53:22,946 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:53:22,946 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:53:22,946 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:53:22,946 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:53:22,947 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:53:23,064 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:53:23,064 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:53:23,069 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:53:23,069 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:53:23,069 - server - INFO - 🔄 自动保存完成，耗时: 0.159秒
2025-08-05 13:53:33,070 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:53:33,072 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:53:33,072 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:53:33,072 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:53:33,072 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:53:33,073 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:53:33,073 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:53:33,073 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:53:33,073 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:53:33,073 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:53:33,073 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:53:33,073 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:53:33,074 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:53:33,081 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:53:33,083 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:53:33,084 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:53:33,084 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:53:33,084 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:53:33,086 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:53:33,086 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:53:33,086 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:53:33,086 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:53:33,126 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:53:33,127 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:53:33,128 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:53:33,130 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:53:33,130 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:53:33,264 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:53:33,264 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:53:33,269 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:53:33,269 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:53:33,269 - server - INFO - 🔄 自动保存完成，耗时: 0.198秒
2025-08-05 13:53:43,271 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:53:43,274 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:53:43,274 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:53:43,274 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:53:43,274 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:53:43,274 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:53:43,275 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:53:43,275 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:53:43,275 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:53:43,275 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:53:43,275 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:53:43,275 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:53:43,275 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:53:43,285 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:53:43,287 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:53:43,287 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:53:43,287 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:53:43,287 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:53:43,288 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:53:43,288 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:53:43,289 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:53:43,289 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:53:43,328 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:53:43,329 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:53:43,329 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:53:43,330 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:53:43,330 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:53:43,479 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:53:43,480 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:53:43,485 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:53:43,485 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:53:43,485 - server - INFO - 🔄 自动保存完成，耗时: 0.212秒
2025-08-05 13:53:53,487 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:53:53,488 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:53:53,489 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:53:53,489 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:53:53,489 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:53:53,489 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:53:53,489 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:53:53,490 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:53:53,490 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:53:53,490 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:53:53,490 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:53:53,490 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:53:53,490 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:53:53,497 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:53:53,502 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:53:53,502 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:53:53,502 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:53:53,502 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:53:53,504 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:53:53,504 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:53:53,504 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:53:53,504 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:53:53,592 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:53:53,592 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:53:53,592 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:53:53,592 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:53:53,592 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:53:53,755 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:53:53,755 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:53:53,761 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:53:53,761 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:53:53,761 - server - INFO - 🔄 自动保存完成，耗时: 0.273秒
2025-08-05 13:54:03,762 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:54:03,764 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:54:03,764 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:54:03,765 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:54:03,765 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:54:03,765 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:54:03,766 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:54:03,766 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:54:03,766 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:54:03,766 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:54:03,766 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:54:03,767 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:54:03,767 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:54:03,771 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:54:03,772 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:54:03,772 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:54:03,772 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:54:03,772 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:54:03,773 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:54:03,773 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:54:03,773 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:54:03,774 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:54:03,814 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:54:03,816 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:54:03,817 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:54:03,817 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:54:03,817 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:54:03,953 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:54:03,954 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:54:03,959 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:54:03,959 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:54:03,959 - server - INFO - 🔄 自动保存完成，耗时: 0.195秒
2025-08-05 13:54:13,959 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:54:13,960 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:54:13,960 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:54:13,960 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:54:13,961 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:54:13,961 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:54:13,961 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:54:13,961 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:54:13,961 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:54:13,962 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:54:13,962 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:54:13,962 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:54:13,962 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:54:13,964 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:54:13,964 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:54:13,964 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:54:13,965 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:54:13,965 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:54:13,966 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:54:13,967 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:54:13,967 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:54:13,967 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:54:13,992 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:54:13,992 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:54:13,992 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:54:13,992 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:54:13,992 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:54:14,230 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:54:14,230 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:54:14,248 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:54:14,248 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:54:14,248 - server - INFO - 🔄 自动保存完成，耗时: 0.288秒
2025-08-05 13:54:24,250 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:54:24,253 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:54:24,253 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:54:24,253 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:54:24,253 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:54:24,253 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:54:24,254 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:54:24,254 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:54:24,254 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:54:24,254 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:54:24,254 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:54:24,254 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:54:24,254 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:54:24,262 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:54:24,268 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:54:24,268 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:54:24,268 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:54:24,268 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:54:24,270 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:54:24,270 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:54:24,270 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:54:24,270 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:54:24,319 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:54:24,320 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:54:24,320 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:54:24,320 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:54:24,320 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:54:24,553 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:54:24,553 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:54:24,569 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:54:24,569 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:54:24,569 - server - INFO - 🔄 自动保存完成，耗时: 0.316秒
2025-08-05 13:54:34,570 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:54:34,572 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:54:34,573 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:54:34,573 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:54:34,574 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:54:34,574 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:54:34,574 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:54:34,575 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:54:34,575 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:54:34,575 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:54:34,575 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:54:34,575 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:54:34,575 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:54:34,586 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:54:34,587 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:54:34,588 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:54:34,588 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:54:34,588 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:54:34,589 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:54:34,589 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:54:34,589 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:54:34,589 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:54:34,626 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:54:34,626 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:54:34,627 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:54:34,627 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:54:34,627 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:54:34,782 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:54:34,782 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:54:34,788 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:54:34,788 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:54:34,788 - server - INFO - 🔄 自动保存完成，耗时: 0.216秒
2025-08-05 13:54:44,790 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:54:44,799 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:54:44,799 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:54:44,799 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:54:44,800 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:54:44,800 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:54:44,800 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:54:44,800 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:54:44,800 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:54:44,800 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:54:44,800 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:54:44,800 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:54:44,800 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:54:44,816 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:54:44,844 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:54:44,844 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:54:44,844 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:54:44,845 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:54:44,863 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:54:44,864 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:54:44,865 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:54:44,866 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:54:44,924 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:54:44,924 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:54:44,924 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:54:44,924 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:54:44,924 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:54:45,068 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:54:45,068 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:54:45,073 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:54:45,073 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:54:45,073 - server - INFO - 🔄 自动保存完成，耗时: 0.274秒
2025-08-05 13:54:55,074 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:54:55,076 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:54:55,077 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:54:55,077 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:54:55,077 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:54:55,078 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:54:55,078 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:54:55,078 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:54:55,078 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:54:55,078 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:54:55,079 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:54:55,079 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:54:55,079 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:54:55,083 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:54:55,084 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:54:55,084 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:54:55,084 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:54:55,084 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:54:55,085 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:54:55,085 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:54:55,085 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:54:55,085 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:54:55,140 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:54:55,140 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:54:55,140 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:54:55,140 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:54:55,141 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:54:55,279 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:54:55,280 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:54:55,285 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:54:55,285 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:54:55,285 - server - INFO - 🔄 自动保存完成，耗时: 0.209秒
2025-08-05 13:55:05,285 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:55:05,288 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:55:05,288 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:55:05,288 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:55:05,288 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:55:05,289 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:55:05,289 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:55:05,289 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:55:05,289 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:55:05,289 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:55:05,289 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:55:05,289 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:55:05,289 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:55:05,295 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:55:05,297 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:55:05,297 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:55:05,297 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:55:05,297 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:55:05,298 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:55:05,298 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:55:05,298 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:55:05,298 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:55:05,334 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:55:05,334 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:55:05,335 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:55:05,335 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:55:05,335 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:55:05,598 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:55:05,598 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:55:05,613 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:55:05,613 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:55:05,613 - server - INFO - 🔄 自动保存完成，耗时: 0.325秒
2025-08-05 13:55:15,615 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:55:15,616 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:55:15,616 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:55:15,616 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:55:15,616 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:55:15,616 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:55:15,616 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:55:15,617 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:55:15,617 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:55:15,617 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:55:15,617 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:55:15,617 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:55:15,617 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:55:15,619 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:55:15,620 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:55:15,621 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:55:15,621 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:55:15,621 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:55:15,623 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:55:15,624 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:55:15,624 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:55:15,624 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:55:15,653 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:55:15,653 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:55:15,653 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:55:15,653 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:55:15,653 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:55:15,815 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:55:15,815 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:55:15,820 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:55:15,820 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:55:15,820 - server - INFO - 🔄 自动保存完成，耗时: 0.205秒
2025-08-05 13:55:25,821 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:55:25,822 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:55:25,822 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:55:25,822 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:55:25,823 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:55:25,823 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:55:25,823 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:55:25,823 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:55:25,823 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:55:25,823 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:55:25,823 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:55:25,823 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:55:25,823 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:55:25,825 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:55:25,826 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:55:25,826 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:55:25,826 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:55:25,826 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:55:25,826 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:55:25,827 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:55:25,827 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:55:25,827 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:55:25,850 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:55:25,851 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:55:25,851 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:55:25,851 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:55:25,851 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:55:26,097 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:55:26,097 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:55:26,108 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:55:26,108 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:55:26,109 - server - INFO - 🔄 自动保存完成，耗时: 0.286秒
2025-08-05 13:55:36,109 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 13:55:36,118 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 13:55:36,119 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 13:55:36,119 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 13:55:36,119 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 13:55:36,119 - DataIntegrity - INFO - matches 检查完成
2025-08-05 13:55:36,120 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 13:55:36,120 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 13:55:36,120 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 13:55:36,120 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 13:55:36,120 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 13:55:36,121 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 13:55:36,121 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 13:55:36,127 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 13:55:36,129 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 13:55:36,129 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 13:55:36,129 - DataIntegrity - INFO - messages 检查完成
2025-08-05 13:55:36,129 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 13:55:36,131 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 13:55:36,131 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 13:55:36,131 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 13:55:36,131 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 13:55:36,182 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 13:55:36,183 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:55:36,183 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 13:55:36,183 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:55:36,183 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 13:55:36,410 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:55:36,410 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 13:55:36,422 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 13:55:36,422 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 13:55:36,422 - server - INFO - 🔄 自动保存完成，耗时: 0.304秒
2025-08-05 13:55:37,735 - server - INFO - 正在关闭服务...
2025-08-05 13:55:37,735 - server - INFO - 正在停止自动保存任务...
2025-08-05 13:55:37,736 - server - INFO - 自动保存任务被取消
2025-08-05 13:55:37,736 - server - INFO - 执行最后一次数据保存...
2025-08-05 13:55:37,767 - server - INFO - 最终用户数据保存完成
2025-08-05 13:55:37,767 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 13:55:37,767 - server - INFO - 最终匹配数据保存完成
2025-08-05 13:55:37,767 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 13:55:37,767 - server - INFO - 最终聊天室数据保存完成
2025-08-05 13:55:37,926 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 13:55:37,926 - server - INFO - 最终AI聊天数据保存完成
2025-08-05 13:55:37,926 - server - INFO - 正在关闭数据库连接...
2025-08-05 13:55:37,929 - database - INFO - Closed MongoDB connection
2025-08-05 13:55:37,930 - server - INFO - 数据库连接已关闭
2025-08-05 13:59:52,390 - server - INFO - HTTP API路由已注册
2025-08-05 13:59:52,390 - server - INFO - WebSocket路由已注册
2025-08-05 13:59:52,390 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 13:59:52,390 - server - INFO - 启动服务器: NewLoveLushUserService v1.0.0
2025-08-05 13:59:52,427 - server - INFO - HTTP API路由已注册
2025-08-05 13:59:52,427 - server - INFO - WebSocket路由已注册
2025-08-05 13:59:52,427 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 13:59:52,428 - server - INFO - 正在连接数据库...
2025-08-05 13:59:52,443 - database - INFO - Connected to MongoDB successfully
2025-08-05 13:59:52,443 - server - INFO - 数据库连接成功
2025-08-05 13:59:52,443 - server - INFO - 🎮 正在初始化抽卡游戏基础数据...
2025-08-05 13:59:52,443 - server - INFO - 🎮 开始初始化性格测试数据（抽卡游戏数据）...
2025-08-05 13:59:52,451 - server - INFO - 🎮 现有题目数量: 16, 现有卡片数量: 8
2025-08-05 13:59:52,451 - server - INFO - 🎮 题目数据完整(16/16)，跳过导入
2025-08-05 13:59:52,451 - server - INFO - 🎮 卡片数据完整(8/8)，跳过导入
2025-08-05 13:59:52,452 - server - INFO - 🎮 最终数据统计 - 题目: 16/16, 卡片: 8/8
2025-08-05 13:59:52,452 - server - INFO - 🎉 性格测试数据初始化完成！抽卡游戏已就绪
2025-08-05 13:59:52,452 - server - INFO - ✅ 抽卡游戏基础数据初始化成功
2025-08-05 13:59:52,452 - server - INFO - 正在初始化UserManagement缓存...
2025-08-05 13:59:52,453 - server - INFO - UserManagement缓存初始化完成
2025-08-05 13:59:52,453 - server - INFO - 正在初始化MatchManager缓存...
2025-08-05 13:59:52,453 - MatchManager - INFO - MatchManager singleton instance created
2025-08-05 13:59:52,453 - MatchManager - INFO - MatchManager construct: Initializing Match counter...
2025-08-05 13:59:52,455 - Match - INFO - No existing matches found, starting counter from 0
2025-08-05 13:59:52,455 - MatchManager - INFO - MatchManager construct: Loading matches from database...
2025-08-05 13:59:52,456 - MatchManager - INFO - MatchManager construct: Found 0 matches in database
2025-08-05 13:59:52,456 - MatchManager - INFO - MatchManager construct: Loaded 0 matches from database
2025-08-05 13:59:52,456 - MatchManager - INFO - MatchManager construct completed successfully
2025-08-05 13:59:52,456 - server - INFO - MatchManager缓存初始化完成
2025-08-05 13:59:52,456 - server - INFO - 正在初始化ChatroomManager缓存...
2025-08-05 13:59:52,456 - ChatroomManager - INFO - ChatroomManager singleton instance created
2025-08-05 13:59:52,456 - ChatroomManager - INFO - ChatroomManager construct: Initializing counters...
2025-08-05 13:59:52,457 - Message - INFO - No existing messages found, starting counter from 0
2025-08-05 13:59:52,457 - Chatroom - INFO - No existing chatrooms found, starting counter from 0
2025-08-05 13:59:52,457 - ChatroomManager - INFO - ChatroomManager construct: Querying chatrooms from database...
2025-08-05 13:59:52,457 - ChatroomManager - INFO - ChatroomManager construct: Found 0 chatrooms in database
2025-08-05 13:59:52,457 - ChatroomManager - INFO - ChatroomManager construct: Loaded 0 chatrooms from database
2025-08-05 13:59:52,457 - ChatroomManager - INFO - ChatroomManager construct: Final chatrooms in memory: []
2025-08-05 13:59:52,457 - server - INFO - ChatroomManager缓存初始化完成 - 加载了 0 个聊天室
2025-08-05 13:59:52,457 - server - INFO - ChatroomManager可用的聊天室ID: []
2025-08-05 13:59:52,457 - server - INFO - ChatroomManager缓存初始化完成
2025-08-05 13:59:52,457 - server - INFO - 正在初始化N8nWebhookManager...
2025-08-05 13:59:52,458 - server - INFO - N8nWebhookManager初始化完成
2025-08-05 13:59:52,458 - server - INFO - 正在初始化AIResponseProcessor...
2025-08-05 13:59:52,459 - AIResponseProcessor - INFO - AI消息计数器从数据库初始化: 从 230 开始
2025-08-05 13:59:52,459 - AIResponseProcessor - INFO - AIResponseProcessor: 开始从数据库加载AI聊天数据到内存
2025-08-05 13:59:52,463 - AIResponseProcessor - INFO - AIResponseProcessor: 成功从数据库加载 20 个AI聊天室，230 条消息到内存
2025-08-05 13:59:52,463 - AIResponseProcessor - INFO - AIResponseProcessor: 当前内存中有 20 个聊天室，230 条消息
2025-08-05 13:59:52,463 - server - INFO - AIResponseProcessor初始化完成
2025-08-05 13:59:52,463 - server - INFO - 正在初始化PersonalityTestManager...
2025-08-05 13:59:52,463 - PersonalityTestManager - INFO - PersonalityTestManager: 开始从数据库加载数据到内存
2025-08-05 13:59:52,466 - PersonalityTestManager - INFO - PersonalityTestManager: 成功加载 16 道题目，8 张卡片，15 个测试会话
2025-08-05 13:59:52,466 - PersonalityTestManager - INFO - PersonalityTestManager: 加载了 7 条用户历史记录
2025-08-05 13:59:52,466 - server - INFO - PersonalityTestManager初始化完成
2025-08-05 13:59:52,466 - server - INFO - 正在启动自动保存后台任务...
2025-08-05 13:59:52,466 - server - INFO - 自动保存后台任务已启动
2025-08-05 13:59:52,466 - server - INFO - 启动自动保存任务，每10秒保存一次所有单例数据到数据库
2025-08-05 14:00:02,513 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:00:02,560 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:00:02,561 - DataIntegrity - INFO - DataIntegrity singleton instance created
2025-08-05 14:00:02,581 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:00:02,581 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:00:02,581 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:00:02,582 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:00:02,582 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:00:02,582 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:00:02,582 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:00:02,582 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:00:02,582 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:00:02,582 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:00:02,583 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:00:02,588 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:00:02,597 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:00:02,597 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:00:02,597 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:00:02,598 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:00:02,603 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:00:02,603 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:00:02,604 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:00:02,604 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:00:03,361 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:00:03,362 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:00:03,362 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:00:03,362 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:00:03,362 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:00:03,750 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:00:03,751 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:00:03,774 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:00:03,775 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:00:03,776 - server - INFO - 🔄 自动保存完成，耗时: 1.216秒
2025-08-05 14:00:13,778 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:00:13,783 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:00:13,783 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:00:13,783 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:00:13,783 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:00:13,784 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:00:13,784 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:00:13,784 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:00:13,784 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:00:13,784 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:00:13,784 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:00:13,784 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:00:13,784 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:00:13,913 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:00:13,914 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:00:13,914 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:00:13,914 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:00:13,914 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:00:13,914 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:00:13,914 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:00:13,914 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:00:13,914 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:00:13,979 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:00:13,979 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:00:13,979 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:00:13,979 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:00:13,979 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:00:14,108 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:00:14,108 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:00:14,114 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:00:14,114 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:00:14,115 - server - INFO - 🔄 自动保存完成，耗时: 0.332秒
2025-08-05 14:00:24,116 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:00:24,118 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:00:24,118 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:00:24,119 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:00:24,119 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:00:24,119 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:00:24,119 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:00:24,120 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:00:24,120 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:00:24,120 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:00:24,120 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:00:24,120 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:00:24,120 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:00:24,124 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:00:24,129 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:00:24,134 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:00:24,134 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:00:24,134 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:00:24,135 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:00:24,135 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:00:24,135 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:00:24,135 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:00:24,162 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:00:24,162 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:00:24,162 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:00:24,162 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:00:24,162 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:00:24,298 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:00:24,298 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:00:24,304 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:00:24,304 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:00:24,304 - server - INFO - 🔄 自动保存完成，耗时: 0.186秒
2025-08-05 14:00:34,304 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:00:34,307 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:00:34,307 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:00:34,308 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:00:34,309 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:00:34,309 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:00:34,309 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:00:34,309 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:00:34,310 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:00:34,310 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:00:34,310 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:00:34,310 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:00:34,310 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:00:34,325 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:00:34,326 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:00:34,326 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:00:34,326 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:00:34,326 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:00:34,328 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:00:34,328 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:00:34,328 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:00:34,328 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:00:34,357 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:00:34,357 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:00:34,357 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:00:34,357 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:00:34,357 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:00:34,500 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:00:34,500 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:00:34,506 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:00:34,506 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:00:34,506 - server - INFO - 🔄 自动保存完成，耗时: 0.199秒
2025-08-05 14:00:44,507 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:00:44,511 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:00:44,512 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:00:44,513 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:00:44,513 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:00:44,514 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:00:44,514 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:00:44,515 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:00:44,515 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:00:44,515 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:00:44,515 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:00:44,515 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:00:44,515 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:00:44,524 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:00:44,526 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:00:44,527 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:00:44,527 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:00:44,527 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:00:44,529 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:00:44,529 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:00:44,529 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:00:44,529 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:00:44,568 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:00:44,568 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:00:44,568 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:00:44,568 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:00:44,568 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:00:44,776 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:00:44,776 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:00:44,784 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:00:44,785 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:00:44,785 - server - INFO - 🔄 自动保存完成，耗时: 0.274秒
2025-08-05 14:00:54,785 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:00:54,786 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:00:54,787 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:00:54,790 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:00:54,790 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:00:54,790 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:00:54,790 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:00:54,790 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:00:54,790 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:00:54,790 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:00:54,791 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:00:54,791 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:00:54,791 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:00:54,804 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:00:54,806 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:00:54,806 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:00:54,806 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:00:54,806 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:00:54,807 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:00:54,807 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:00:54,807 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:00:54,807 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:00:54,903 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:00:54,903 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:00:54,903 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:00:54,903 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:00:54,904 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:00:55,889 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:00:55,891 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:00:55,950 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:00:55,951 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:00:55,951 - server - INFO - 🔄 自动保存完成，耗时: 1.165秒
2025-08-05 14:01:05,952 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:01:05,954 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:01:05,954 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:01:05,954 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:01:05,955 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:01:05,955 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:01:05,955 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:01:05,955 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:01:05,955 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:01:05,955 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:01:05,956 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:01:05,956 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:01:05,956 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:01:05,971 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:01:05,991 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:01:05,991 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:01:05,992 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:01:05,992 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:01:05,994 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:01:05,994 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:01:05,994 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:01:05,994 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:01:06,022 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:01:06,022 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:01:06,022 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:01:06,022 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:01:06,022 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:01:06,253 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:01:06,253 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:01:06,257 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:01:06,258 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:01:06,258 - server - INFO - 🔄 自动保存完成，耗时: 0.304秒
2025-08-05 14:01:16,260 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:01:16,262 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:01:16,262 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:01:16,262 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:01:16,262 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:01:16,263 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:01:16,263 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:01:16,263 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:01:16,263 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:01:16,263 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:01:16,263 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:01:16,263 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:01:16,263 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:01:16,270 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:01:16,272 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:01:16,273 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:01:16,273 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:01:16,273 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:01:16,274 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:01:16,274 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:01:16,274 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:01:16,274 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:01:16,312 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:01:16,312 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:01:16,312 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:01:16,312 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:01:16,312 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:01:16,430 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:01:16,430 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:01:16,435 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:01:16,436 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:01:16,436 - server - INFO - 🔄 自动保存完成，耗时: 0.174秒
2025-08-05 14:01:26,437 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:01:26,438 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:01:26,439 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:01:26,439 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:01:26,439 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:01:26,439 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:01:26,439 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:01:26,439 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:01:26,439 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:01:26,439 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:01:26,440 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:01:26,440 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:01:26,440 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:01:26,444 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:01:26,449 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:01:26,452 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:01:26,453 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:01:26,453 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:01:26,455 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:01:26,455 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:01:26,455 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:01:26,455 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:01:26,480 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:01:26,481 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:01:26,481 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:01:26,482 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:01:26,482 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:01:26,606 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:01:26,606 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:01:26,612 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:01:26,612 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:01:26,612 - server - INFO - 🔄 自动保存完成，耗时: 0.174秒
2025-08-05 14:01:36,614 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:01:36,617 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:01:36,618 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:01:36,618 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:01:36,618 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:01:36,619 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:01:36,619 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:01:36,619 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:01:36,619 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:01:36,619 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:01:36,619 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:01:36,619 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:01:36,620 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:01:36,628 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:01:36,629 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:01:36,630 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:01:36,630 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:01:36,630 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:01:36,630 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:01:36,630 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:01:36,630 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:01:36,630 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:01:36,662 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:01:36,663 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:01:36,663 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:01:36,663 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:01:36,663 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:01:36,763 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:01:36,763 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:01:36,768 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:01:36,768 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:01:36,768 - server - INFO - 🔄 自动保存完成，耗时: 0.151秒
2025-08-05 14:01:46,771 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:01:46,777 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:01:46,778 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:01:46,778 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:01:46,778 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:01:46,778 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:01:46,778 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:01:46,779 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:01:46,779 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:01:46,779 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:01:46,779 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:01:46,779 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:01:46,779 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:01:46,782 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:01:46,784 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:01:46,784 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:01:46,784 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:01:46,785 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:01:46,787 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:01:46,787 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:01:46,787 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:01:46,787 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:01:46,809 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:01:46,810 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:01:46,810 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:01:46,810 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:01:46,810 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:01:47,051 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:01:47,052 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:01:47,068 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:01:47,068 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:01:47,069 - server - INFO - 🔄 自动保存完成，耗时: 0.292秒
2025-08-05 14:01:57,070 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:01:57,072 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:01:57,073 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:01:57,073 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:01:57,074 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:01:57,074 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:01:57,074 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:01:57,076 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:01:57,076 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:01:57,076 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:01:57,076 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:01:57,076 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:01:57,077 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:01:57,088 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:01:57,089 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:01:57,090 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:01:57,090 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:01:57,090 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:01:57,092 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:01:57,092 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:01:57,092 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:01:57,092 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:01:57,120 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:01:57,121 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:01:57,122 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:01:57,124 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:01:57,124 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:01:57,271 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:01:57,271 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:01:57,279 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:01:57,279 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:01:57,279 - server - INFO - 🔄 自动保存完成，耗时: 0.207秒
2025-08-05 14:02:07,282 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:02:07,284 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:02:07,285 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:02:07,285 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:02:07,285 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:02:07,285 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:02:07,285 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:02:07,286 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:02:07,286 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:02:07,286 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:02:07,286 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:02:07,286 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:02:07,286 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:02:07,290 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:02:07,292 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:02:07,292 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:02:07,293 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:02:07,293 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:02:07,294 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:02:07,294 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:02:07,294 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:02:07,294 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:02:07,366 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:02:07,366 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:02:07,366 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:02:07,366 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:02:07,366 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:02:07,525 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:02:07,525 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:02:07,531 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:02:07,531 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:02:07,531 - server - INFO - 🔄 自动保存完成，耗时: 0.247秒
2025-08-05 14:02:17,535 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:02:17,546 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:02:17,547 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:02:17,549 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:02:17,550 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:02:17,550 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:02:17,552 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:02:17,557 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:02:17,557 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:02:17,557 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:02:17,557 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:02:17,557 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:02:17,557 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:02:17,632 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:02:17,639 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:02:17,639 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:02:17,639 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:02:17,639 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:02:17,648 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:02:17,648 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:02:17,649 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:02:17,649 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:02:17,782 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:02:17,782 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:02:17,782 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:02:17,783 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:02:17,783 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:02:17,939 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:02:17,939 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:02:17,945 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:02:17,945 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:02:17,946 - server - INFO - 🔄 自动保存完成，耗时: 0.399秒
2025-08-05 14:02:27,948 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:02:27,951 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:02:27,951 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:02:27,951 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:02:27,951 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:02:27,952 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:02:27,952 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:02:27,952 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:02:27,952 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:02:27,952 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:02:27,952 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:02:27,952 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:02:27,952 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:02:27,956 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:02:27,958 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:02:27,959 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:02:27,959 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:02:27,959 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:02:27,960 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:02:27,960 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:02:27,960 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:02:27,960 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:02:27,996 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:02:27,996 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:02:27,996 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:02:27,997 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:02:27,997 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:02:28,252 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:02:28,252 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:02:28,263 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:02:28,263 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:02:28,263 - server - INFO - 🔄 自动保存完成，耗时: 0.313秒
2025-08-05 14:02:38,265 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:02:38,268 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:02:38,268 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:02:38,269 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:02:38,269 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:02:38,269 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:02:38,269 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:02:38,269 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:02:38,269 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:02:38,269 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:02:38,270 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:02:38,270 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:02:38,270 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:02:38,278 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:02:38,279 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:02:38,279 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:02:38,279 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:02:38,279 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:02:38,280 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:02:38,280 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:02:38,280 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:02:38,281 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:02:38,336 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:02:38,336 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:02:38,337 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:02:38,337 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:02:38,337 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:02:38,471 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:02:38,471 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:02:38,477 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:02:38,478 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:02:38,478 - server - INFO - 🔄 自动保存完成，耗时: 0.210秒
2025-08-05 14:02:46,535 - server - INFO - 正在关闭服务...
2025-08-05 14:02:46,536 - server - INFO - 正在停止自动保存任务...
2025-08-05 14:02:46,536 - server - INFO - 自动保存任务被取消
2025-08-05 14:02:46,537 - server - INFO - 执行最后一次数据保存...
2025-08-05 14:02:46,558 - server - INFO - 最终用户数据保存完成
2025-08-05 14:02:46,558 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:02:46,558 - server - INFO - 最终匹配数据保存完成
2025-08-05 14:02:46,559 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:02:46,559 - server - INFO - 最终聊天室数据保存完成
2025-08-05 14:02:46,705 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:02:46,705 - server - INFO - 最终AI聊天数据保存完成
2025-08-05 14:02:46,705 - server - INFO - 正在关闭数据库连接...
2025-08-05 14:02:46,709 - database - INFO - Closed MongoDB connection
2025-08-05 14:02:46,709 - server - INFO - 数据库连接已关闭
2025-08-05 14:09:36,694 - server - INFO - HTTP API路由已注册
2025-08-05 14:09:36,694 - server - INFO - WebSocket路由已注册
2025-08-05 14:09:36,694 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 14:09:36,694 - server - INFO - 启动服务器: NewLoveLushUserService v1.0.0
2025-08-05 14:09:36,731 - server - INFO - HTTP API路由已注册
2025-08-05 14:09:36,731 - server - INFO - WebSocket路由已注册
2025-08-05 14:09:36,731 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 14:09:36,732 - server - INFO - 正在连接数据库...
2025-08-05 14:09:36,755 - database - INFO - Connected to MongoDB successfully
2025-08-05 14:09:36,755 - server - INFO - 数据库连接成功
2025-08-05 14:09:36,755 - server - INFO - 🎮 正在初始化抽卡游戏基础数据...
2025-08-05 14:09:36,756 - server - INFO - 🎮 开始初始化性格测试数据（抽卡游戏数据）...
2025-08-05 14:09:36,823 - server - INFO - 🎮 现有题目数量: 16, 现有卡片数量: 8
2025-08-05 14:09:36,823 - server - INFO - 🎮 题目数据完整(16/16)，跳过导入
2025-08-05 14:09:36,824 - server - INFO - 🎮 卡片数据完整(8/8)，跳过导入
2025-08-05 14:09:36,825 - server - INFO - 🎮 最终数据统计 - 题目: 16/16, 卡片: 8/8
2025-08-05 14:09:36,825 - server - INFO - 🎉 性格测试数据初始化完成！抽卡游戏已就绪
2025-08-05 14:09:36,825 - server - INFO - ✅ 抽卡游戏基础数据初始化成功
2025-08-05 14:09:36,825 - server - INFO - 正在初始化UserManagement缓存...
2025-08-05 14:09:36,831 - server - INFO - UserManagement缓存初始化完成
2025-08-05 14:09:36,831 - server - INFO - 正在初始化MatchManager缓存...
2025-08-05 14:09:36,831 - MatchManager - INFO - MatchManager singleton instance created
2025-08-05 14:09:36,831 - MatchManager - INFO - MatchManager construct: Initializing Match counter...
2025-08-05 14:09:36,834 - Match - INFO - No existing matches found, starting counter from 0
2025-08-05 14:09:36,834 - MatchManager - INFO - MatchManager construct: Loading matches from database...
2025-08-05 14:09:36,835 - MatchManager - INFO - MatchManager construct: Found 0 matches in database
2025-08-05 14:09:36,835 - MatchManager - INFO - MatchManager construct: Loaded 0 matches from database
2025-08-05 14:09:36,835 - MatchManager - INFO - MatchManager construct completed successfully
2025-08-05 14:09:36,835 - server - INFO - MatchManager缓存初始化完成
2025-08-05 14:09:36,835 - server - INFO - 正在初始化ChatroomManager缓存...
2025-08-05 14:09:36,835 - ChatroomManager - INFO - ChatroomManager singleton instance created
2025-08-05 14:09:36,835 - ChatroomManager - INFO - ChatroomManager construct: Initializing counters...
2025-08-05 14:09:36,835 - Message - INFO - No existing messages found, starting counter from 0
2025-08-05 14:09:36,836 - Chatroom - INFO - No existing chatrooms found, starting counter from 0
2025-08-05 14:09:36,836 - ChatroomManager - INFO - ChatroomManager construct: Querying chatrooms from database...
2025-08-05 14:09:36,836 - ChatroomManager - INFO - ChatroomManager construct: Found 0 chatrooms in database
2025-08-05 14:09:36,837 - ChatroomManager - INFO - ChatroomManager construct: Loaded 0 chatrooms from database
2025-08-05 14:09:36,837 - ChatroomManager - INFO - ChatroomManager construct: Final chatrooms in memory: []
2025-08-05 14:09:36,837 - server - INFO - ChatroomManager缓存初始化完成 - 加载了 0 个聊天室
2025-08-05 14:09:36,837 - server - INFO - ChatroomManager可用的聊天室ID: []
2025-08-05 14:09:36,837 - server - INFO - ChatroomManager缓存初始化完成
2025-08-05 14:09:36,837 - server - INFO - 正在初始化N8nWebhookManager...
2025-08-05 14:09:36,837 - server - INFO - N8nWebhookManager初始化完成
2025-08-05 14:09:36,837 - server - INFO - 正在初始化AIResponseProcessor...
2025-08-05 14:09:36,844 - AIResponseProcessor - INFO - AI消息计数器从数据库初始化: 从 230 开始
2025-08-05 14:09:36,844 - AIResponseProcessor - INFO - AIResponseProcessor: 开始从数据库加载AI聊天数据到内存
2025-08-05 14:09:36,847 - AIResponseProcessor - INFO - AIResponseProcessor: 成功从数据库加载 20 个AI聊天室，230 条消息到内存
2025-08-05 14:09:36,847 - AIResponseProcessor - INFO - AIResponseProcessor: 当前内存中有 20 个聊天室，230 条消息
2025-08-05 14:09:36,847 - server - INFO - AIResponseProcessor初始化完成
2025-08-05 14:09:36,847 - server - INFO - 正在初始化PersonalityTestManager...
2025-08-05 14:09:36,848 - PersonalityTestManager - INFO - PersonalityTestManager: 开始从数据库加载数据到内存
2025-08-05 14:09:36,849 - PersonalityTestManager - INFO - PersonalityTestManager: 成功加载 16 道题目，8 张卡片，15 个测试会话
2025-08-05 14:09:36,849 - PersonalityTestManager - INFO - PersonalityTestManager: 加载了 7 条用户历史记录
2025-08-05 14:09:36,849 - server - INFO - PersonalityTestManager初始化完成
2025-08-05 14:09:36,849 - server - INFO - 正在启动自动保存后台任务...
2025-08-05 14:09:36,850 - server - INFO - 自动保存后台任务已启动
2025-08-05 14:09:36,850 - server - INFO - 启动自动保存任务，每10秒保存一次所有单例数据到数据库
2025-08-05 14:09:46,851 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:09:46,852 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:09:46,852 - DataIntegrity - INFO - DataIntegrity singleton instance created
2025-08-05 14:09:46,852 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:09:46,852 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:09:46,852 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:09:46,852 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:09:46,852 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:09:46,853 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:09:46,853 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:09:46,853 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:09:46,853 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:09:46,853 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:09:46,853 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:09:46,857 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:09:46,859 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:09:46,859 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:09:46,859 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:09:46,859 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:09:46,860 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:09:46,861 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:09:46,861 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:09:46,861 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:09:46,920 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:09:46,920 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:09:46,920 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:09:46,920 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:09:46,920 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:09:47,068 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:09:47,068 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:09:47,074 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:09:47,075 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:09:47,075 - server - INFO - 🔄 自动保存完成，耗时: 0.223秒
2025-08-05 14:09:57,075 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:09:57,077 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:09:57,077 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:09:57,078 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:09:57,078 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:09:57,078 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:09:57,078 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:09:57,079 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:09:57,079 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:09:57,079 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:09:57,079 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:09:57,079 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:09:57,079 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:09:57,082 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:09:57,083 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:09:57,083 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:09:57,083 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:09:57,083 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:09:57,083 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:09:57,083 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:09:57,083 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:09:57,083 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:09:57,119 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:09:57,120 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:09:57,120 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:09:57,120 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:09:57,121 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:09:57,368 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:09:57,368 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:09:57,395 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:09:57,395 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:09:57,396 - server - INFO - 🔄 自动保存完成，耗时: 0.319秒
2025-08-05 14:10:07,397 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:10:07,399 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:10:07,399 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:10:07,400 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:10:07,400 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:10:07,400 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:10:07,400 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:10:07,400 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:10:07,400 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:10:07,401 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:10:07,401 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:10:07,401 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:10:07,401 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:10:07,406 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:10:07,408 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:10:07,408 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:10:07,408 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:10:07,408 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:10:07,409 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:10:07,409 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:10:07,409 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:10:07,409 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:10:07,440 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:10:07,441 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:10:07,441 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:10:07,442 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:10:07,443 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:10:07,590 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:10:07,590 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:10:07,596 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:10:07,596 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:10:07,596 - server - INFO - 🔄 自动保存完成，耗时: 0.197秒
2025-08-05 14:10:17,597 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:10:17,598 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:10:17,598 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:10:17,599 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:10:17,599 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:10:17,599 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:10:17,600 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:10:17,600 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:10:17,600 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:10:17,600 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:10:17,601 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:10:17,601 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:10:17,601 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:10:17,613 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:10:17,615 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:10:17,615 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:10:17,615 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:10:17,615 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:10:17,617 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:10:17,617 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:10:17,617 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:10:17,617 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:10:17,675 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:10:17,676 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:10:17,677 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:10:17,677 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:10:17,678 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:10:17,826 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:10:17,826 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:10:17,834 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:10:17,834 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:10:17,834 - server - INFO - 🔄 自动保存完成，耗时: 0.236秒
2025-08-05 14:10:27,835 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:10:27,837 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:10:27,837 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:10:27,837 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:10:27,837 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:10:27,837 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:10:27,838 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:10:27,838 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:10:27,838 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:10:27,838 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:10:27,838 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:10:27,838 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:10:27,838 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:10:27,841 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:10:27,842 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:10:27,843 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:10:27,843 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:10:27,843 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:10:27,844 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:10:27,844 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:10:27,844 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:10:27,844 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:10:27,869 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:10:27,869 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:10:27,870 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:10:27,870 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:10:27,871 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:10:28,014 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:10:28,014 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:10:28,019 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:10:28,020 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:10:28,020 - server - INFO - 🔄 自动保存完成，耗时: 0.183秒
2025-08-05 14:10:38,128 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:10:38,130 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:10:38,130 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:10:38,131 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:10:38,131 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:10:38,132 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:10:38,132 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:10:38,132 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:10:38,132 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:10:38,132 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:10:38,132 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:10:38,132 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:10:38,132 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:10:38,141 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:10:38,143 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:10:38,143 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:10:38,143 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:10:38,143 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:10:38,143 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:10:38,144 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:10:38,144 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:10:38,144 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:10:38,211 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:10:38,211 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:10:38,211 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:10:38,211 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:10:38,211 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:10:38,341 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:10:38,341 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:10:38,347 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:10:38,347 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:10:38,347 - server - INFO - 🔄 自动保存完成，耗时: 0.217秒
2025-08-05 14:10:48,348 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:10:48,350 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:10:48,350 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:10:48,351 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:10:48,351 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:10:48,351 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:10:48,351 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:10:48,352 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:10:48,352 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:10:48,352 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:10:48,352 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:10:48,352 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:10:48,352 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:10:48,355 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:10:48,362 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:10:48,363 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:10:48,363 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:10:48,363 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:10:48,364 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:10:48,364 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:10:48,364 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:10:48,365 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:10:48,402 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:10:48,404 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:10:48,405 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:10:48,406 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:10:48,407 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:10:48,541 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:10:48,541 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:10:48,547 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:10:48,547 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:10:48,547 - server - INFO - 🔄 自动保存完成，耗时: 0.198秒
2025-08-05 14:10:58,551 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:10:58,556 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:10:58,556 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:10:58,557 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:10:58,557 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:10:58,557 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:10:58,557 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:10:58,557 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:10:58,558 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:10:58,558 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:10:58,558 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:10:58,559 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:10:58,559 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:10:58,571 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:10:58,575 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:10:58,576 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:10:58,576 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:10:58,576 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:10:58,578 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:10:58,578 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:10:58,578 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:10:58,578 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:10:58,682 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:10:58,683 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:10:58,683 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:10:58,683 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:10:58,683 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:10:58,901 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:10:58,901 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:10:58,907 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:10:58,907 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:10:58,908 - server - INFO - 🔄 自动保存完成，耗时: 0.352秒
2025-08-05 14:11:08,909 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:11:08,910 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:11:08,911 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:11:08,911 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:11:08,911 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:11:08,911 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:11:08,911 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:11:08,912 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:11:08,912 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:11:08,912 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:11:08,912 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:11:08,912 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:11:08,912 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:11:08,919 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:11:08,920 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:11:08,920 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:11:08,920 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:11:08,920 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:11:08,924 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:11:08,925 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:11:08,925 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:11:08,925 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:11:08,958 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:11:08,958 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:11:08,958 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:11:08,959 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:11:08,959 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:11:09,183 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:11:09,184 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:11:09,194 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:11:09,194 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:11:09,194 - server - INFO - 🔄 自动保存完成，耗时: 0.284秒
2025-08-05 14:11:19,195 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:11:19,196 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:11:19,196 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:11:19,196 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:11:19,196 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:11:19,196 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:11:19,196 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:11:19,196 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:11:19,197 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:11:19,197 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:11:19,197 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:11:19,197 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:11:19,197 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:11:19,198 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:11:19,199 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:11:19,199 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:11:19,199 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:11:19,199 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:11:19,199 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:11:19,199 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:11:19,199 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:11:19,199 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:11:19,220 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:11:19,220 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:11:19,220 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:11:19,221 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:11:19,221 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:11:19,342 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:11:19,342 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:11:19,348 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:11:19,348 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:11:19,348 - server - INFO - 🔄 自动保存完成，耗时: 0.152秒
2025-08-05 14:11:29,349 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:11:29,351 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:11:29,351 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:11:29,351 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:11:29,351 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:11:29,352 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:11:29,352 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:11:29,352 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:11:29,352 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:11:29,352 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:11:29,352 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:11:29,352 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:11:29,352 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:11:29,356 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:11:29,359 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:11:29,359 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:11:29,359 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:11:29,359 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:11:29,360 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:11:29,360 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:11:29,360 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:11:29,360 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:11:29,389 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:11:29,389 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:11:29,390 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:11:29,390 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:11:29,390 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:11:29,629 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:11:29,629 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:11:29,647 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:11:29,647 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:11:29,647 - server - INFO - 🔄 自动保存完成，耗时: 0.296秒
2025-08-05 14:13:02,885 - server - INFO - HTTP API路由已注册
2025-08-05 14:13:02,885 - server - INFO - WebSocket路由已注册
2025-08-05 14:13:02,885 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 14:13:02,885 - server - INFO - 启动服务器: NewLoveLushUserService v1.0.0
2025-08-05 14:13:02,920 - server - INFO - HTTP API路由已注册
2025-08-05 14:13:02,920 - server - INFO - WebSocket路由已注册
2025-08-05 14:13:02,920 - server - INFO - CORS允许的域名: ['https://cupid-yukio-frontend.vercel.app', 'https://cupid-yukio-frontend-test.vercel.app', 'http://localhost:5173', 'http://127.0.0.1:5173']
2025-08-05 14:13:02,921 - server - INFO - 正在连接数据库...
2025-08-05 14:13:02,942 - database - INFO - Connected to MongoDB successfully
2025-08-05 14:13:02,942 - server - INFO - 数据库连接成功
2025-08-05 14:13:02,942 - server - INFO - 🎮 正在初始化抽卡游戏基础数据...
2025-08-05 14:13:02,942 - server - INFO - 🎮 开始初始化性格测试数据（抽卡游戏数据）...
2025-08-05 14:13:02,983 - server - INFO - 🎮 现有题目数量: 16, 现有卡片数量: 8
2025-08-05 14:13:02,983 - server - INFO - 🎮 题目数据完整(16/16)，跳过导入
2025-08-05 14:13:02,983 - server - INFO - 🎮 卡片数据完整(8/8)，跳过导入
2025-08-05 14:13:02,985 - server - INFO - 🎮 最终数据统计 - 题目: 16/16, 卡片: 8/8
2025-08-05 14:13:02,985 - server - INFO - 🎉 性格测试数据初始化完成！抽卡游戏已就绪
2025-08-05 14:13:02,985 - server - INFO - ✅ 抽卡游戏基础数据初始化成功
2025-08-05 14:13:02,985 - server - INFO - 正在初始化UserManagement缓存...
2025-08-05 14:13:02,986 - server - INFO - UserManagement缓存初始化完成
2025-08-05 14:13:02,986 - server - INFO - 正在初始化MatchManager缓存...
2025-08-05 14:13:02,986 - MatchManager - INFO - MatchManager singleton instance created
2025-08-05 14:13:02,986 - MatchManager - INFO - MatchManager construct: Initializing Match counter...
2025-08-05 14:13:02,988 - Match - INFO - No existing matches found, starting counter from 0
2025-08-05 14:13:02,988 - MatchManager - INFO - MatchManager construct: Loading matches from database...
2025-08-05 14:13:02,990 - MatchManager - INFO - MatchManager construct: Found 0 matches in database
2025-08-05 14:13:02,990 - MatchManager - INFO - MatchManager construct: Loaded 0 matches from database
2025-08-05 14:13:02,990 - MatchManager - INFO - MatchManager construct completed successfully
2025-08-05 14:13:02,990 - server - INFO - MatchManager缓存初始化完成
2025-08-05 14:13:02,990 - server - INFO - 正在初始化ChatroomManager缓存...
2025-08-05 14:13:02,990 - ChatroomManager - INFO - ChatroomManager singleton instance created
2025-08-05 14:13:02,990 - ChatroomManager - INFO - ChatroomManager construct: Initializing counters...
2025-08-05 14:13:02,991 - Message - INFO - No existing messages found, starting counter from 0
2025-08-05 14:13:02,992 - Chatroom - INFO - No existing chatrooms found, starting counter from 0
2025-08-05 14:13:02,992 - ChatroomManager - INFO - ChatroomManager construct: Querying chatrooms from database...
2025-08-05 14:13:02,993 - ChatroomManager - INFO - ChatroomManager construct: Found 0 chatrooms in database
2025-08-05 14:13:02,993 - ChatroomManager - INFO - ChatroomManager construct: Loaded 0 chatrooms from database
2025-08-05 14:13:02,993 - ChatroomManager - INFO - ChatroomManager construct: Final chatrooms in memory: []
2025-08-05 14:13:02,993 - server - INFO - ChatroomManager缓存初始化完成 - 加载了 0 个聊天室
2025-08-05 14:13:02,993 - server - INFO - ChatroomManager可用的聊天室ID: []
2025-08-05 14:13:02,993 - server - INFO - ChatroomManager缓存初始化完成
2025-08-05 14:13:02,993 - server - INFO - 正在初始化N8nWebhookManager...
2025-08-05 14:13:02,993 - server - INFO - N8nWebhookManager初始化完成
2025-08-05 14:13:02,993 - server - INFO - 正在初始化AIResponseProcessor...
2025-08-05 14:13:02,998 - AIResponseProcessor - INFO - AI消息计数器从数据库初始化: 从 230 开始
2025-08-05 14:13:02,998 - AIResponseProcessor - INFO - AIResponseProcessor: 开始从数据库加载AI聊天数据到内存
2025-08-05 14:13:03,003 - AIResponseProcessor - INFO - AIResponseProcessor: 成功从数据库加载 20 个AI聊天室，230 条消息到内存
2025-08-05 14:13:03,003 - AIResponseProcessor - INFO - AIResponseProcessor: 当前内存中有 20 个聊天室，230 条消息
2025-08-05 14:13:03,003 - server - INFO - AIResponseProcessor初始化完成
2025-08-05 14:13:03,003 - server - INFO - 正在初始化PersonalityTestManager...
2025-08-05 14:13:03,003 - PersonalityTestManager - INFO - PersonalityTestManager: 开始从数据库加载数据到内存
2025-08-05 14:13:03,005 - PersonalityTestManager - INFO - PersonalityTestManager: 成功加载 16 道题目，8 张卡片，15 个测试会话
2025-08-05 14:13:03,006 - PersonalityTestManager - INFO - PersonalityTestManager: 加载了 7 条用户历史记录
2025-08-05 14:13:03,006 - server - INFO - PersonalityTestManager初始化完成
2025-08-05 14:13:03,006 - server - INFO - 正在启动自动保存后台任务...
2025-08-05 14:13:03,006 - server - INFO - 自动保存后台任务已启动
2025-08-05 14:13:03,006 - server - INFO - 启动自动保存任务，每10秒保存一次所有单例数据到数据库
2025-08-05 14:13:13,024 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:13:13,048 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:13:13,048 - DataIntegrity - INFO - DataIntegrity singleton instance created
2025-08-05 14:13:13,051 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:13:13,052 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:13:13,052 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:13:13,052 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:13:13,067 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:13:13,068 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:13:13,068 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:13:13,069 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:13:13,071 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:13:13,073 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:13:13,076 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:13:13,087 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:13:13,090 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:13:13,091 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:13:13,092 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:13:13,092 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:13:13,094 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:13:13,095 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:13:13,095 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:13:13,095 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:13:13,168 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:13:13,169 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:13:13,169 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:13:13,169 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:13:13,169 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:13:13,349 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:13:13,349 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:13:13,354 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:13:13,355 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:13:13,355 - server - INFO - 🔄 自动保存完成，耗时: 0.306秒
2025-08-05 14:13:23,355 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:13:23,356 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:13:23,356 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:13:23,357 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:13:23,357 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:13:23,357 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:13:23,357 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:13:23,357 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:13:23,357 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:13:23,357 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:13:23,357 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:13:23,357 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:13:23,357 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:13:23,359 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:13:23,360 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:13:23,360 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:13:23,360 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:13:23,360 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:13:23,360 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:13:23,361 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:13:23,361 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:13:23,361 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:13:23,386 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:13:23,387 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:13:23,388 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:13:23,388 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:13:23,389 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:13:23,498 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:13:23,498 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:13:23,504 - PersonalityTestManager - INFO - 性格测试数据保存完成: 15/15 个测试会话
2025-08-05 14:13:23,504 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:13:23,504 - server - INFO - 🔄 自动保存完成，耗时: 0.148秒
2025-08-05 14:13:32,819 - server - INFO - 🔵 [req_1754374412818] ====== 收到新请求 ======
2025-08-05 14:13:32,819 - server - INFO - 🔵 [req_1754374412818] 时间: 2025-08-05 14:13:32
2025-08-05 14:13:32,819 - server - INFO - 🔵 [req_1754374412818] 方法: POST
2025-08-05 14:13:32,819 - server - INFO - 🔵 [req_1754374412818] URL: http://localhost:8000/api/v1/UserManagement/create_new_user
2025-08-05 14:13:32,820 - server - INFO - 🔵 [req_1754374412818] 路径: /api/v1/UserManagement/create_new_user
2025-08-05 14:13:32,820 - server - INFO - 🔵 [req_1754374412818] 客户端IP: 127.0.0.1
2025-08-05 14:13:32,820 - server - INFO - 🔵 [req_1754374412818] ====== 请求前单例状态 ======
2025-08-05 14:13:32,820 - server - INFO - 🔵 [req_1754374412818] UserManagement: user_list(27), male_user_list(12), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:32,820 - server - INFO - 🔵 [req_1754374412818] ====== 请求头 ======
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] host: localhost:8000
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] connection: close
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] content-length: 79
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] content-type: application/json
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] sec-ch-ua-mobile: ?0
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] accept: */*
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] origin: http://localhost:5173
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] sec-fetch-site: same-origin
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] sec-fetch-mode: cors
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] sec-fetch-dest: empty
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] referer: http://localhost:5173/
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:32,821 - server - INFO - 🔵 [req_1754374412818] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:32,822 - server - INFO - 🔵 [req_1754374412818] ====== 请求体 ======
2025-08-05 14:13:32,822 - server - INFO - 🔵 [req_1754374412818] 原始数据: b'{"telegram_user_name":"user_899044909","telegram_user_id":899044909,"gender":2}'
2025-08-05 14:13:32,822 - server - INFO - 🔵 [req_1754374412818] JSON数据: {
  "telegram_user_name": "user_899044909",
  "telegram_user_id": 899044909,
  "gender": 2
}
2025-08-05 14:13:32,838 - server - INFO - 🟢 [req_1754374412818] ====== 响应信息 ======
2025-08-05 14:13:32,839 - server - INFO - 🟢 [req_1754374412818] 状态码: 200
2025-08-05 14:13:32,839 - server - INFO - 🟢 [req_1754374412818] 处理时间: 0.016秒
2025-08-05 14:13:32,839 - server - INFO - 🟢 [req_1754374412818] ====== 响应头 ======
2025-08-05 14:13:32,839 - server - INFO - 🟢 [req_1754374412818] content-length: 36
2025-08-05 14:13:32,839 - server - INFO - 🟢 [req_1754374412818] content-type: application/json
2025-08-05 14:13:32,840 - server - INFO - 🟢 [req_1754374412818] ====== 响应体 ======
2025-08-05 14:13:32,840 - server - INFO - 🟢 [req_1754374412818] JSON响应: {
  "success": true,
  "user_id": 899044909
}
2025-08-05 14:13:32,849 - server - INFO - 🟢 [req_1754374412818] ====== 响应后单例状态 ======
2025-08-05 14:13:32,849 - server - INFO - 🟢 [req_1754374412818] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:32,850 - server - INFO - 🟢 [req_1754374412818] ====== 请求完成 ======
2025-08-05 14:13:32,882 - server - INFO - 🔵 [req_1754374412881] ====== 收到新请求 ======
2025-08-05 14:13:32,882 - server - INFO - 🔵 [req_1754374412881] 时间: 2025-08-05 14:13:32
2025-08-05 14:13:32,883 - server - INFO - 🔵 [req_1754374412881] 方法: POST
2025-08-05 14:13:32,884 - server - INFO - 🔵 [req_1754374412881] URL: http://localhost:8000/api/v1/UserManagement/edit_user_age
2025-08-05 14:13:32,884 - server - INFO - 🔵 [req_1754374412881] 路径: /api/v1/UserManagement/edit_user_age
2025-08-05 14:13:32,884 - server - INFO - 🔵 [req_1754374412881] 客户端IP: 127.0.0.1
2025-08-05 14:13:32,885 - server - INFO - 🔵 [req_1754374412881] ====== 请求前单例状态 ======
2025-08-05 14:13:32,885 - server - INFO - 🔵 [req_1754374412881] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:32,885 - server - INFO - 🔵 [req_1754374412881] ====== 请求头 ======
2025-08-05 14:13:32,885 - server - INFO - 🔵 [req_1754374412881] host: localhost:8000
2025-08-05 14:13:32,885 - server - INFO - 🔵 [req_1754374412881] connection: close
2025-08-05 14:13:32,886 - server - INFO - 🔵 [req_1754374412881] content-length: 33
2025-08-05 14:13:32,886 - server - INFO - 🔵 [req_1754374412881] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:32,886 - server - INFO - 🔵 [req_1754374412881] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:32,886 - server - INFO - 🔵 [req_1754374412881] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:32,889 - server - INFO - 🔵 [req_1754374412881] content-type: application/json
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] sec-ch-ua-mobile: ?0
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] accept: */*
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] origin: http://localhost:5173
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] sec-fetch-site: same-origin
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] sec-fetch-mode: cors
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] sec-fetch-dest: empty
2025-08-05 14:13:32,890 - server - INFO - 🔵 [req_1754374412881] referer: http://localhost:5173/
2025-08-05 14:13:32,891 - server - INFO - 🔵 [req_1754374412881] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:32,891 - server - INFO - 🔵 [req_1754374412881] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:32,891 - server - INFO - 🔵 [req_1754374412881] ====== 请求体 ======
2025-08-05 14:13:32,891 - server - INFO - 🔵 [req_1754374412881] 原始数据: b'{"user_id":899044909,"age":13121}'
2025-08-05 14:13:32,891 - server - INFO - 🔵 [req_1754374412881] JSON数据: {
  "user_id": 899044909,
  "age": 13121
}
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] ====== 响应信息 ======
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] 状态码: 200
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] 处理时间: 0.005秒
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] ====== 响应头 ======
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] content-length: 16
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] content-type: application/json
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] ====== 响应体 ======
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] JSON响应: {
  "success": true
}
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] ====== 响应后单例状态 ======
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:32,896 - server - INFO - 🟢 [req_1754374412881] ====== 请求完成 ======
2025-08-05 14:13:32,901 - server - INFO - 🔵 [req_1754374412901] ====== 收到新请求 ======
2025-08-05 14:13:32,901 - server - INFO - 🔵 [req_1754374412901] 时间: 2025-08-05 14:13:32
2025-08-05 14:13:32,901 - server - INFO - 🔵 [req_1754374412901] 方法: POST
2025-08-05 14:13:32,901 - server - INFO - 🔵 [req_1754374412901] URL: http://localhost:8000/api/v1/CardGame/start
2025-08-05 14:13:32,901 - server - INFO - 🔵 [req_1754374412901] 路径: /api/v1/CardGame/start
2025-08-05 14:13:32,901 - server - INFO - 🔵 [req_1754374412901] 客户端IP: 127.0.0.1
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] ====== 请求前单例状态 ======
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] ====== 请求头 ======
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] host: localhost:8000
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] connection: close
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] content-length: 21
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] content-type: application/json
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] sec-ch-ua-mobile: ?0
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] accept: */*
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] origin: http://localhost:5173
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] sec-fetch-site: same-origin
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] sec-fetch-mode: cors
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] sec-fetch-dest: empty
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] referer: http://localhost:5173/
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] ====== 请求体 ======
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] 原始数据: b'{"user_id":899044909}'
2025-08-05 14:13:32,902 - server - INFO - 🔵 [req_1754374412901] JSON数据: {
  "user_id": 899044909
}
2025-08-05 14:13:32,903 - PersonalityTest - INFO - 开始性格测试请求 - user_id: 899044909
2025-08-05 14:13:32,903 - PersonalityTestManager - INFO - 成功开始新测试 - user_id: 899044909, session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:32,903 - PersonalityTest - INFO - 开始测试成功 - user_id: 899044909, session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:32,904 - server - INFO - 🟢 [req_1754374412901] ====== 响应信息 ======
2025-08-05 14:13:32,904 - server - INFO - 🟢 [req_1754374412901] 状态码: 200
2025-08-05 14:13:32,904 - server - INFO - 🟢 [req_1754374412901] 处理时间: 0.002秒
2025-08-05 14:13:32,905 - server - INFO - 🟢 [req_1754374412901] ====== 响应头 ======
2025-08-05 14:13:32,905 - server - INFO - 🟢 [req_1754374412901] content-length: 545
2025-08-05 14:13:32,906 - server - INFO - 🟢 [req_1754374412901] content-type: application/json
2025-08-05 14:13:32,907 - server - INFO - 🟢 [req_1754374412901] ====== 响应体 ======
2025-08-05 14:13:32,908 - server - INFO - 🟢 [req_1754374412901] JSON响应: {
  "status": "success",
  "data": {
    "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
    "first_question": {
      "question_id": "Q1",
      "question_text": "如果周末一个人待着，你最想做的是？",
      "options": [
        {
          "option": "A",
          "text": "开启一场即兴小旅行"
        },
        {
          "option": "B",
          "text": "实践一个一直想做的点子项目"
        },
        {
          "option": "C",
          "text": "去熟悉的地方静静坐一下午"
        },
        {
          "option": "D",
          "text": "躺在床上听歌，想象不可能的恋爱剧情"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 1,
      "total": 16
    }
  },
  "error": null
}
2025-08-05 14:13:32,909 - server - INFO - 🟢 [req_1754374412901] ====== 响应后单例状态 ======
2025-08-05 14:13:32,909 - server - INFO - 🟢 [req_1754374412901] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:32,909 - server - INFO - 🟢 [req_1754374412901] ====== 请求完成 ======
2025-08-05 14:13:33,505 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:13:33,506 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:13:33,506 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:13:33,506 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:13:33,507 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:13:33,507 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:13:33,507 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:13:33,507 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:13:33,508 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:13:33,508 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:13:33,508 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:13:33,508 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:13:33,508 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:13:33,540 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:13:33,541 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:13:33,541 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:13:33,541 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:13:33,541 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:13:33,542 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:13:33,543 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:13:33,543 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:13:33,543 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:13:33,669 - database - INFO - Inserted document with id: 899044909
2025-08-05 14:13:33,670 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:13:33,670 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:13:33,670 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:13:33,670 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:13:33,670 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:13:33,972 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:13:33,972 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:13:33,991 - database - INFO - Inserted document with id: 6891a10d59a202dbd20958a7
2025-08-05 14:13:33,991 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:13:33,991 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:13:33,991 - server - INFO - 🔄 自动保存完成，耗时: 0.485秒
2025-08-05 14:13:43,992 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:13:43,994 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:13:43,995 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:13:43,995 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:13:43,995 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:13:43,995 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:13:43,995 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:13:43,995 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:13:43,995 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:13:43,996 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:13:43,996 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:13:43,996 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:13:43,996 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:13:43,999 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:13:44,010 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:13:44,010 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:13:44,010 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:13:44,011 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:13:44,012 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:13:44,012 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:13:44,013 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:13:44,013 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:13:44,041 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:13:44,041 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:13:44,041 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:13:44,041 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:13:44,041 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:13:44,564 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:13:44,565 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:13:44,603 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:13:44,603 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:13:44,603 - server - INFO - 🔄 自动保存完成，耗时: 0.609秒
2025-08-05 14:13:49,108 - server - INFO - 🔵 [req_1754374429107] ====== 收到新请求 ======
2025-08-05 14:13:49,110 - server - INFO - 🔵 [req_1754374429107] 时间: 2025-08-05 14:13:49
2025-08-05 14:13:49,111 - server - INFO - 🔵 [req_1754374429107] 方法: POST
2025-08-05 14:13:49,112 - server - INFO - 🔵 [req_1754374429107] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:49,113 - server - INFO - 🔵 [req_1754374429107] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:49,113 - server - INFO - 🔵 [req_1754374429107] 客户端IP: 127.0.0.1
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] ====== 请求前单例状态 ======
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] ====== 请求头 ======
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] host: localhost:8000
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] connection: close
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] content-length: 94
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] content-type: application/json
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] sec-ch-ua-mobile: ?0
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] accept: */*
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] origin: http://localhost:5173
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] sec-fetch-site: same-origin
2025-08-05 14:13:49,114 - server - INFO - 🔵 [req_1754374429107] sec-fetch-mode: cors
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] sec-fetch-dest: empty
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] ====== 请求体 ======
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q1","selected_option":"C"}'
2025-08-05 14:13:49,115 - server - INFO - 🔵 [req_1754374429107] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q1",
  "selected_option": "C"
}
2025-08-05 14:13:49,126 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q1, option: C
2025-08-05 14:13:49,126 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 2/16
2025-08-05 14:13:49,126 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:49,128 - server - INFO - 🟢 [req_1754374429107] ====== 响应信息 ======
2025-08-05 14:13:49,128 - server - INFO - 🟢 [req_1754374429107] 状态码: 200
2025-08-05 14:13:49,128 - server - INFO - 🟢 [req_1754374429107] 处理时间: 0.013秒
2025-08-05 14:13:49,128 - server - INFO - 🟢 [req_1754374429107] ====== 响应头 ======
2025-08-05 14:13:49,128 - server - INFO - 🟢 [req_1754374429107] content-length: 534
2025-08-05 14:13:49,128 - server - INFO - 🟢 [req_1754374429107] content-type: application/json
2025-08-05 14:13:49,129 - server - INFO - 🟢 [req_1754374429107] ====== 响应体 ======
2025-08-05 14:13:49,129 - server - INFO - 🟢 [req_1754374429107] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q2",
      "question_text": "面对新关系，你最自然的状态是？",
      "options": [
        {
          "option": "A",
          "text": "自然而然地交流，不主动也不抗拒"
        },
        {
          "option": "B",
          "text": "一旦确定好感就会主动出击"
        },
        {
          "option": "C",
          "text": "暗暗观察，等自己确认安全再靠近"
        },
        {
          "option": "D",
          "text": "如果对方像阳光一样有吸引力，我会靠近"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 2,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:49,129 - server - INFO - 🟢 [req_1754374429107] ====== 响应后单例状态 ======
2025-08-05 14:13:49,129 - server - INFO - 🟢 [req_1754374429107] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:49,129 - server - INFO - 🟢 [req_1754374429107] ====== 请求完成 ======
2025-08-05 14:13:51,024 - server - INFO - 🔵 [req_1754374431024] ====== 收到新请求 ======
2025-08-05 14:13:51,025 - server - INFO - 🔵 [req_1754374431024] 时间: 2025-08-05 14:13:51
2025-08-05 14:13:51,025 - server - INFO - 🔵 [req_1754374431024] 方法: POST
2025-08-05 14:13:51,026 - server - INFO - 🔵 [req_1754374431024] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:51,026 - server - INFO - 🔵 [req_1754374431024] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:51,026 - server - INFO - 🔵 [req_1754374431024] 客户端IP: 127.0.0.1
2025-08-05 14:13:51,026 - server - INFO - 🔵 [req_1754374431024] ====== 请求前单例状态 ======
2025-08-05 14:13:51,026 - server - INFO - 🔵 [req_1754374431024] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:51,026 - server - INFO - 🔵 [req_1754374431024] ====== 请求头 ======
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] host: localhost:8000
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] connection: close
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] content-length: 94
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] content-type: application/json
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] sec-ch-ua-mobile: ?0
2025-08-05 14:13:51,027 - server - INFO - 🔵 [req_1754374431024] accept: */*
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] origin: http://localhost:5173
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] sec-fetch-site: same-origin
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] sec-fetch-mode: cors
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] sec-fetch-dest: empty
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] ====== 请求体 ======
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q2","selected_option":"D"}'
2025-08-05 14:13:51,028 - server - INFO - 🔵 [req_1754374431024] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q2",
  "selected_option": "D"
}
2025-08-05 14:13:51,029 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q2, option: D
2025-08-05 14:13:51,029 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 3/16
2025-08-05 14:13:51,029 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:51,030 - server - INFO - 🟢 [req_1754374431024] ====== 响应信息 ======
2025-08-05 14:13:51,030 - server - INFO - 🟢 [req_1754374431024] 状态码: 200
2025-08-05 14:13:51,030 - server - INFO - 🟢 [req_1754374431024] 处理时间: 0.002秒
2025-08-05 14:13:51,030 - server - INFO - 🟢 [req_1754374431024] ====== 响应头 ======
2025-08-05 14:13:51,030 - server - INFO - 🟢 [req_1754374431024] content-length: 492
2025-08-05 14:13:51,030 - server - INFO - 🟢 [req_1754374431024] content-type: application/json
2025-08-05 14:13:51,031 - server - INFO - 🟢 [req_1754374431024] ====== 响应体 ======
2025-08-05 14:13:51,031 - server - INFO - 🟢 [req_1754374431024] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q3",
      "question_text": "在你理想的感情中，对方最重要的特质是？",
      "options": [
        {
          "option": "A",
          "text": "能理解我不需要被拯救"
        },
        {
          "option": "B",
          "text": "愿意陪我一起变得更好"
        },
        {
          "option": "C",
          "text": "踏实可靠，稳定长期"
        },
        {
          "option": "D",
          "text": "懂得共情，不需要出口的情结"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 3,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:51,031 - server - INFO - 🟢 [req_1754374431024] ====== 响应后单例状态 ======
2025-08-05 14:13:51,031 - server - INFO - 🟢 [req_1754374431024] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:51,031 - server - INFO - 🟢 [req_1754374431024] ====== 请求完成 ======
2025-08-05 14:13:53,277 - server - INFO - 🔵 [req_1754374433277] ====== 收到新请求 ======
2025-08-05 14:13:53,282 - server - INFO - 🔵 [req_1754374433277] 时间: 2025-08-05 14:13:53
2025-08-05 14:13:53,282 - server - INFO - 🔵 [req_1754374433277] 方法: POST
2025-08-05 14:13:53,283 - server - INFO - 🔵 [req_1754374433277] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:53,283 - server - INFO - 🔵 [req_1754374433277] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:53,283 - server - INFO - 🔵 [req_1754374433277] 客户端IP: 127.0.0.1
2025-08-05 14:13:53,284 - server - INFO - 🔵 [req_1754374433277] ====== 请求前单例状态 ======
2025-08-05 14:13:53,284 - server - INFO - 🔵 [req_1754374433277] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:53,284 - server - INFO - 🔵 [req_1754374433277] ====== 请求头 ======
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] host: localhost:8000
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] connection: close
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] content-length: 94
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] content-type: application/json
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] sec-ch-ua-mobile: ?0
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] accept: */*
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] origin: http://localhost:5173
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] sec-fetch-site: same-origin
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] sec-fetch-mode: cors
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] sec-fetch-dest: empty
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] ====== 请求体 ======
2025-08-05 14:13:53,285 - server - INFO - 🔵 [req_1754374433277] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q3","selected_option":"B"}'
2025-08-05 14:13:53,286 - server - INFO - 🔵 [req_1754374433277] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q3",
  "selected_option": "B"
}
2025-08-05 14:13:53,288 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q3, option: B
2025-08-05 14:13:53,289 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 4/16
2025-08-05 14:13:53,289 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:53,293 - server - INFO - 🟢 [req_1754374433277] ====== 响应信息 ======
2025-08-05 14:13:53,293 - server - INFO - 🟢 [req_1754374433277] 状态码: 200
2025-08-05 14:13:53,293 - server - INFO - 🟢 [req_1754374433277] 处理时间: 0.007秒
2025-08-05 14:13:53,293 - server - INFO - 🟢 [req_1754374433277] ====== 响应头 ======
2025-08-05 14:13:53,293 - server - INFO - 🟢 [req_1754374433277] content-length: 510
2025-08-05 14:13:53,293 - server - INFO - 🟢 [req_1754374433277] content-type: application/json
2025-08-05 14:13:53,296 - server - INFO - 🟢 [req_1754374433277] ====== 响应体 ======
2025-08-05 14:13:53,296 - server - INFO - 🟢 [req_1754374433277] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q4",
      "question_text": "你面对陌生社交场合时，最常见的反应是？",
      "options": [
        {
          "option": "A",
          "text": "带着礼貌微笑，但保持一定距离"
        },
        {
          "option": "B",
          "text": "主动寒暄，迅速破冰"
        },
        {
          "option": "C",
          "text": "选择角落，静静观察人群"
        },
        {
          "option": "D",
          "text": "观察细节，寻找有深度的人交流"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 4,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:53,296 - server - INFO - 🟢 [req_1754374433277] ====== 响应后单例状态 ======
2025-08-05 14:13:53,296 - server - INFO - 🟢 [req_1754374433277] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:53,296 - server - INFO - 🟢 [req_1754374433277] ====== 请求完成 ======
2025-08-05 14:13:54,610 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:13:54,613 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:13:54,613 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:13:54,613 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:13:54,614 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:13:54,614 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:13:54,614 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:13:54,614 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:13:54,614 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:13:54,614 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:13:54,614 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:13:54,614 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:13:54,614 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:13:54,619 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:13:54,623 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:13:54,623 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:13:54,623 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:13:54,624 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:13:54,625 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:13:54,625 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:13:54,625 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:13:54,625 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:13:54,651 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:13:54,651 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:13:54,651 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:13:54,651 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:13:54,651 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:13:54,998 - server - INFO - 🔵 [req_1754374434998] ====== 收到新请求 ======
2025-08-05 14:13:54,999 - server - INFO - 🔵 [req_1754374434998] 时间: 2025-08-05 14:13:54
2025-08-05 14:13:54,999 - server - INFO - 🔵 [req_1754374434998] 方法: POST
2025-08-05 14:13:54,999 - server - INFO - 🔵 [req_1754374434998] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:54,999 - server - INFO - 🔵 [req_1754374434998] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:55,000 - server - INFO - 🔵 [req_1754374434998] 客户端IP: 127.0.0.1
2025-08-05 14:13:55,000 - server - INFO - 🔵 [req_1754374434998] ====== 请求前单例状态 ======
2025-08-05 14:13:55,000 - server - INFO - 🔵 [req_1754374434998] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:55,000 - server - INFO - 🔵 [req_1754374434998] ====== 请求头 ======
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] host: localhost:8000
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] connection: close
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] content-length: 94
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] content-type: application/json
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] sec-ch-ua-mobile: ?0
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] accept: */*
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] origin: http://localhost:5173
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] sec-fetch-site: same-origin
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] sec-fetch-mode: cors
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] sec-fetch-dest: empty
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:55,001 - server - INFO - 🔵 [req_1754374434998] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:55,002 - server - INFO - 🔵 [req_1754374434998] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:55,002 - server - INFO - 🔵 [req_1754374434998] ====== 请求体 ======
2025-08-05 14:13:55,002 - server - INFO - 🔵 [req_1754374434998] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q4","selected_option":"A"}'
2025-08-05 14:13:55,002 - server - INFO - 🔵 [req_1754374434998] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q4",
  "selected_option": "A"
}
2025-08-05 14:13:55,011 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q4, option: A
2025-08-05 14:13:55,011 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 5/16
2025-08-05 14:13:55,011 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] ====== 响应信息 ======
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] 状态码: 200
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] 处理时间: 0.010秒
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] ====== 响应头 ======
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] content-length: 552
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] content-type: application/json
2025-08-05 14:13:55,012 - server - INFO - 🟢 [req_1754374434998] ====== 响应体 ======
2025-08-05 14:13:55,013 - server - INFO - 🟢 [req_1754374434998] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q5",
      "question_text": "如果你送喜欢的人一份礼物，你更可能选：",
      "options": [
        {
          "option": "A",
          "text": "一起共同回忆的记录，比如手写信或拼图"
        },
        {
          "option": "B",
          "text": "一个她旅行中提过却没买的纪念品"
        },
        {
          "option": "C",
          "text": "一张照片，画面是很久下的绘景"
        },
        {
          "option": "D",
          "text": "一把保温壶或护手霜，实用又贴心"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 5,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:55,013 - server - INFO - 🟢 [req_1754374434998] ====== 响应后单例状态 ======
2025-08-05 14:13:55,013 - server - INFO - 🟢 [req_1754374434998] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:55,013 - server - INFO - 🟢 [req_1754374434998] ====== 请求完成 ======
2025-08-05 14:13:55,043 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:13:55,043 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:13:55,056 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:13:55,056 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:13:55,056 - server - INFO - 🔄 自动保存完成，耗时: 0.443秒
2025-08-05 14:13:57,015 - server - INFO - 🔵 [req_1754374437015] ====== 收到新请求 ======
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] 时间: 2025-08-05 14:13:57
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] 方法: POST
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] 客户端IP: 127.0.0.1
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] ====== 请求前单例状态 ======
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] ====== 请求头 ======
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] host: localhost:8000
2025-08-05 14:13:57,016 - server - INFO - 🔵 [req_1754374437015] connection: close
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] content-length: 94
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] content-type: application/json
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] sec-ch-ua-mobile: ?0
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] accept: */*
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] origin: http://localhost:5173
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] sec-fetch-site: same-origin
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] sec-fetch-mode: cors
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] sec-fetch-dest: empty
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] ====== 请求体 ======
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q5","selected_option":"B"}'
2025-08-05 14:13:57,017 - server - INFO - 🔵 [req_1754374437015] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q5",
  "selected_option": "B"
}
2025-08-05 14:13:57,019 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q5, option: B
2025-08-05 14:13:57,019 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 6/16
2025-08-05 14:13:57,019 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] ====== 响应信息 ======
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] 状态码: 200
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] 处理时间: 0.002秒
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] ====== 响应头 ======
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] content-length: 498
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] content-type: application/json
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] ====== 响应体 ======
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q6",
      "question_text": "爱情对你来说，更像什么？",
      "options": [
        {
          "option": "A",
          "text": "一场自由灵魂之间的同步舞蹈"
        },
        {
          "option": "B",
          "text": "彼此照亮和扶持的成长旅程"
        },
        {
          "option": "C",
          "text": "安全、稳定、温暖的家园"
        },
        {
          "option": "D",
          "text": "静静陪伴的老友关系，不用太多话"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 6,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] ====== 响应后单例状态 ======
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:57,019 - server - INFO - 🟢 [req_1754374437015] ====== 请求完成 ======
2025-08-05 14:13:58,459 - server - INFO - 🔵 [req_1754374438459] ====== 收到新请求 ======
2025-08-05 14:13:58,460 - server - INFO - 🔵 [req_1754374438459] 时间: 2025-08-05 14:13:58
2025-08-05 14:13:58,460 - server - INFO - 🔵 [req_1754374438459] 方法: POST
2025-08-05 14:13:58,460 - server - INFO - 🔵 [req_1754374438459] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:58,460 - server - INFO - 🔵 [req_1754374438459] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] 客户端IP: 127.0.0.1
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] ====== 请求前单例状态 ======
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] ====== 请求头 ======
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] host: localhost:8000
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] connection: close
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] content-length: 94
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:58,461 - server - INFO - 🔵 [req_1754374438459] content-type: application/json
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] sec-ch-ua-mobile: ?0
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] accept: */*
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] origin: http://localhost:5173
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] sec-fetch-site: same-origin
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] sec-fetch-mode: cors
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] sec-fetch-dest: empty
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] ====== 请求体 ======
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q6","selected_option":"C"}'
2025-08-05 14:13:58,462 - server - INFO - 🔵 [req_1754374438459] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q6",
  "selected_option": "C"
}
2025-08-05 14:13:58,463 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q6, option: C
2025-08-05 14:13:58,463 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 7/16
2025-08-05 14:13:58,463 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:58,463 - server - INFO - 🟢 [req_1754374438459] ====== 响应信息 ======
2025-08-05 14:13:58,463 - server - INFO - 🟢 [req_1754374438459] 状态码: 200
2025-08-05 14:13:58,463 - server - INFO - 🟢 [req_1754374438459] 处理时间: 0.001秒
2025-08-05 14:13:58,463 - server - INFO - 🟢 [req_1754374438459] ====== 响应头 ======
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] content-length: 504
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] content-type: application/json
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] ====== 响应体 ======
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q7",
      "question_text": "你眼中的爱情信念是：",
      "options": [
        {
          "option": "A",
          "text": "我们彼此点燃，不互相消耗"
        },
        {
          "option": "B",
          "text": "彼此能一起创造浪漫，哪怕有点不现实"
        },
        {
          "option": "C",
          "text": "最动人的感情藏在日常细节里"
        },
        {
          "option": "D",
          "text": "爱是要先学会与自己和平共处"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 7,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] ====== 响应后单例状态 ======
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:58,464 - server - INFO - 🟢 [req_1754374438459] ====== 请求完成 ======
2025-08-05 14:13:59,792 - server - INFO - 🔵 [req_1754374439792] ====== 收到新请求 ======
2025-08-05 14:13:59,792 - server - INFO - 🔵 [req_1754374439792] 时间: 2025-08-05 14:13:59
2025-08-05 14:13:59,792 - server - INFO - 🔵 [req_1754374439792] 方法: POST
2025-08-05 14:13:59,792 - server - INFO - 🔵 [req_1754374439792] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:13:59,793 - server - INFO - 🔵 [req_1754374439792] 路径: /api/v1/CardGame/answer
2025-08-05 14:13:59,793 - server - INFO - 🔵 [req_1754374439792] 客户端IP: 127.0.0.1
2025-08-05 14:13:59,793 - server - INFO - 🔵 [req_1754374439792] ====== 请求前单例状态 ======
2025-08-05 14:13:59,793 - server - INFO - 🔵 [req_1754374439792] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:59,793 - server - INFO - 🔵 [req_1754374439792] ====== 请求头 ======
2025-08-05 14:13:59,793 - server - INFO - 🔵 [req_1754374439792] host: localhost:8000
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] connection: close
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] content-length: 94
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] sec-ch-ua-platform: "macOS"
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] content-type: application/json
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] sec-ch-ua-mobile: ?0
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] accept: */*
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] origin: http://localhost:5173
2025-08-05 14:13:59,794 - server - INFO - 🔵 [req_1754374439792] sec-fetch-site: same-origin
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] sec-fetch-mode: cors
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] sec-fetch-dest: empty
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] referer: http://localhost:5173/card-game-test
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] ====== 请求体 ======
2025-08-05 14:13:59,795 - server - INFO - 🔵 [req_1754374439792] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q7","selected_option":"D"}'
2025-08-05 14:13:59,796 - server - INFO - 🔵 [req_1754374439792] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q7",
  "selected_option": "D"
}
2025-08-05 14:13:59,797 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q7, option: D
2025-08-05 14:13:59,797 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 8/16
2025-08-05 14:13:59,797 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:13:59,798 - server - INFO - 🟢 [req_1754374439792] ====== 响应信息 ======
2025-08-05 14:13:59,798 - server - INFO - 🟢 [req_1754374439792] 状态码: 200
2025-08-05 14:13:59,798 - server - INFO - 🟢 [req_1754374439792] 处理时间: 0.002秒
2025-08-05 14:13:59,798 - server - INFO - 🟢 [req_1754374439792] ====== 响应头 ======
2025-08-05 14:13:59,798 - server - INFO - 🟢 [req_1754374439792] content-length: 504
2025-08-05 14:13:59,799 - server - INFO - 🟢 [req_1754374439792] content-type: application/json
2025-08-05 14:13:59,799 - server - INFO - 🟢 [req_1754374439792] ====== 响应体 ======
2025-08-05 14:13:59,799 - server - INFO - 🟢 [req_1754374439792] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q8",
      "question_text": "你面对情绪冲突时，通常会？",
      "options": [
        {
          "option": "A",
          "text": "主动沟通，不希望误会留太久"
        },
        {
          "option": "B",
          "text": "暂时独处，等自己冷静"
        },
        {
          "option": "C",
          "text": "一口沉默，但会用文字或行动表达"
        },
        {
          "option": "D",
          "text": "理性分析，摸索情绪背后的原因"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 8,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:13:59,799 - server - INFO - 🟢 [req_1754374439792] ====== 响应后单例状态 ======
2025-08-05 14:13:59,799 - server - INFO - 🟢 [req_1754374439792] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:13:59,799 - server - INFO - 🟢 [req_1754374439792] ====== 请求完成 ======
2025-08-05 14:14:01,108 - server - INFO - 🔵 [req_1754374441108] ====== 收到新请求 ======
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] 时间: 2025-08-05 14:14:01
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] 方法: POST
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] 客户端IP: 127.0.0.1
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] ====== 请求前单例状态 ======
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] ====== 请求头 ======
2025-08-05 14:14:01,109 - server - INFO - 🔵 [req_1754374441108] host: localhost:8000
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] connection: close
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] content-length: 94
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] content-type: application/json
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] sec-ch-ua-mobile: ?0
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] accept: */*
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] origin: http://localhost:5173
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] sec-fetch-site: same-origin
2025-08-05 14:14:01,110 - server - INFO - 🔵 [req_1754374441108] sec-fetch-mode: cors
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] sec-fetch-dest: empty
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] ====== 请求体 ======
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q8","selected_option":"B"}'
2025-08-05 14:14:01,111 - server - INFO - 🔵 [req_1754374441108] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q8",
  "selected_option": "B"
}
2025-08-05 14:14:01,112 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q8, option: B
2025-08-05 14:14:01,113 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 9/16
2025-08-05 14:14:01,113 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:01,113 - server - INFO - 🟢 [req_1754374441108] ====== 响应信息 ======
2025-08-05 14:14:01,114 - server - INFO - 🟢 [req_1754374441108] 状态码: 200
2025-08-05 14:14:01,114 - server - INFO - 🟢 [req_1754374441108] 处理时间: 0.002秒
2025-08-05 14:14:01,114 - server - INFO - 🟢 [req_1754374441108] ====== 响应头 ======
2025-08-05 14:14:01,114 - server - INFO - 🟢 [req_1754374441108] content-length: 456
2025-08-05 14:14:01,114 - server - INFO - 🟢 [req_1754374441108] content-type: application/json
2025-08-05 14:14:01,114 - server - INFO - 🟢 [req_1754374441108] ====== 响应体 ======
2025-08-05 14:14:01,115 - server - INFO - 🟢 [req_1754374441108] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q9",
      "question_text": "以下哪个描述最接近你？",
      "options": [
        {
          "option": "A",
          "text": "思维跳跃，喜欢新奇"
        },
        {
          "option": "B",
          "text": "热血积极，有点容易着急"
        },
        {
          "option": "C",
          "text": "情绪细腻，有些慢热"
        },
        {
          "option": "D",
          "text": "梦想丰富，常常发呆"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 9,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:01,115 - server - INFO - 🟢 [req_1754374441108] ====== 响应后单例状态 ======
2025-08-05 14:14:01,115 - server - INFO - 🟢 [req_1754374441108] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:01,115 - server - INFO - 🟢 [req_1754374441108] ====== 请求完成 ======
2025-08-05 14:14:02,531 - server - INFO - 🔵 [req_1754374442531] ====== 收到新请求 ======
2025-08-05 14:14:02,531 - server - INFO - 🔵 [req_1754374442531] 时间: 2025-08-05 14:14:02
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] 方法: POST
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] 客户端IP: 127.0.0.1
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] ====== 请求前单例状态 ======
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:02,532 - server - INFO - 🔵 [req_1754374442531] ====== 请求头 ======
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] host: localhost:8000
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] connection: close
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] content-length: 94
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] content-type: application/json
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] sec-ch-ua-mobile: ?0
2025-08-05 14:14:02,533 - server - INFO - 🔵 [req_1754374442531] accept: */*
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] origin: http://localhost:5173
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] sec-fetch-site: same-origin
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] sec-fetch-mode: cors
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] sec-fetch-dest: empty
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] ====== 请求体 ======
2025-08-05 14:14:02,534 - server - INFO - 🔵 [req_1754374442531] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q9","selected_option":"A"}'
2025-08-05 14:14:02,535 - server - INFO - 🔵 [req_1754374442531] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q9",
  "selected_option": "A"
}
2025-08-05 14:14:02,536 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q9, option: A
2025-08-05 14:14:02,536 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 10/16
2025-08-05 14:14:02,536 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:02,537 - server - INFO - 🟢 [req_1754374442531] ====== 响应信息 ======
2025-08-05 14:14:02,538 - server - INFO - 🟢 [req_1754374442531] 状态码: 200
2025-08-05 14:14:02,538 - server - INFO - 🟢 [req_1754374442531] 处理时间: 0.002秒
2025-08-05 14:14:02,539 - server - INFO - 🟢 [req_1754374442531] ====== 响应头 ======
2025-08-05 14:14:02,539 - server - INFO - 🟢 [req_1754374442531] content-length: 491
2025-08-05 14:14:02,539 - server - INFO - 🟢 [req_1754374442531] content-type: application/json
2025-08-05 14:14:02,539 - server - INFO - 🟢 [req_1754374442531] ====== 响应体 ======
2025-08-05 14:14:02,539 - server - INFO - 🟢 [req_1754374442531] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q10",
      "question_text": "你与人互动中，最在意的是什么？",
      "options": [
        {
          "option": "A",
          "text": "能不能一起做很多有趣的事"
        },
        {
          "option": "B",
          "text": "对方是否真诚，直接"
        },
        {
          "option": "C",
          "text": "安不安全，值不值得信任"
        },
        {
          "option": "D",
          "text": "对方能不能引发你内心的话题"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 10,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:02,539 - server - INFO - 🟢 [req_1754374442531] ====== 响应后单例状态 ======
2025-08-05 14:14:02,540 - server - INFO - 🟢 [req_1754374442531] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:02,540 - server - INFO - 🟢 [req_1754374442531] ====== 请求完成 ======
2025-08-05 14:14:03,595 - server - INFO - 🔵 [req_1754374443595] ====== 收到新请求 ======
2025-08-05 14:14:03,596 - server - INFO - 🔵 [req_1754374443595] 时间: 2025-08-05 14:14:03
2025-08-05 14:14:03,596 - server - INFO - 🔵 [req_1754374443595] 方法: POST
2025-08-05 14:14:03,596 - server - INFO - 🔵 [req_1754374443595] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:03,596 - server - INFO - 🔵 [req_1754374443595] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:03,596 - server - INFO - 🔵 [req_1754374443595] 客户端IP: 127.0.0.1
2025-08-05 14:14:03,597 - server - INFO - 🔵 [req_1754374443595] ====== 请求前单例状态 ======
2025-08-05 14:14:03,597 - server - INFO - 🔵 [req_1754374443595] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:03,598 - server - INFO - 🔵 [req_1754374443595] ====== 请求头 ======
2025-08-05 14:14:03,599 - server - INFO - 🔵 [req_1754374443595] host: localhost:8000
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] connection: close
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] content-length: 95
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] content-type: application/json
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] sec-ch-ua-mobile: ?0
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] accept: */*
2025-08-05 14:14:03,600 - server - INFO - 🔵 [req_1754374443595] origin: http://localhost:5173
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] sec-fetch-site: same-origin
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] sec-fetch-mode: cors
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] sec-fetch-dest: empty
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] ====== 请求体 ======
2025-08-05 14:14:03,601 - server - INFO - 🔵 [req_1754374443595] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q10","selected_option":"D"}'
2025-08-05 14:14:03,602 - server - INFO - 🔵 [req_1754374443595] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q10",
  "selected_option": "D"
}
2025-08-05 14:14:03,603 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q10, option: D
2025-08-05 14:14:03,603 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 11/16
2025-08-05 14:14:03,603 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:03,603 - server - INFO - 🟢 [req_1754374443595] ====== 响应信息 ======
2025-08-05 14:14:03,603 - server - INFO - 🟢 [req_1754374443595] 状态码: 200
2025-08-05 14:14:03,603 - server - INFO - 🟢 [req_1754374443595] 处理时间: 0.001秒
2025-08-05 14:14:03,603 - server - INFO - 🟢 [req_1754374443595] ====== 响应头 ======
2025-08-05 14:14:03,603 - server - INFO - 🟢 [req_1754374443595] content-length: 458
2025-08-05 14:14:03,603 - server - INFO - 🟢 [req_1754374443595] content-type: application/json
2025-08-05 14:14:03,604 - server - INFO - 🟢 [req_1754374443595] ====== 响应体 ======
2025-08-05 14:14:03,604 - server - INFO - 🟢 [req_1754374443595] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q11",
      "question_text": "你更喜欢哪种生活方式？",
      "options": [
        {
          "option": "A",
          "text": "每天有计划，有节奏"
        },
        {
          "option": "B",
          "text": "边走边看，不被框住"
        },
        {
          "option": "C",
          "text": "清晨阳光，晚上自我反思"
        },
        {
          "option": "D",
          "text": "自然社交，晚上独处"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 11,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:03,604 - server - INFO - 🟢 [req_1754374443595] ====== 响应后单例状态 ======
2025-08-05 14:14:03,604 - server - INFO - 🟢 [req_1754374443595] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:03,604 - server - INFO - 🟢 [req_1754374443595] ====== 请求完成 ======
2025-08-05 14:14:04,844 - server - INFO - 🔵 [req_1754374444844] ====== 收到新请求 ======
2025-08-05 14:14:04,844 - server - INFO - 🔵 [req_1754374444844] 时间: 2025-08-05 14:14:04
2025-08-05 14:14:04,844 - server - INFO - 🔵 [req_1754374444844] 方法: POST
2025-08-05 14:14:04,844 - server - INFO - 🔵 [req_1754374444844] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:04,844 - server - INFO - 🔵 [req_1754374444844] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:04,844 - server - INFO - 🔵 [req_1754374444844] 客户端IP: 127.0.0.1
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] ====== 请求前单例状态 ======
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] ====== 请求头 ======
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] host: localhost:8000
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] connection: close
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] content-length: 95
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:04,845 - server - INFO - 🔵 [req_1754374444844] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] content-type: application/json
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] sec-ch-ua-mobile: ?0
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] accept: */*
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] origin: http://localhost:5173
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] sec-fetch-site: same-origin
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] sec-fetch-mode: cors
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] sec-fetch-dest: empty
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:04,846 - server - INFO - 🔵 [req_1754374444844] ====== 请求体 ======
2025-08-05 14:14:04,847 - server - INFO - 🔵 [req_1754374444844] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q11","selected_option":"C"}'
2025-08-05 14:14:04,847 - server - INFO - 🔵 [req_1754374444844] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q11",
  "selected_option": "C"
}
2025-08-05 14:14:04,848 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q11, option: C
2025-08-05 14:14:04,848 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 12/16
2025-08-05 14:14:04,848 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:04,849 - server - INFO - 🟢 [req_1754374444844] ====== 响应信息 ======
2025-08-05 14:14:04,849 - server - INFO - 🟢 [req_1754374444844] 状态码: 200
2025-08-05 14:14:04,849 - server - INFO - 🟢 [req_1754374444844] 处理时间: 0.002秒
2025-08-05 14:14:04,849 - server - INFO - 🟢 [req_1754374444844] ====== 响应头 ======
2025-08-05 14:14:04,849 - server - INFO - 🟢 [req_1754374444844] content-length: 470
2025-08-05 14:14:04,849 - server - INFO - 🟢 [req_1754374444844] content-type: application/json
2025-08-05 14:14:04,850 - server - INFO - 🟢 [req_1754374444844] ====== 响应体 ======
2025-08-05 14:14:04,850 - server - INFO - 🟢 [req_1754374444844] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q12",
      "question_text": "如果你写一本关于自己的书，更倾像？",
      "options": [
        {
          "option": "A",
          "text": "一本旅行日记，风景是主角"
        },
        {
          "option": "B",
          "text": "一本热血成长故事"
        },
        {
          "option": "C",
          "text": "一本散文诗集"
        },
        {
          "option": "D",
          "text": "一本慢慢读懂的心事集"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 12,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:04,850 - server - INFO - 🟢 [req_1754374444844] ====== 响应后单例状态 ======
2025-08-05 14:14:04,850 - server - INFO - 🟢 [req_1754374444844] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:04,850 - server - INFO - 🟢 [req_1754374444844] ====== 请求完成 ======
2025-08-05 14:14:05,057 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:14:05,058 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:14:05,058 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:14:05,058 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:14:05,058 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:14:05,058 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:14:05,058 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:14:05,058 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:14:05,058 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:14:05,058 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:14:05,058 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:14:05,058 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:14:05,058 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:14:05,060 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:14:05,062 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:14:05,062 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:14:05,062 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:14:05,062 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:14:05,063 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:14:05,063 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:14:05,063 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:14:05,063 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:14:05,082 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:14:05,082 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:14:05,082 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:14:05,083 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:14:05,083 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:14:05,202 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:14:05,202 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:14:05,209 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:14:05,209 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:14:05,209 - server - INFO - 🔄 自动保存完成，耗时: 0.152秒
2025-08-05 14:14:06,242 - server - INFO - 🔵 [req_1754374446242] ====== 收到新请求 ======
2025-08-05 14:14:06,243 - server - INFO - 🔵 [req_1754374446242] 时间: 2025-08-05 14:14:06
2025-08-05 14:14:06,243 - server - INFO - 🔵 [req_1754374446242] 方法: POST
2025-08-05 14:14:06,243 - server - INFO - 🔵 [req_1754374446242] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:06,244 - server - INFO - 🔵 [req_1754374446242] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:06,244 - server - INFO - 🔵 [req_1754374446242] 客户端IP: 127.0.0.1
2025-08-05 14:14:06,244 - server - INFO - 🔵 [req_1754374446242] ====== 请求前单例状态 ======
2025-08-05 14:14:06,244 - server - INFO - 🔵 [req_1754374446242] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:06,244 - server - INFO - 🔵 [req_1754374446242] ====== 请求头 ======
2025-08-05 14:14:06,244 - server - INFO - 🔵 [req_1754374446242] host: localhost:8000
2025-08-05 14:14:06,245 - server - INFO - 🔵 [req_1754374446242] connection: close
2025-08-05 14:14:06,245 - server - INFO - 🔵 [req_1754374446242] content-length: 95
2025-08-05 14:14:06,245 - server - INFO - 🔵 [req_1754374446242] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:06,245 - server - INFO - 🔵 [req_1754374446242] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:06,245 - server - INFO - 🔵 [req_1754374446242] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] content-type: application/json
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] sec-ch-ua-mobile: ?0
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] accept: */*
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] origin: http://localhost:5173
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] sec-fetch-site: same-origin
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] sec-fetch-mode: cors
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] sec-fetch-dest: empty
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:06,246 - server - INFO - 🔵 [req_1754374446242] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:06,247 - server - INFO - 🔵 [req_1754374446242] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:06,247 - server - INFO - 🔵 [req_1754374446242] ====== 请求体 ======
2025-08-05 14:14:06,247 - server - INFO - 🔵 [req_1754374446242] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q12","selected_option":"B"}'
2025-08-05 14:14:06,247 - server - INFO - 🔵 [req_1754374446242] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q12",
  "selected_option": "B"
}
2025-08-05 14:14:06,250 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q12, option: B
2025-08-05 14:14:06,250 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 13/16
2025-08-05 14:14:06,250 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:06,251 - server - INFO - 🟢 [req_1754374446242] ====== 响应信息 ======
2025-08-05 14:14:06,251 - server - INFO - 🟢 [req_1754374446242] 状态码: 200
2025-08-05 14:14:06,251 - server - INFO - 🟢 [req_1754374446242] 处理时间: 0.004秒
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] ====== 响应头 ======
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] content-length: 464
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] content-type: application/json
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] ====== 响应体 ======
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q13",
      "question_text": "你在恋爱中最害怕什么？",
      "options": [
        {
          "option": "A",
          "text": "被控制，失去空间"
        },
        {
          "option": "B",
          "text": "对方冷漠或被彻底回应"
        },
        {
          "option": "C",
          "text": "太快的热情后迅速流远"
        },
        {
          "option": "D",
          "text": "对方无法理解你的情绪语言"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 13,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] ====== 响应后单例状态 ======
2025-08-05 14:14:06,252 - server - INFO - 🟢 [req_1754374446242] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:06,253 - server - INFO - 🟢 [req_1754374446242] ====== 请求完成 ======
2025-08-05 14:14:07,441 - server - INFO - 🔵 [req_1754374447441] ====== 收到新请求 ======
2025-08-05 14:14:07,441 - server - INFO - 🔵 [req_1754374447441] 时间: 2025-08-05 14:14:07
2025-08-05 14:14:07,441 - server - INFO - 🔵 [req_1754374447441] 方法: POST
2025-08-05 14:14:07,441 - server - INFO - 🔵 [req_1754374447441] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:07,441 - server - INFO - 🔵 [req_1754374447441] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] 客户端IP: 127.0.0.1
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] ====== 请求前单例状态 ======
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] ====== 请求头 ======
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] host: localhost:8000
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] connection: close
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] content-length: 95
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:07,442 - server - INFO - 🔵 [req_1754374447441] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] content-type: application/json
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] sec-ch-ua-mobile: ?0
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] accept: */*
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] origin: http://localhost:5173
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] sec-fetch-site: same-origin
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] sec-fetch-mode: cors
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] sec-fetch-dest: empty
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:07,443 - server - INFO - 🔵 [req_1754374447441] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:07,444 - server - INFO - 🔵 [req_1754374447441] ====== 请求体 ======
2025-08-05 14:14:07,444 - server - INFO - 🔵 [req_1754374447441] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q13","selected_option":"C"}'
2025-08-05 14:14:07,444 - server - INFO - 🔵 [req_1754374447441] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q13",
  "selected_option": "C"
}
2025-08-05 14:14:07,445 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q13, option: C
2025-08-05 14:14:07,445 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 14/16
2025-08-05 14:14:07,446 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:07,446 - server - INFO - 🟢 [req_1754374447441] ====== 响应信息 ======
2025-08-05 14:14:07,447 - server - INFO - 🟢 [req_1754374447441] 状态码: 200
2025-08-05 14:14:07,447 - server - INFO - 🟢 [req_1754374447441] 处理时间: 0.002秒
2025-08-05 14:14:07,447 - server - INFO - 🟢 [req_1754374447441] ====== 响应头 ======
2025-08-05 14:14:07,447 - server - INFO - 🟢 [req_1754374447441] content-length: 479
2025-08-05 14:14:07,447 - server - INFO - 🟢 [req_1754374447441] content-type: application/json
2025-08-05 14:14:07,448 - server - INFO - 🟢 [req_1754374447441] ====== 响应体 ======
2025-08-05 14:14:07,449 - server - INFO - 🟢 [req_1754374447441] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q14",
      "question_text": "如果生活变得一成不变，你会？",
      "options": [
        {
          "option": "A",
          "text": "制造变化，主动突破"
        },
        {
          "option": "B",
          "text": "暂时接受，寻找内部成长"
        },
        {
          "option": "C",
          "text": "逃到别的地方换个节奏"
        },
        {
          "option": "D",
          "text": "用创想和创作丰富内部现实"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 14,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:07,449 - server - INFO - 🟢 [req_1754374447441] ====== 响应后单例状态 ======
2025-08-05 14:14:07,449 - server - INFO - 🟢 [req_1754374447441] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:07,449 - server - INFO - 🟢 [req_1754374447441] ====== 请求完成 ======
2025-08-05 14:14:09,499 - server - INFO - 🔵 [req_1754374449499] ====== 收到新请求 ======
2025-08-05 14:14:09,499 - server - INFO - 🔵 [req_1754374449499] 时间: 2025-08-05 14:14:09
2025-08-05 14:14:09,499 - server - INFO - 🔵 [req_1754374449499] 方法: POST
2025-08-05 14:14:09,499 - server - INFO - 🔵 [req_1754374449499] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] 客户端IP: 127.0.0.1
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] ====== 请求前单例状态 ======
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] ====== 请求头 ======
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] host: localhost:8000
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] connection: close
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] content-length: 95
2025-08-05 14:14:09,500 - server - INFO - 🔵 [req_1754374449499] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] content-type: application/json
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] sec-ch-ua-mobile: ?0
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] accept: */*
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] origin: http://localhost:5173
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] sec-fetch-site: same-origin
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] sec-fetch-mode: cors
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] sec-fetch-dest: empty
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:09,501 - server - INFO - 🔵 [req_1754374449499] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:09,502 - server - INFO - 🔵 [req_1754374449499] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:09,502 - server - INFO - 🔵 [req_1754374449499] ====== 请求体 ======
2025-08-05 14:14:09,502 - server - INFO - 🔵 [req_1754374449499] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q14","selected_option":"D"}'
2025-08-05 14:14:09,502 - server - INFO - 🔵 [req_1754374449499] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q14",
  "selected_option": "D"
}
2025-08-05 14:14:09,503 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q14, option: D
2025-08-05 14:14:09,503 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 15/16
2025-08-05 14:14:09,504 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:09,504 - server - INFO - 🟢 [req_1754374449499] ====== 响应信息 ======
2025-08-05 14:14:09,505 - server - INFO - 🟢 [req_1754374449499] 状态码: 200
2025-08-05 14:14:09,505 - server - INFO - 🟢 [req_1754374449499] 处理时间: 0.002秒
2025-08-05 14:14:09,505 - server - INFO - 🟢 [req_1754374449499] ====== 响应头 ======
2025-08-05 14:14:09,505 - server - INFO - 🟢 [req_1754374449499] content-length: 455
2025-08-05 14:14:09,505 - server - INFO - 🟢 [req_1754374449499] content-type: application/json
2025-08-05 14:14:09,506 - server - INFO - 🟢 [req_1754374449499] ====== 响应体 ======
2025-08-05 14:14:09,506 - server - INFO - 🟢 [req_1754374449499] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q15",
      "question_text": "你如何描述你自己？",
      "options": [
        {
          "option": "A",
          "text": "乐观积极，喜欢阳光"
        },
        {
          "option": "B",
          "text": "稳重踏实，值得依靠"
        },
        {
          "option": "C",
          "text": "想法很多，不喜欢平庸"
        },
        {
          "option": "D",
          "text": "有点神秘，不容易被理解"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 15,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:09,506 - server - INFO - 🟢 [req_1754374449499] ====== 响应后单例状态 ======
2025-08-05 14:14:09,506 - server - INFO - 🟢 [req_1754374449499] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:09,506 - server - INFO - 🟢 [req_1754374449499] ====== 请求完成 ======
2025-08-05 14:14:11,177 - server - INFO - 🔵 [req_1754374451177] ====== 收到新请求 ======
2025-08-05 14:14:11,177 - server - INFO - 🔵 [req_1754374451177] 时间: 2025-08-05 14:14:11
2025-08-05 14:14:11,177 - server - INFO - 🔵 [req_1754374451177] 方法: POST
2025-08-05 14:14:11,178 - server - INFO - 🔵 [req_1754374451177] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:11,178 - server - INFO - 🔵 [req_1754374451177] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:11,178 - server - INFO - 🔵 [req_1754374451177] 客户端IP: 127.0.0.1
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] ====== 请求前单例状态 ======
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] ====== 请求头 ======
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] host: localhost:8000
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] connection: close
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] content-length: 95
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] content-type: application/json
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] sec-ch-ua-mobile: ?0
2025-08-05 14:14:11,179 - server - INFO - 🔵 [req_1754374451177] accept: */*
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] origin: http://localhost:5173
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] sec-fetch-site: same-origin
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] sec-fetch-mode: cors
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] sec-fetch-dest: empty
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] ====== 请求体 ======
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q15","selected_option":"C"}'
2025-08-05 14:14:11,180 - server - INFO - 🔵 [req_1754374451177] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q15",
  "selected_option": "C"
}
2025-08-05 14:14:11,181 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q15, option: C
2025-08-05 14:14:11,181 - PersonalityTestManager - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question: 16/16
2025-08-05 14:14:11,181 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:11,182 - server - INFO - 🟢 [req_1754374451177] ====== 响应信息 ======
2025-08-05 14:14:11,182 - server - INFO - 🟢 [req_1754374451177] 状态码: 200
2025-08-05 14:14:11,182 - server - INFO - 🟢 [req_1754374451177] 处理时间: 0.002秒
2025-08-05 14:14:11,182 - server - INFO - 🟢 [req_1754374451177] ====== 响应头 ======
2025-08-05 14:14:11,182 - server - INFO - 🟢 [req_1754374451177] content-length: 452
2025-08-05 14:14:11,182 - server - INFO - 🟢 [req_1754374451177] content-type: application/json
2025-08-05 14:14:11,184 - server - INFO - 🟢 [req_1754374451177] ====== 响应体 ======
2025-08-05 14:14:11,184 - server - INFO - 🟢 [req_1754374451177] JSON响应: {
  "status": "success",
  "data": {
    "next_question": {
      "question_id": "Q16",
      "question_text": "如果必须选择一个角色，你更愿做？",
      "options": [
        {
          "option": "A",
          "text": "追风的流浪者"
        },
        {
          "option": "B",
          "text": "持剑前行的行动者"
        },
        {
          "option": "C",
          "text": "倾听与守护的伴侣"
        },
        {
          "option": "D",
          "text": "写信给宇宙的梦中人"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 16,
      "total": 16
    },
    "is_completed": false
  },
  "error": null
}
2025-08-05 14:14:11,185 - server - INFO - 🟢 [req_1754374451177] ====== 响应后单例状态 ======
2025-08-05 14:14:11,185 - server - INFO - 🟢 [req_1754374451177] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:11,185 - server - INFO - 🟢 [req_1754374451177] ====== 请求完成 ======
2025-08-05 14:14:12,665 - server - INFO - 🔵 [req_1754374452665] ====== 收到新请求 ======
2025-08-05 14:14:12,666 - server - INFO - 🔵 [req_1754374452665] 时间: 2025-08-05 14:14:12
2025-08-05 14:14:12,666 - server - INFO - 🔵 [req_1754374452665] 方法: POST
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] URL: http://localhost:8000/api/v1/CardGame/answer
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] 路径: /api/v1/CardGame/answer
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] 客户端IP: 127.0.0.1
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] ====== 请求前单例状态 ======
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] ====== 请求头 ======
2025-08-05 14:14:12,667 - server - INFO - 🔵 [req_1754374452665] host: localhost:8000
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] connection: close
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] content-length: 95
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] sec-ch-ua-platform: "macOS"
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] content-type: application/json
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] sec-ch-ua-mobile: ?0
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] accept: */*
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] origin: http://localhost:5173
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] sec-fetch-site: same-origin
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] sec-fetch-mode: cors
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] sec-fetch-dest: empty
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] referer: http://localhost:5173/card-game-test
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] ====== 请求体 ======
2025-08-05 14:14:12,668 - server - INFO - 🔵 [req_1754374452665] 原始数据: b'{"session_id":"1f35e12e-19f4-4016-9b76-80c2b737b5d3","question_id":"Q16","selected_option":"B"}'
2025-08-05 14:14:12,669 - server - INFO - 🔵 [req_1754374452665] JSON数据: {
  "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
  "question_id": "Q16",
  "selected_option": "B"
}
2025-08-05 14:14:12,670 - PersonalityTest - INFO - 提交答案请求 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, question_id: Q16, option: B
2025-08-05 14:14:12,670 - PersonalityTestManager - INFO - 测试完成 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3, result: A4
2025-08-05 14:14:12,671 - PersonalityTest - INFO - 提交答案成功 - session_id: 1f35e12e-19f4-4016-9b76-80c2b737b5d3
2025-08-05 14:14:12,671 - server - INFO - 🟢 [req_1754374452665] ====== 响应信息 ======
2025-08-05 14:14:12,671 - server - INFO - 🟢 [req_1754374452665] 状态码: 200
2025-08-05 14:14:12,672 - server - INFO - 🟢 [req_1754374452665] 处理时间: 0.002秒
2025-08-05 14:14:12,672 - server - INFO - 🟢 [req_1754374452665] ====== 响应头 ======
2025-08-05 14:14:12,672 - server - INFO - 🟢 [req_1754374452665] content-length: 760
2025-08-05 14:14:12,672 - server - INFO - 🟢 [req_1754374452665] content-type: application/json
2025-08-05 14:14:12,672 - server - INFO - 🟢 [req_1754374452665] ====== 响应体 ======
2025-08-05 14:14:12,673 - server - INFO - 🟢 [req_1754374452665] JSON响应: {
  "status": "success",
  "data": {
    "session_id": "1f35e12e-19f4-4016-9b76-80c2b737b5d3",
    "result_card": {
      "card_id": "A4",
      "card_name": "星尘拾梦人",
      "title": "你是拾捡星星的人，怀擅浪漫，也有真实。",
      "content": "你相信奇迹，相信值得，相信某种\"只属于彼此的瞬间\"。你是现实中的梦中人，你寻找的，是那个愿意与你共建星辰宇宙的人。",
      "emoji": "⭐",
      "image_name": "a4.jpg",
      "visual_style": {
        "keywords": [
          "仰望星空的青年",
          "手中漂浮星点",
          "粉蓝调"
        ],
        "style": "梦幻粒子感，星云背景，童话式笔触"
      },
      "created_at": "2025-08-01T14:48:16.804000"
    },
    "scores": {
      "A1": 2,
      "A2": 2,
      "A3": 2,
      "A4": 3,
      "A5": 2,
      "A6": 0,
      "A7": 2,
      "A8": 3
    },
    "completed_at": "2025-08-05T14:14:12.670739",
    "is_completed": true
  },
  "error": null
}
2025-08-05 14:14:12,673 - server - INFO - 🟢 [req_1754374452665] ====== 响应后单例状态 ======
2025-08-05 14:14:12,673 - server - INFO - 🟢 [req_1754374452665] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:14:12,674 - server - INFO - 🟢 [req_1754374452665] ====== 请求完成 ======
2025-08-05 14:14:15,210 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:14:15,211 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:14:15,211 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:14:15,211 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:14:15,211 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:14:15,211 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:14:15,211 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:14:15,212 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:14:15,212 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:14:15,212 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:14:15,212 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:14:15,212 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:14:15,212 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:14:15,214 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:14:15,214 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:14:15,214 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:14:15,214 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:14:15,214 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:14:15,215 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:14:15,215 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:14:15,215 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:14:15,215 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:14:15,239 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:14:15,239 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:14:15,240 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:14:15,240 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:14:15,240 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:14:15,413 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:14:15,413 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:14:15,418 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:14:15,418 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:14:15,418 - server - INFO - 🔄 自动保存完成，耗时: 0.207秒
2025-08-05 14:14:25,419 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:14:25,421 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:14:25,421 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:14:25,421 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:14:25,422 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:14:25,422 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:14:25,422 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:14:25,422 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:14:25,422 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:14:25,422 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:14:25,422 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:14:25,422 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:14:25,422 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:14:25,424 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:14:25,425 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:14:25,425 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:14:25,426 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:14:25,426 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:14:25,427 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:14:25,428 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:14:25,428 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:14:25,428 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:14:25,453 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:14:25,454 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:14:25,454 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:14:25,454 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:14:25,454 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:14:25,727 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:14:25,727 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:14:25,742 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:14:25,742 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:14:25,742 - server - INFO - 🔄 自动保存完成，耗时: 0.321秒
2025-08-05 14:14:35,743 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:14:35,744 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:14:35,744 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:14:35,744 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:14:35,744 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:14:35,744 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:14:35,744 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:14:35,744 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:14:35,744 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:14:35,744 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:14:35,744 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:14:35,745 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:14:35,745 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:14:35,746 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:14:35,747 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:14:35,747 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:14:35,747 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:14:35,747 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:14:35,747 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:14:35,747 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:14:35,748 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:14:35,748 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:14:35,777 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:14:35,777 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:14:35,777 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:14:35,778 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:14:35,778 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:14:36,147 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:14:36,148 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:14:36,185 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:14:36,185 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:14:36,185 - server - INFO - 🔄 自动保存完成，耗时: 0.441秒
2025-08-05 14:14:46,186 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:14:46,188 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:14:46,189 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:14:46,189 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:14:46,189 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:14:46,189 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:14:46,189 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:14:46,190 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:14:46,190 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:14:46,190 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:14:46,190 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:14:46,190 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:14:46,190 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:14:46,193 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:14:46,196 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:14:46,196 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:14:46,196 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:14:46,196 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:14:46,198 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:14:46,198 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:14:46,198 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:14:46,198 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:14:46,230 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:14:46,230 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:14:46,230 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:14:46,230 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:14:46,230 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:14:46,729 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:14:46,730 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:14:46,750 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:14:46,750 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:14:46,750 - server - INFO - 🔄 自动保存完成，耗时: 0.561秒
2025-08-05 14:14:56,750 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:14:56,752 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:14:56,752 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:14:56,752 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:14:56,752 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:14:56,753 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:14:56,753 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:14:56,753 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:14:56,754 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:14:56,754 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:14:56,754 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:14:56,754 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:14:56,754 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:14:56,756 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:14:56,757 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:14:56,758 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:14:56,758 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:14:56,758 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:14:56,759 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:14:56,759 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:14:56,759 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:14:56,760 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:14:56,793 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:14:56,793 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:14:56,793 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:14:56,793 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:14:56,793 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:14:57,133 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:14:57,133 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:14:57,165 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:14:57,165 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:14:57,165 - server - INFO - 🔄 自动保存完成，耗时: 0.413秒
2025-08-05 14:15:07,166 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:15:07,168 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:15:07,168 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:15:07,168 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:15:07,168 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:15:07,168 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:15:07,168 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:15:07,169 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:15:07,169 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:15:07,169 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:15:07,169 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:15:07,169 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:15:07,169 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:15:07,171 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:15:07,174 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:15:07,174 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:15:07,174 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:15:07,174 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:15:07,175 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:15:07,176 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:15:07,176 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:15:07,176 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:15:07,200 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:15:07,200 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:15:07,200 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:15:07,200 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:15:07,200 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:15:07,455 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:15:07,455 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:15:07,476 - PersonalityTestManager - INFO - 性格测试数据保存完成: 16/16 个测试会话
2025-08-05 14:15:07,476 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:15:07,476 - server - INFO - 🔄 自动保存完成，耗时: 0.309秒
2025-08-05 14:15:14,795 - server - INFO - 🔵 [req_1754374514795] ====== 收到新请求 ======
2025-08-05 14:15:14,796 - server - INFO - 🔵 [req_1754374514795] 时间: 2025-08-05 14:15:14
2025-08-05 14:15:14,796 - server - INFO - 🔵 [req_1754374514795] 方法: POST
2025-08-05 14:15:14,796 - server - INFO - 🔵 [req_1754374514795] URL: http://localhost:8000/api/v1/CardGame/start
2025-08-05 14:15:14,796 - server - INFO - 🔵 [req_1754374514795] 路径: /api/v1/CardGame/start
2025-08-05 14:15:14,797 - server - INFO - 🔵 [req_1754374514795] 客户端IP: 127.0.0.1
2025-08-05 14:15:14,797 - server - INFO - 🔵 [req_1754374514795] ====== 请求前单例状态 ======
2025-08-05 14:15:14,797 - server - INFO - 🔵 [req_1754374514795] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:14,798 - server - INFO - 🔵 [req_1754374514795] ====== 请求头 ======
2025-08-05 14:15:14,798 - server - INFO - 🔵 [req_1754374514795] host: localhost:8000
2025-08-05 14:15:14,799 - server - INFO - 🔵 [req_1754374514795] connection: close
2025-08-05 14:15:14,799 - server - INFO - 🔵 [req_1754374514795] content-length: 21
2025-08-05 14:15:14,799 - server - INFO - 🔵 [req_1754374514795] sec-ch-ua-platform: "macOS"
2025-08-05 14:15:14,799 - server - INFO - 🔵 [req_1754374514795] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] content-type: application/json
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] sec-ch-ua-mobile: ?0
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] accept: */*
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] origin: http://localhost:5173
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] sec-fetch-site: same-origin
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] sec-fetch-mode: cors
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] sec-fetch-dest: empty
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] referer: http://localhost:5173/card-game-result
2025-08-05 14:15:14,800 - server - INFO - 🔵 [req_1754374514795] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:15:14,801 - server - INFO - 🔵 [req_1754374514795] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:15:14,801 - server - INFO - 🔵 [req_1754374514795] ====== 请求体 ======
2025-08-05 14:15:14,801 - server - INFO - 🔵 [req_1754374514795] 原始数据: b'{"user_id":899044909}'
2025-08-05 14:15:14,802 - server - INFO - 🔵 [req_1754374514795] JSON数据: {
  "user_id": 899044909
}
2025-08-05 14:15:14,811 - PersonalityTest - INFO - 开始性格测试请求 - user_id: 899044909
2025-08-05 14:15:14,812 - PersonalityTestManager - INFO - 成功开始新测试 - user_id: 899044909, session_id: 3b666c5d-3d53-495b-9392-a2e1f9d18471
2025-08-05 14:15:14,812 - PersonalityTest - INFO - 开始测试成功 - user_id: 899044909, session_id: 3b666c5d-3d53-495b-9392-a2e1f9d18471
2025-08-05 14:15:14,812 - server - INFO - 🟢 [req_1754374514795] ====== 响应信息 ======
2025-08-05 14:15:14,812 - server - INFO - 🟢 [req_1754374514795] 状态码: 200
2025-08-05 14:15:14,812 - server - INFO - 🟢 [req_1754374514795] 处理时间: 0.010秒
2025-08-05 14:15:14,812 - server - INFO - 🟢 [req_1754374514795] ====== 响应头 ======
2025-08-05 14:15:14,812 - server - INFO - 🟢 [req_1754374514795] content-length: 545
2025-08-05 14:15:14,812 - server - INFO - 🟢 [req_1754374514795] content-type: application/json
2025-08-05 14:15:14,813 - server - INFO - 🟢 [req_1754374514795] ====== 响应体 ======
2025-08-05 14:15:14,813 - server - INFO - 🟢 [req_1754374514795] JSON响应: {
  "status": "success",
  "data": {
    "session_id": "3b666c5d-3d53-495b-9392-a2e1f9d18471",
    "first_question": {
      "question_id": "Q1",
      "question_text": "如果周末一个人待着，你最想做的是？",
      "options": [
        {
          "option": "A",
          "text": "开启一场即兴小旅行"
        },
        {
          "option": "B",
          "text": "实践一个一直想做的点子项目"
        },
        {
          "option": "C",
          "text": "去熟悉的地方静静坐一下午"
        },
        {
          "option": "D",
          "text": "躺在床上听歌，想象不可能的恋爱剧情"
        }
      ],
      "created_at": "2025-08-01T14:46:32.753000"
    },
    "progress": {
      "current": 1,
      "total": 16
    }
  },
  "error": null
}
2025-08-05 14:15:14,813 - server - INFO - 🟢 [req_1754374514795] ====== 响应后单例状态 ======
2025-08-05 14:15:14,813 - server - INFO - 🟢 [req_1754374514795] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:14,813 - server - INFO - 🟢 [req_1754374514795] ====== 请求完成 ======
2025-08-05 14:15:17,478 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:15:17,478 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:15:17,479 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:15:17,479 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:15:17,479 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:15:17,479 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:15:17,479 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:15:17,479 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:15:17,479 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:15:17,480 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:15:17,480 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:15:17,480 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:15:17,480 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:15:17,484 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:15:17,486 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:15:17,486 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:15:17,487 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:15:17,487 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:15:17,488 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:15:17,488 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:15:17,488 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:15:17,488 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:15:17,524 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:15:17,525 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:15:17,525 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:15:17,525 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:15:17,525 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:15:17,946 - AIResponseProcessor - INFO - AI聊天数据保存完成: 20/20 个聊天室, 230/230 条消息
2025-08-05 14:15:17,947 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:15:17,982 - database - INFO - Inserted document with id: 6891a17559a202dbd20958a8
2025-08-05 14:15:17,982 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:15:17,983 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:15:17,983 - server - INFO - 🔄 自动保存完成，耗时: 0.504秒
2025-08-05 14:15:19,376 - server - INFO - 🔵 [req_1754374519376] ====== 收到新请求 ======
2025-08-05 14:15:19,376 - server - INFO - 🔵 [req_1754374519376] 时间: 2025-08-05 14:15:19
2025-08-05 14:15:19,376 - server - INFO - 🔵 [req_1754374519376] 方法: POST
2025-08-05 14:15:19,376 - server - INFO - 🔵 [req_1754374519376] URL: http://localhost:8000/api/v1/UserManagement/create_new_user
2025-08-05 14:15:19,376 - server - INFO - 🔵 [req_1754374519376] 路径: /api/v1/UserManagement/create_new_user
2025-08-05 14:15:19,376 - server - INFO - 🔵 [req_1754374519376] 客户端IP: 127.0.0.1
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] ====== 请求前单例状态 ======
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] UserManagement: user_list(28), male_user_list(13), female_user_list(15), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] ====== 请求头 ======
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] host: localhost:8000
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] connection: close
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] content-length: 79
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] sec-ch-ua-platform: "macOS"
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] content-type: application/json
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] sec-ch-ua-mobile: ?0
2025-08-05 14:15:19,377 - server - INFO - 🔵 [req_1754374519376] accept: */*
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] origin: http://localhost:5173
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] sec-fetch-site: same-origin
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] sec-fetch-mode: cors
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] sec-fetch-dest: empty
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] referer: http://localhost:5173/
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] ====== 请求体 ======
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] 原始数据: b'{"telegram_user_name":"user_634470045","telegram_user_id":634470045,"gender":1}'
2025-08-05 14:15:19,378 - server - INFO - 🔵 [req_1754374519376] JSON数据: {
  "telegram_user_name": "user_634470045",
  "telegram_user_id": 634470045,
  "gender": 1
}
2025-08-05 14:15:19,379 - server - INFO - 🟢 [req_1754374519376] ====== 响应信息 ======
2025-08-05 14:15:19,380 - server - INFO - 🟢 [req_1754374519376] 状态码: 200
2025-08-05 14:15:19,380 - server - INFO - 🟢 [req_1754374519376] 处理时间: 0.001秒
2025-08-05 14:15:19,380 - server - INFO - 🟢 [req_1754374519376] ====== 响应头 ======
2025-08-05 14:15:19,380 - server - INFO - 🟢 [req_1754374519376] content-length: 36
2025-08-05 14:15:19,380 - server - INFO - 🟢 [req_1754374519376] content-type: application/json
2025-08-05 14:15:19,380 - server - INFO - 🟢 [req_1754374519376] ====== 响应体 ======
2025-08-05 14:15:19,381 - server - INFO - 🟢 [req_1754374519376] JSON响应: {
  "success": true,
  "user_id": 634470045
}
2025-08-05 14:15:19,381 - server - INFO - 🟢 [req_1754374519376] ====== 响应后单例状态 ======
2025-08-05 14:15:19,381 - server - INFO - 🟢 [req_1754374519376] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,381 - server - INFO - 🟢 [req_1754374519376] ====== 请求完成 ======
2025-08-05 14:15:19,389 - server - INFO - 🔵 [req_1754374519389] ====== 收到新请求 ======
2025-08-05 14:15:19,389 - server - INFO - 🔵 [req_1754374519389] 时间: 2025-08-05 14:15:19
2025-08-05 14:15:19,389 - server - INFO - 🔵 [req_1754374519389] 方法: POST
2025-08-05 14:15:19,389 - server - INFO - 🔵 [req_1754374519389] URL: http://localhost:8000/api/v1/UserManagement/edit_user_age
2025-08-05 14:15:19,390 - server - INFO - 🔵 [req_1754374519389] 路径: /api/v1/UserManagement/edit_user_age
2025-08-05 14:15:19,390 - server - INFO - 🔵 [req_1754374519389] 客户端IP: 127.0.0.1
2025-08-05 14:15:19,390 - server - INFO - 🔵 [req_1754374519389] ====== 请求前单例状态 ======
2025-08-05 14:15:19,390 - server - INFO - 🔵 [req_1754374519389] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,390 - server - INFO - 🔵 [req_1754374519389] ====== 请求头 ======
2025-08-05 14:15:19,390 - server - INFO - 🔵 [req_1754374519389] host: localhost:8000
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] connection: close
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] content-length: 32
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] sec-ch-ua-platform: "macOS"
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] content-type: application/json
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] sec-ch-ua-mobile: ?0
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] accept: */*
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] origin: http://localhost:5173
2025-08-05 14:15:19,391 - server - INFO - 🔵 [req_1754374519389] sec-fetch-site: same-origin
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] sec-fetch-mode: cors
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] sec-fetch-dest: empty
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] referer: http://localhost:5173/
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] ====== 请求体 ======
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] 原始数据: b'{"user_id":634470045,"age":1321}'
2025-08-05 14:15:19,392 - server - INFO - 🔵 [req_1754374519389] JSON数据: {
  "user_id": 634470045,
  "age": 1321
}
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] ====== 响应信息 ======
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] 状态码: 200
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] 处理时间: 0.006秒
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] ====== 响应头 ======
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] content-length: 16
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] content-type: application/json
2025-08-05 14:15:19,398 - server - INFO - 🟢 [req_1754374519389] ====== 响应体 ======
2025-08-05 14:15:19,399 - server - INFO - 🟢 [req_1754374519389] JSON响应: {
  "success": true
}
2025-08-05 14:15:19,399 - server - INFO - 🟢 [req_1754374519389] ====== 响应后单例状态 ======
2025-08-05 14:15:19,399 - server - INFO - 🟢 [req_1754374519389] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,399 - server - INFO - 🟢 [req_1754374519389] ====== 请求完成 ======
2025-08-05 14:15:19,479 - server - INFO - 🔵 [req_1754374519479] ====== 收到新请求 ======
2025-08-05 14:15:19,479 - server - INFO - 🔵 [req_1754374519479] 时间: 2025-08-05 14:15:19
2025-08-05 14:15:19,479 - server - INFO - 🔵 [req_1754374519479] 方法: POST
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] URL: http://localhost:8000/api/v1/ai/history
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] 路径: /api/v1/ai/history
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] 客户端IP: 127.0.0.1
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] ====== 请求前单例状态 ======
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] ====== 请求头 ======
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] host: localhost:8000
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] connection: close
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] content-length: 21
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] sec-ch-ua-platform: "macOS"
2025-08-05 14:15:19,480 - server - INFO - 🔵 [req_1754374519479] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] content-type: application/json
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] sec-ch-ua-mobile: ?0
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] accept: */*
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] origin: http://localhost:5173
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] sec-fetch-site: same-origin
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] sec-fetch-mode: cors
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] sec-fetch-dest: empty
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] referer: http://localhost:5173/chat
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] ====== 请求体 ======
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] 原始数据: b'{"user_id":634470045}'
2025-08-05 14:15:19,481 - server - INFO - 🔵 [req_1754374519479] JSON数据: {
  "user_id": 634470045
}
2025-08-05 14:15:19,483 - app.api.v1.AIResponseProcessor - INFO - 开始获取用户 634470045 的AI聊天历史
2025-08-05 14:15:19,483 - AIResponseProcessor - INFO - [634470045] 开始从内存中获取对话历史
2025-08-05 14:15:19,484 - AIResponseProcessor - INFO - [634470045] 用户 634470045 在内存中没有AI聊天记录
2025-08-05 14:15:19,484 - app.api.v1.AIResponseProcessor - INFO - 成功获取用户 634470045 的AI聊天历史，共 0 条记录
2025-08-05 14:15:19,484 - server - INFO - 🟢 [req_1754374519479] ====== 响应信息 ======
2025-08-05 14:15:19,484 - server - INFO - 🟢 [req_1754374519479] 状态码: 200
2025-08-05 14:15:19,484 - server - INFO - 🟢 [req_1754374519479] 处理时间: 0.003秒
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] ====== 响应头 ======
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] content-length: 43
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] content-type: application/json
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] ====== 响应体 ======
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] JSON响应: {
  "status": "success",
  "data": [],
  "error": null
}
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] ====== 响应后单例状态 ======
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,485 - server - INFO - 🟢 [req_1754374519479] ====== 请求完成 ======
2025-08-05 14:15:19,488 - server - INFO - 🔵 [req_1754374519488] ====== 收到新请求 ======
2025-08-05 14:15:19,488 - server - INFO - 🔵 [req_1754374519488] 时间: 2025-08-05 14:15:19
2025-08-05 14:15:19,488 - server - INFO - 🔵 [req_1754374519488] 方法: POST
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] 路径: /api/v1/ai/chat
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] 客户端IP: 127.0.0.1
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] ====== 请求前单例状态 ======
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] ====== 请求头 ======
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] host: localhost:8000
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] connection: close
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] content-length: 70
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] sec-ch-ua-platform: "macOS"
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:15:19,489 - server - INFO - 🔵 [req_1754374519488] content-type: application/json
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] sec-ch-ua-mobile: ?0
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] accept: */*
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] origin: http://localhost:5173
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] sec-fetch-site: same-origin
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] sec-fetch-mode: cors
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] sec-fetch-dest: empty
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] referer: http://localhost:5173/chat
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] ====== 请求体 ======
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] 原始数据: b'{"user_id":634470045,"message":"\xe4\xbd\xa0\xe5\xa5\xbd\xef\xbc\x8c\xe6\x88\x91\xe6\x83\xb3\xe5\xbc\x80\xe5\xa7\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xaf\xb9\xe8\xaf\x9d"}'
2025-08-05 14:15:19,490 - server - INFO - 🔵 [req_1754374519488] JSON数据: {
  "user_id": 634470045,
  "message": "你好，我想开始我们的对话"
}
2025-08-05 14:15:19,491 - app.api.v1.AIResponseProcessor - INFO - [634470045] 收到新的AI聊天请求: message='你好，我想开始我们的对话'
2025-08-05 14:15:19,491 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:15:19,491 - AIResponseProcessor - INFO - [634470045] 开始从内存中获取对话历史
2025-08-05 14:15:19,491 - AIResponseProcessor - INFO - [634470045] 用户 634470045 在内存中没有AI聊天记录
2025-08-05 14:15:19,491 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 1/4: 获取到 0 条历史记录
2025-08-05 14:15:19,491 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:15:19,491 - KimiInteractionAPI - INFO - [634470045] 开始处理用户消息: 你好，我想开始我们的对话...
2025-08-05 14:15:19,496 - KimiInteractionAPI - INFO - [634470045] 发送请求到Kimi API
2025-08-05 14:15:19,496 - KimiInteractionAPI - INFO - [634470045] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:15:35,309 - KimiInteractionAPI - ERROR - [634470045] Kimi API调用失败 (尝试 1/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:15:35,318 - KimiInteractionAPI - INFO - [634470045] 等待 2秒后重试...
2025-08-05 14:15:37,323 - KimiInteractionAPI - INFO - [634470045] 尝试第 2/3 次请求Kimi API...
2025-08-05 14:15:52,965 - KimiInteractionAPI - ERROR - [634470045] Kimi API调用失败 (尝试 2/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:15:52,970 - KimiInteractionAPI - INFO - [634470045] 等待 4秒后重试...
2025-08-05 14:15:56,976 - KimiInteractionAPI - INFO - [634470045] 尝试第 3/3 次请求Kimi API...
2025-08-05 14:16:12,679 - KimiInteractionAPI - ERROR - [634470045] Kimi API调用失败 (尝试 3/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:16:12,684 - KimiInteractionAPI - ERROR - [634470045] Kimi API调用最终失败, 已达到最大重试次数 3
2025-08-05 14:16:12,684 - KimiInteractionAPI - ERROR - [634470045] 处理用户消息失败: Kimi API调用最终失败, 已达到最大重试次数 3
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 130, in send_message_to_ai
    response_json = self._make_api_request(request_data, user_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 218, in _make_api_request
    raise Exception(f"Kimi API调用最终失败, 已达到最大重试次数 {self.max_retries}")
Exception: Kimi API调用最终失败, 已达到最大重试次数 3
2025-08-05 14:16:12,687 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 2/4: AI响应成功，耗时: 53.20秒, 成功: True
2025-08-05 14:16:12,687 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:16:12,687 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:16:12,687 - AIResponseProcessor - INFO - [634470045] 开始保存对话历史到内存和数据库
2025-08-05 14:16:12,687 - AIResponseProcessor - INFO - 消息 231 已添加到用户 634470045 的内存中
2025-08-05 14:16:12,687 - AIResponseProcessor - INFO - 消息 232 已添加到用户 634470045 的内存中
2025-08-05 14:16:12,687 - AIResponseProcessor - INFO - [634470045] 成功更新内存缓存，新增消息IDs: 231, 232
2025-08-05 14:16:12,687 - AIResponseProcessor - INFO - [634470045] 开始异步写入数据库...
2025-08-05 14:16:12,691 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:16:12,692 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:16:12,692 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:16:12,692 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:16:12,693 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:16:12,693 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:16:12,694 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:16:12,694 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:16:12,694 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:16:12,695 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:16:12,696 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:16:12,696 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:16:12,696 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:16:12,699 - server - INFO - 🔵 [req_1754374572699] ====== 收到新请求 ======
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] 时间: 2025-08-05 14:16:12
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] 方法: POST
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] URL: http://localhost:8000/api/v1/UserManagement/create_new_user
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] 路径: /api/v1/UserManagement/create_new_user
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] 客户端IP: 127.0.0.1
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] ====== 请求前单例状态 ======
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] UserManagement: user_list(29), male_user_list(13), female_user_list(16), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] ====== 请求头 ======
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] host: localhost:8000
2025-08-05 14:16:12,700 - server - INFO - 🔵 [req_1754374572699] connection: close
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] content-length: 79
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] sec-ch-ua-platform: "macOS"
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] content-type: application/json
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] sec-ch-ua-mobile: ?0
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] accept: */*
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] origin: http://localhost:5173
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] sec-fetch-site: same-origin
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] sec-fetch-mode: cors
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] sec-fetch-dest: empty
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] referer: http://localhost:5173/
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] ====== 请求体 ======
2025-08-05 14:16:12,701 - server - INFO - 🔵 [req_1754374572699] 原始数据: b'{"telegram_user_name":"user_583671619","telegram_user_id":583671619,"gender":1}'
2025-08-05 14:16:12,702 - server - INFO - 🔵 [req_1754374572699] JSON数据: {
  "telegram_user_name": "user_583671619",
  "telegram_user_id": 583671619,
  "gender": 1
}
2025-08-05 14:16:12,702 - database - INFO - Inserted document with id: 231
2025-08-05 14:16:12,703 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:16:12,705 - server - INFO - 🟢 [req_1754374572699] ====== 响应信息 ======
2025-08-05 14:16:12,706 - server - INFO - 🟢 [req_1754374572699] 状态码: 200
2025-08-05 14:16:12,706 - server - INFO - 🟢 [req_1754374572699] 处理时间: 0.003秒
2025-08-05 14:16:12,706 - server - INFO - 🟢 [req_1754374572699] ====== 响应头 ======
2025-08-05 14:16:12,706 - server - INFO - 🟢 [req_1754374572699] content-length: 36
2025-08-05 14:16:12,707 - server - INFO - 🟢 [req_1754374572699] content-type: application/json
2025-08-05 14:16:12,707 - database - INFO - Inserted document with id: 232
2025-08-05 14:16:12,707 - AIResponseProcessor - ERROR - [634470045] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:16:12,708 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 3/4: 对话记录保存成功
2025-08-05 14:16:12,708 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:16:12,708 - app.api.v1.AIResponseProcessor - INFO - [634470045] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:16:12,708 - server - INFO - 🟢 [req_1754374572699] ====== 响应体 ======
2025-08-05 14:16:12,708 - server - INFO - 🟢 [req_1754374572699] JSON响应: {
  "success": true,
  "user_id": 583671619
}
2025-08-05 14:16:12,709 - server - INFO - 🟢 [req_1754374572699] ====== 响应后单例状态 ======
2025-08-05 14:16:12,709 - server - INFO - 🟢 [req_1754374572699] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,709 - server - INFO - 🟢 [req_1754374572699] ====== 请求完成 ======
2025-08-05 14:16:12,709 - server - INFO - 🟢 [req_1754374519488] ====== 响应信息 ======
2025-08-05 14:16:12,709 - server - INFO - 🟢 [req_1754374519488] 状态码: 200
2025-08-05 14:16:12,709 - server - INFO - 🟢 [req_1754374519488] 处理时间: 53.219秒
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] ====== 响应头 ======
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] content-length: 153
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] content-type: application/json
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] ====== 响应体 ======
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] JSON响应: {
  "status": "success",
  "response": "抱歉，我现在遇到了一些技术问题。请稍后再试，或者重新开始对话。",
  "summary": "",
  "error": null
}
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] ====== 响应后单例状态 ======
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,710 - server - INFO - 🟢 [req_1754374519488] ====== 请求完成 ======
2025-08-05 14:16:12,719 - server - INFO - 🔵 [req_1754374572719] ====== 收到新请求 ======
2025-08-05 14:16:12,719 - server - INFO - 🔵 [req_1754374572719] 时间: 2025-08-05 14:16:12
2025-08-05 14:16:12,719 - server - INFO - 🔵 [req_1754374572719] 方法: POST
2025-08-05 14:16:12,719 - server - INFO - 🔵 [req_1754374572719] URL: http://localhost:8000/api/v1/UserManagement/edit_user_age
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] 路径: /api/v1/UserManagement/edit_user_age
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] 客户端IP: 127.0.0.1
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] ====== 请求前单例状态 ======
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] ====== 请求头 ======
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] host: localhost:8000
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] connection: close
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] content-length: 33
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] sec-ch-ua-platform: "macOS"
2025-08-05 14:16:12,720 - server - INFO - 🔵 [req_1754374572719] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] content-type: application/json
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] sec-ch-ua-mobile: ?0
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] accept: */*
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] origin: http://localhost:5173
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] sec-fetch-site: same-origin
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] sec-fetch-mode: cors
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] sec-fetch-dest: empty
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] referer: http://localhost:5173/
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:16:12,721 - server - INFO - 🔵 [req_1754374572719] ====== 请求体 ======
2025-08-05 14:16:12,722 - server - INFO - 🔵 [req_1754374572719] 原始数据: b'{"user_id":583671619,"age":43242}'
2025-08-05 14:16:12,722 - server - INFO - 🔵 [req_1754374572719] JSON数据: {
  "user_id": 583671619,
  "age": 43242
}
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] ====== 响应信息 ======
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] 状态码: 200
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] 处理时间: 0.002秒
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] ====== 响应头 ======
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] content-length: 16
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] content-type: application/json
2025-08-05 14:16:12,724 - server - INFO - 🟢 [req_1754374572719] ====== 响应体 ======
2025-08-05 14:16:12,725 - server - INFO - 🟢 [req_1754374572719] JSON响应: {
  "success": true
}
2025-08-05 14:16:12,725 - server - INFO - 🟢 [req_1754374572719] ====== 响应后单例状态 ======
2025-08-05 14:16:12,725 - server - INFO - 🟢 [req_1754374572719] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,725 - server - INFO - 🟢 [req_1754374572719] ====== 请求完成 ======
2025-08-05 14:16:12,727 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:16:12,728 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:16:12,728 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:16:12,728 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:16:12,731 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:16:12,731 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:16:12,732 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:16:12,732 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:16:12,749 - server - INFO - 🔵 [req_1754374572749] ====== 收到新请求 ======
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] 时间: 2025-08-05 14:16:12
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] 方法: POST
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] URL: http://localhost:8000/api/v1/ai/history
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] 路径: /api/v1/ai/history
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] 客户端IP: 127.0.0.1
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] ====== 请求前单例状态 ======
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,750 - server - INFO - 🔵 [req_1754374572749] ====== 请求头 ======
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] host: localhost:8000
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] connection: close
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] content-length: 21
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] sec-ch-ua-platform: "macOS"
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] content-type: application/json
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] sec-ch-ua-mobile: ?0
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] accept: */*
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] origin: http://localhost:5173
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] sec-fetch-site: same-origin
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] sec-fetch-mode: cors
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] sec-fetch-dest: empty
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] referer: http://localhost:5173/chat
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] ====== 请求体 ======
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] 原始数据: b'{"user_id":583671619}'
2025-08-05 14:16:12,751 - server - INFO - 🔵 [req_1754374572749] JSON数据: {
  "user_id": 583671619
}
2025-08-05 14:16:12,753 - app.api.v1.AIResponseProcessor - INFO - 开始获取用户 583671619 的AI聊天历史
2025-08-05 14:16:12,755 - AIResponseProcessor - INFO - [583671619] 开始从内存中获取对话历史
2025-08-05 14:16:12,755 - AIResponseProcessor - INFO - [583671619] 用户 583671619 在内存中没有AI聊天记录
2025-08-05 14:16:12,755 - app.api.v1.AIResponseProcessor - INFO - 成功获取用户 583671619 的AI聊天历史，共 0 条记录
2025-08-05 14:16:12,755 - server - INFO - 🟢 [req_1754374572749] ====== 响应信息 ======
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] 状态码: 200
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] 处理时间: 0.004秒
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] ====== 响应头 ======
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] content-length: 43
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] content-type: application/json
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] ====== 响应体 ======
2025-08-05 14:16:12,756 - server - INFO - 🟢 [req_1754374572749] JSON响应: {
  "status": "success",
  "data": [],
  "error": null
}
2025-08-05 14:16:12,757 - server - INFO - 🟢 [req_1754374572749] ====== 响应后单例状态 ======
2025-08-05 14:16:12,757 - server - INFO - 🟢 [req_1754374572749] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,757 - server - INFO - 🟢 [req_1754374572749] ====== 请求完成 ======
2025-08-05 14:16:12,761 - server - INFO - 🔵 [req_1754374572761] ====== 收到新请求 ======
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] 时间: 2025-08-05 14:16:12
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] 方法: POST
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] 路径: /api/v1/ai/chat
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] 客户端IP: 127.0.0.1
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] ====== 请求前单例状态 ======
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] ====== 请求头 ======
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] host: localhost:8000
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] connection: close
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] content-length: 70
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] sec-ch-ua-platform: "macOS"
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] content-type: application/json
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] sec-ch-ua-mobile: ?0
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] accept: */*
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] origin: http://localhost:5173
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] sec-fetch-site: same-origin
2025-08-05 14:16:12,762 - server - INFO - 🔵 [req_1754374572761] sec-fetch-mode: cors
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] sec-fetch-dest: empty
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] referer: http://localhost:5173/chat
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] ====== 请求体 ======
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] 原始数据: b'{"user_id":583671619,"message":"\xe4\xbd\xa0\xe5\xa5\xbd\xef\xbc\x8c\xe6\x88\x91\xe6\x83\xb3\xe5\xbc\x80\xe5\xa7\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xaf\xb9\xe8\xaf\x9d"}'
2025-08-05 14:16:12,763 - server - INFO - 🔵 [req_1754374572761] JSON数据: {
  "user_id": 583671619,
  "message": "你好，我想开始我们的对话"
}
2025-08-05 14:16:12,764 - app.api.v1.AIResponseProcessor - INFO - [583671619] 收到新的AI聊天请求: message='你好，我想开始我们的对话'
2025-08-05 14:16:12,764 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:16:12,764 - AIResponseProcessor - INFO - [583671619] 开始从内存中获取对话历史
2025-08-05 14:16:12,764 - AIResponseProcessor - INFO - [583671619] 用户 583671619 在内存中没有AI聊天记录
2025-08-05 14:16:12,764 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 1/4: 获取到 0 条历史记录
2025-08-05 14:16:12,764 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:16:12,764 - KimiInteractionAPI - INFO - [583671619] 开始处理用户消息: 你好，我想开始我们的对话...
2025-08-05 14:16:12,764 - KimiInteractionAPI - INFO - [583671619] 发送请求到Kimi API
2025-08-05 14:16:12,764 - KimiInteractionAPI - INFO - [583671619] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:16:28,845 - KimiInteractionAPI - ERROR - [583671619] Kimi API调用失败 (尝试 1/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:16:28,849 - KimiInteractionAPI - INFO - [583671619] 等待 2秒后重试...
2025-08-05 14:16:30,853 - KimiInteractionAPI - INFO - [583671619] 尝试第 2/3 次请求Kimi API...
2025-08-05 14:16:46,486 - KimiInteractionAPI - ERROR - [583671619] Kimi API调用失败 (尝试 2/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:16:46,500 - KimiInteractionAPI - INFO - [583671619] 等待 4秒后重试...
2025-08-05 14:16:50,511 - KimiInteractionAPI - INFO - [583671619] 尝试第 3/3 次请求Kimi API...
2025-08-05 14:16:54,632 - KimiInteractionAPI - INFO - [583671619] 请求成功, 状态码: 200
2025-08-05 14:16:54,634 - KimiInteractionAPI - INFO - [583671619] AI响应成功
2025-08-05 14:16:54,638 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 2/4: AI响应成功，耗时: 41.87秒, 成功: True
2025-08-05 14:16:54,638 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:16:54,638 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:16:54,638 - AIResponseProcessor - INFO - [583671619] 开始保存对话历史到内存和数据库
2025-08-05 14:16:54,639 - AIResponseProcessor - INFO - 消息 233 已添加到用户 583671619 的内存中
2025-08-05 14:16:54,639 - AIResponseProcessor - INFO - 消息 234 已添加到用户 583671619 的内存中
2025-08-05 14:16:54,639 - AIResponseProcessor - INFO - [583671619] 成功更新内存缓存，新增消息IDs: 233, 234
2025-08-05 14:16:54,639 - AIResponseProcessor - INFO - [583671619] 开始异步写入数据库...
2025-08-05 14:16:54,648 - database - INFO - Inserted document with id: 233
2025-08-05 14:16:54,657 - database - INFO - Inserted document with id: 234
2025-08-05 14:16:54,658 - AIResponseProcessor - ERROR - [583671619] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:16:54,666 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 3/4: 对话记录保存成功
2025-08-05 14:16:54,666 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:16:54,667 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:16:54,681 - server - INFO - 🟢 [req_1754374572761] ====== 响应信息 ======
2025-08-05 14:16:54,682 - server - INFO - 🟢 [req_1754374572761] 状态码: 200
2025-08-05 14:16:54,682 - server - INFO - 🟢 [req_1754374572761] 处理时间: 41.919秒
2025-08-05 14:16:54,682 - server - INFO - 🟢 [req_1754374572761] ====== 响应头 ======
2025-08-05 14:16:54,682 - server - INFO - 🟢 [req_1754374572761] content-length: 394
2025-08-05 14:16:54,682 - server - INFO - 🟢 [req_1754374572761] content-type: application/json
2025-08-05 14:16:54,683 - server - INFO - 🟢 [req_1754374572761] ====== 响应体 ======
2025-08-05 14:16:54,684 - server - INFO - 🟢 [req_1754374572761] JSON响应: {
  "status": "success",
  "response": "你好！非常高兴你决定开始这段探索之旅。为了更好地了解你，让我们从一个轻松的问题开始：\n\n想象一下，如果你有一个可以随心所欲安排的周末，没有任何工作或责任的束缚，你会选择如何度过？是和朋友一起外出，还是独自享受一些安静的时光？",
  "summary": "",
  "error": null
}
2025-08-05 14:16:54,684 - server - INFO - 🟢 [req_1754374572761] ====== 响应后单例状态 ======
2025-08-05 14:16:54,684 - server - INFO - 🟢 [req_1754374572761] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:16:54,684 - server - INFO - 🟢 [req_1754374572761] ====== 请求完成 ======
2025-08-05 14:16:54,799 - database - INFO - Inserted document with id: 634470045
2025-08-05 14:16:54,802 - database - INFO - Inserted document with id: 583671619
2025-08-05 14:16:54,803 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:16:54,803 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:16:54,803 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:16:54,803 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:16:54,803 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:16:54,831 - database - INFO - Inserted document with id: 6891a1d659a202dbd20958a9
2025-08-05 14:16:54,832 - database - INFO - Inserted document with id: 6891a1d659a202dbd20958aa
2025-08-05 14:16:55,024 - AIResponseProcessor - INFO - AI聊天数据保存完成: 22/22 个聊天室, 234/234 条消息
2025-08-05 14:16:55,024 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:16:55,032 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:16:55,032 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:16:55,032 - server - INFO - 🔄 自动保存完成，耗时: 42.340秒
2025-08-05 14:17:05,033 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:17:05,037 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:17:05,037 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:17:05,038 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:17:05,038 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:17:05,039 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:17:05,039 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:17:05,039 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:17:05,039 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:17:05,040 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:17:05,040 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:17:05,040 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:17:05,040 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:17:05,049 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:17:05,052 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:17:05,052 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:17:05,053 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:17:05,054 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:17:05,055 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:17:05,055 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:17:05,055 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:17:05,055 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:17:05,088 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:17:05,088 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:17:05,088 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:17:05,089 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:17:05,089 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:17:05,224 - AIResponseProcessor - INFO - AI聊天数据保存完成: 22/22 个聊天室, 234/234 条消息
2025-08-05 14:17:05,224 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:17:05,231 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:17:05,231 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:17:05,231 - server - INFO - 🔄 自动保存完成，耗时: 0.195秒
2025-08-05 14:17:15,233 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:17:15,234 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:17:15,240 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:17:15,240 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:17:15,240 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:17:15,240 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:17:15,240 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:17:15,241 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:17:15,241 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:17:15,241 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:17:15,241 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:17:15,241 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:17:15,241 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:17:15,244 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:17:15,245 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:17:15,245 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:17:15,245 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:17:15,245 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:17:15,246 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:17:15,246 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:17:15,246 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:17:15,246 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:17:15,274 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:17:15,275 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:17:15,275 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:17:15,275 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:17:15,275 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:17:15,535 - AIResponseProcessor - INFO - AI聊天数据保存完成: 22/22 个聊天室, 234/234 条消息
2025-08-05 14:17:15,535 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:17:15,550 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:17:15,550 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:17:15,550 - server - INFO - 🔄 自动保存完成，耗时: 0.316秒
2025-08-05 14:17:25,569 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:17:25,570 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:17:25,571 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:17:25,571 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:17:25,571 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:17:25,571 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:17:25,571 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:17:25,571 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:17:25,571 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:17:25,571 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:17:25,571 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:17:25,571 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:17:25,572 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:17:25,588 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:17:25,589 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:17:25,589 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:17:25,589 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:17:25,589 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:17:25,590 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:17:25,590 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:17:25,590 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:17:25,590 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:17:25,613 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:17:25,613 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:17:25,613 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:17:25,613 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:17:25,613 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:17:25,856 - AIResponseProcessor - INFO - AI聊天数据保存完成: 22/22 个聊天室, 234/234 条消息
2025-08-05 14:17:25,856 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:17:25,873 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:17:25,874 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:17:25,874 - server - INFO - 🔄 自动保存完成，耗时: 0.303秒
2025-08-05 14:17:32,006 - server - INFO - 🔵 [req_1754374652006] ====== 收到新请求 ======
2025-08-05 14:17:32,007 - server - INFO - 🔵 [req_1754374652006] 时间: 2025-08-05 14:17:32
2025-08-05 14:17:32,007 - server - INFO - 🔵 [req_1754374652006] 方法: POST
2025-08-05 14:17:32,008 - server - INFO - 🔵 [req_1754374652006] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:17:32,009 - server - INFO - 🔵 [req_1754374652006] 路径: /api/v1/ai/chat
2025-08-05 14:17:32,010 - server - INFO - 🔵 [req_1754374652006] 客户端IP: 127.0.0.1
2025-08-05 14:17:32,011 - server - INFO - 🔵 [req_1754374652006] ====== 请求前单例状态 ======
2025-08-05 14:17:32,012 - server - INFO - 🔵 [req_1754374652006] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:17:32,014 - server - INFO - 🔵 [req_1754374652006] ====== 请求头 ======
2025-08-05 14:17:32,014 - server - INFO - 🔵 [req_1754374652006] host: localhost:8000
2025-08-05 14:17:32,014 - server - INFO - 🔵 [req_1754374652006] connection: close
2025-08-05 14:17:32,014 - server - INFO - 🔵 [req_1754374652006] content-length: 46
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] sec-ch-ua-platform: "macOS"
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] content-type: application/json
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] sec-ch-ua-mobile: ?0
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] accept: */*
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] origin: http://localhost:5173
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] sec-fetch-site: same-origin
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] sec-fetch-mode: cors
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] sec-fetch-dest: empty
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] referer: http://localhost:5173/chat
2025-08-05 14:17:32,015 - server - INFO - 🔵 [req_1754374652006] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:17:32,016 - server - INFO - 🔵 [req_1754374652006] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:17:32,016 - server - INFO - 🔵 [req_1754374652006] ====== 请求体 ======
2025-08-05 14:17:32,016 - server - INFO - 🔵 [req_1754374652006] 原始数据: b'{"user_id":583671619,"message":"\xe7\x8b\xac\xe8\x87\xaa\xe5\xae\x89\xe9\x9d\x99"}'
2025-08-05 14:17:32,016 - server - INFO - 🔵 [req_1754374652006] JSON数据: {
  "user_id": 583671619,
  "message": "独自安静"
}
2025-08-05 14:17:32,019 - app.api.v1.AIResponseProcessor - INFO - [583671619] 收到新的AI聊天请求: message='独自安静'
2025-08-05 14:17:32,020 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:17:32,020 - AIResponseProcessor - INFO - [583671619] 开始从内存中获取对话历史
2025-08-05 14:17:32,020 - AIResponseProcessor - INFO - [583671619] 成功从内存获取到 2 条历史记录
2025-08-05 14:17:32,021 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 1/4: 获取到 2 条历史记录
2025-08-05 14:17:32,021 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:17:32,021 - KimiInteractionAPI - INFO - [583671619] 开始处理用户消息: 独自安静...
2025-08-05 14:17:32,021 - KimiInteractionAPI - INFO - [583671619] 发送请求到Kimi API
2025-08-05 14:17:32,021 - KimiInteractionAPI - INFO - [583671619] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:17:47,669 - KimiInteractionAPI - ERROR - [583671619] Kimi API调用失败 (尝试 1/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:17:47,679 - KimiInteractionAPI - INFO - [583671619] 等待 2秒后重试...
2025-08-05 14:17:49,684 - KimiInteractionAPI - INFO - [583671619] 尝试第 2/3 次请求Kimi API...
2025-08-05 14:17:56,222 - KimiInteractionAPI - ERROR - [583671619] Kimi API调用失败 (尝试 2/3), 错误: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 193, in _make_api_request
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.moonshot.cn', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-08-05 14:17:56,227 - KimiInteractionAPI - INFO - [583671619] 等待 4秒后重试...
2025-08-05 14:18:00,230 - KimiInteractionAPI - INFO - [583671619] 尝试第 3/3 次请求Kimi API...
2025-08-05 14:18:02,304 - KimiInteractionAPI - INFO - [583671619] 请求成功, 状态码: 200
2025-08-05 14:18:02,305 - KimiInteractionAPI - INFO - [583671619] AI响应成功
2025-08-05 14:18:02,307 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 2/4: AI响应成功，耗时: 30.29秒, 成功: True
2025-08-05 14:18:02,307 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:18:02,307 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:18:02,307 - AIResponseProcessor - INFO - [583671619] 开始保存对话历史到内存和数据库
2025-08-05 14:18:02,308 - AIResponseProcessor - INFO - 消息 235 已添加到用户 583671619 的内存中
2025-08-05 14:18:02,308 - AIResponseProcessor - INFO - 消息 236 已添加到用户 583671619 的内存中
2025-08-05 14:18:02,308 - AIResponseProcessor - INFO - [583671619] 成功更新内存缓存，新增消息IDs: 235, 236
2025-08-05 14:18:02,308 - AIResponseProcessor - INFO - [583671619] 开始异步写入数据库...
2025-08-05 14:18:02,311 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:18:02,312 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:18:02,312 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:18:02,312 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:18:02,312 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:18:02,312 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:18:02,312 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:18:02,312 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:18:02,312 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:18:02,313 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:18:02,313 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:18:02,313 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:18:02,313 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:18:02,314 - database - INFO - Inserted document with id: 235
2025-08-05 14:18:02,314 - database - INFO - Inserted document with id: 236
2025-08-05 14:18:02,314 - AIResponseProcessor - ERROR - [583671619] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:18:02,316 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 3/4: 对话记录保存成功
2025-08-05 14:18:02,317 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:18:02,320 - app.api.v1.AIResponseProcessor - INFO - [583671619] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:18:02,323 - server - INFO - 🟢 [req_1754374652006] ====== 响应信息 ======
2025-08-05 14:18:02,323 - server - INFO - 🟢 [req_1754374652006] 状态码: 200
2025-08-05 14:18:02,323 - server - INFO - 🟢 [req_1754374652006] 处理时间: 30.307秒
2025-08-05 14:18:02,323 - server - INFO - 🟢 [req_1754374652006] ====== 响应头 ======
2025-08-05 14:18:02,323 - server - INFO - 🟢 [req_1754374652006] content-length: 342
2025-08-05 14:18:02,323 - server - INFO - 🟢 [req_1754374652006] content-type: application/json
2025-08-05 14:18:02,324 - server - INFO - 🟢 [req_1754374652006] ====== 响应体 ======
2025-08-05 14:18:02,324 - server - INFO - 🟢 [req_1754374652006] JSON响应: {
  "status": "success",
  "response": "独自安静的周末听起来很放松，这让我想到你可能很享受个人空间和宁静。那么，当你独自一人时，有没有什么特定的活动或爱好，是你特别喜欢用来享受这种安静的时光的？比如阅读、绘画、写作或者其他什么？",
  "summary": "",
  "error": null
}
2025-08-05 14:18:02,324 - server - INFO - 🟢 [req_1754374652006] ====== 响应后单例状态 ======
2025-08-05 14:18:02,325 - server - INFO - 🟢 [req_1754374652006] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:02,325 - server - INFO - 🟢 [req_1754374652006] ====== 请求完成 ======
2025-08-05 14:18:02,326 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:18:02,328 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:18:02,328 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:18:02,328 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:18:02,328 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:18:02,329 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:18:02,329 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:18:02,329 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:18:02,329 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:18:02,359 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:18:02,359 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:18:02,359 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:18:02,359 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:18:02,359 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:18:02,725 - AIResponseProcessor - INFO - AI聊天数据保存完成: 22/22 个聊天室, 236/236 条消息
2025-08-05 14:18:02,725 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:18:02,750 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:18:02,750 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:18:02,750 - server - INFO - 🔄 自动保存完成，耗时: 0.438秒
2025-08-05 14:18:04,027 - server - INFO - 🔵 [req_1754374684027] ====== 收到新请求 ======
2025-08-05 14:18:04,029 - server - INFO - 🔵 [req_1754374684027] 时间: 2025-08-05 14:18:04
2025-08-05 14:18:04,029 - server - INFO - 🔵 [req_1754374684027] 方法: POST
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] URL: http://localhost:8000/api/v1/UserManagement/create_new_user
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] 路径: /api/v1/UserManagement/create_new_user
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] 客户端IP: 127.0.0.1
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] ====== 请求前单例状态 ======
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] UserManagement: user_list(30), male_user_list(13), female_user_list(17), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] ====== 请求头 ======
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] host: localhost:8000
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] connection: close
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] content-length: 79
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] content-type: application/json
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] sec-ch-ua-mobile: ?0
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] accept: */*
2025-08-05 14:18:04,030 - server - INFO - 🔵 [req_1754374684027] origin: http://localhost:5173
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] sec-fetch-site: same-origin
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] sec-fetch-mode: cors
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] sec-fetch-dest: empty
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] referer: http://localhost:5173/
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] ====== 请求体 ======
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] 原始数据: b'{"telegram_user_name":"user_403928341","telegram_user_id":403928341,"gender":1}'
2025-08-05 14:18:04,031 - server - INFO - 🔵 [req_1754374684027] JSON数据: {
  "telegram_user_name": "user_403928341",
  "telegram_user_id": 403928341,
  "gender": 1
}
2025-08-05 14:18:04,034 - server - INFO - 🟢 [req_1754374684027] ====== 响应信息 ======
2025-08-05 14:18:04,034 - server - INFO - 🟢 [req_1754374684027] 状态码: 200
2025-08-05 14:18:04,035 - server - INFO - 🟢 [req_1754374684027] 处理时间: 0.003秒
2025-08-05 14:18:04,035 - server - INFO - 🟢 [req_1754374684027] ====== 响应头 ======
2025-08-05 14:18:04,036 - server - INFO - 🟢 [req_1754374684027] content-length: 36
2025-08-05 14:18:04,036 - server - INFO - 🟢 [req_1754374684027] content-type: application/json
2025-08-05 14:18:04,037 - server - INFO - 🟢 [req_1754374684027] ====== 响应体 ======
2025-08-05 14:18:04,038 - server - INFO - 🟢 [req_1754374684027] JSON响应: {
  "success": true,
  "user_id": 403928341
}
2025-08-05 14:18:04,038 - server - INFO - 🟢 [req_1754374684027] ====== 响应后单例状态 ======
2025-08-05 14:18:04,038 - server - INFO - 🟢 [req_1754374684027] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,038 - server - INFO - 🟢 [req_1754374684027] ====== 请求完成 ======
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] ====== 收到新请求 ======
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] 时间: 2025-08-05 14:18:04
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] 方法: POST
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] URL: http://localhost:8000/api/v1/UserManagement/edit_user_age
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] 路径: /api/v1/UserManagement/edit_user_age
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] 客户端IP: 127.0.0.1
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] ====== 请求前单例状态 ======
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,043 - server - INFO - 🔵 [req_1754374684043] ====== 请求头 ======
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] host: localhost:8000
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] connection: close
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] content-length: 32
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] content-type: application/json
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] sec-ch-ua-mobile: ?0
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] accept: */*
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] origin: http://localhost:5173
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] sec-fetch-site: same-origin
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] sec-fetch-mode: cors
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] sec-fetch-dest: empty
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] referer: http://localhost:5173/
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] ====== 请求体 ======
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] 原始数据: b'{"user_id":403928341,"age":3333}'
2025-08-05 14:18:04,044 - server - INFO - 🔵 [req_1754374684043] JSON数据: {
  "user_id": 403928341,
  "age": 3333
}
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] ====== 响应信息 ======
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] 状态码: 200
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] 处理时间: 0.000秒
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] ====== 响应头 ======
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] content-length: 16
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] content-type: application/json
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] ====== 响应体 ======
2025-08-05 14:18:04,045 - server - INFO - 🟢 [req_1754374684043] JSON响应: {
  "success": true
}
2025-08-05 14:18:04,046 - server - INFO - 🟢 [req_1754374684043] ====== 响应后单例状态 ======
2025-08-05 14:18:04,046 - server - INFO - 🟢 [req_1754374684043] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,046 - server - INFO - 🟢 [req_1754374684043] ====== 请求完成 ======
2025-08-05 14:18:04,068 - server - INFO - 🔵 [req_1754374684068] ====== 收到新请求 ======
2025-08-05 14:18:04,068 - server - INFO - 🔵 [req_1754374684068] 时间: 2025-08-05 14:18:04
2025-08-05 14:18:04,069 - server - INFO - 🔵 [req_1754374684068] 方法: POST
2025-08-05 14:18:04,069 - server - INFO - 🔵 [req_1754374684068] URL: http://localhost:8000/api/v1/ai/history
2025-08-05 14:18:04,069 - server - INFO - 🔵 [req_1754374684068] 路径: /api/v1/ai/history
2025-08-05 14:18:04,070 - server - INFO - 🔵 [req_1754374684068] 客户端IP: 127.0.0.1
2025-08-05 14:18:04,070 - server - INFO - 🔵 [req_1754374684068] ====== 请求前单例状态 ======
2025-08-05 14:18:04,070 - server - INFO - 🔵 [req_1754374684068] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,070 - server - INFO - 🔵 [req_1754374684068] ====== 请求头 ======
2025-08-05 14:18:04,070 - server - INFO - 🔵 [req_1754374684068] host: localhost:8000
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] connection: close
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] content-length: 21
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] content-type: application/json
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] sec-ch-ua-mobile: ?0
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] accept: */*
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] origin: http://localhost:5173
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] sec-fetch-site: same-origin
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] sec-fetch-mode: cors
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] sec-fetch-dest: empty
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] referer: http://localhost:5173/chat
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] ====== 请求体 ======
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] 原始数据: b'{"user_id":403928341}'
2025-08-05 14:18:04,071 - server - INFO - 🔵 [req_1754374684068] JSON数据: {
  "user_id": 403928341
}
2025-08-05 14:18:04,072 - app.api.v1.AIResponseProcessor - INFO - 开始获取用户 403928341 的AI聊天历史
2025-08-05 14:18:04,073 - AIResponseProcessor - INFO - [403928341] 开始从内存中获取对话历史
2025-08-05 14:18:04,073 - AIResponseProcessor - INFO - [403928341] 用户 403928341 在内存中没有AI聊天记录
2025-08-05 14:18:04,073 - app.api.v1.AIResponseProcessor - INFO - 成功获取用户 403928341 的AI聊天历史，共 0 条记录
2025-08-05 14:18:04,073 - server - INFO - 🟢 [req_1754374684068] ====== 响应信息 ======
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] 状态码: 200
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] 处理时间: 0.002秒
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] ====== 响应头 ======
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] content-length: 43
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] content-type: application/json
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] ====== 响应体 ======
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] JSON响应: {
  "status": "success",
  "data": [],
  "error": null
}
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] ====== 响应后单例状态 ======
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,074 - server - INFO - 🟢 [req_1754374684068] ====== 请求完成 ======
2025-08-05 14:18:04,078 - server - INFO - 🔵 [req_1754374684078] ====== 收到新请求 ======
2025-08-05 14:18:04,078 - server - INFO - 🔵 [req_1754374684078] 时间: 2025-08-05 14:18:04
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] 方法: POST
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] 路径: /api/v1/ai/chat
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] 客户端IP: 127.0.0.1
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] ====== 请求前单例状态 ======
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:04,079 - server - INFO - 🔵 [req_1754374684078] ====== 请求头 ======
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] host: localhost:8000
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] connection: close
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] content-length: 70
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] content-type: application/json
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] sec-ch-ua-mobile: ?0
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] accept: */*
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] origin: http://localhost:5173
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] sec-fetch-site: same-origin
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] sec-fetch-mode: cors
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] sec-fetch-dest: empty
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] referer: http://localhost:5173/chat
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] ====== 请求体 ======
2025-08-05 14:18:04,080 - server - INFO - 🔵 [req_1754374684078] 原始数据: b'{"user_id":403928341,"message":"\xe4\xbd\xa0\xe5\xa5\xbd\xef\xbc\x8c\xe6\x88\x91\xe6\x83\xb3\xe5\xbc\x80\xe5\xa7\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xaf\xb9\xe8\xaf\x9d"}'
2025-08-05 14:18:04,081 - server - INFO - 🔵 [req_1754374684078] JSON数据: {
  "user_id": 403928341,
  "message": "你好，我想开始我们的对话"
}
2025-08-05 14:18:04,082 - app.api.v1.AIResponseProcessor - INFO - [403928341] 收到新的AI聊天请求: message='你好，我想开始我们的对话'
2025-08-05 14:18:04,082 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:18:04,082 - AIResponseProcessor - INFO - [403928341] 开始从内存中获取对话历史
2025-08-05 14:18:04,082 - AIResponseProcessor - INFO - [403928341] 用户 403928341 在内存中没有AI聊天记录
2025-08-05 14:18:04,082 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 1/4: 获取到 0 条历史记录
2025-08-05 14:18:04,082 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:18:04,082 - KimiInteractionAPI - INFO - [403928341] 开始处理用户消息: 你好，我想开始我们的对话...
2025-08-05 14:18:04,082 - KimiInteractionAPI - INFO - [403928341] 发送请求到Kimi API
2025-08-05 14:18:04,082 - KimiInteractionAPI - INFO - [403928341] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:18:06,128 - KimiInteractionAPI - INFO - [403928341] 请求成功, 状态码: 200
2025-08-05 14:18:06,129 - KimiInteractionAPI - INFO - [403928341] AI响应成功
2025-08-05 14:18:06,130 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 2/4: AI响应成功，耗时: 2.05秒, 成功: True
2025-08-05 14:18:06,130 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:18:06,130 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:18:06,130 - AIResponseProcessor - INFO - [403928341] 开始保存对话历史到内存和数据库
2025-08-05 14:18:06,131 - AIResponseProcessor - INFO - 消息 237 已添加到用户 403928341 的内存中
2025-08-05 14:18:06,131 - AIResponseProcessor - INFO - 消息 238 已添加到用户 403928341 的内存中
2025-08-05 14:18:06,131 - AIResponseProcessor - INFO - [403928341] 成功更新内存缓存，新增消息IDs: 237, 238
2025-08-05 14:18:06,131 - AIResponseProcessor - INFO - [403928341] 开始异步写入数据库...
2025-08-05 14:18:06,133 - database - INFO - Inserted document with id: 237
2025-08-05 14:18:06,134 - database - INFO - Inserted document with id: 238
2025-08-05 14:18:06,135 - AIResponseProcessor - ERROR - [403928341] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:18:06,137 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 对话记录保存成功
2025-08-05 14:18:06,137 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:18:06,137 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:18:06,138 - server - INFO - 🟢 [req_1754374684078] ====== 响应信息 ======
2025-08-05 14:18:06,138 - server - INFO - 🟢 [req_1754374684078] 状态码: 200
2025-08-05 14:18:06,138 - server - INFO - 🟢 [req_1754374684078] 处理时间: 2.057秒
2025-08-05 14:18:06,138 - server - INFO - 🟢 [req_1754374684078] ====== 响应头 ======
2025-08-05 14:18:06,139 - server - INFO - 🟢 [req_1754374684078] content-length: 352
2025-08-05 14:18:06,139 - server - INFO - 🟢 [req_1754374684078] content-type: application/json
2025-08-05 14:18:06,139 - server - INFO - 🟢 [req_1754374684078] ====== 响应体 ======
2025-08-05 14:18:06,140 - server - INFO - 🟢 [req_1754374684078] JSON响应: {
  "status": "success",
  "response": "你好！非常高兴你决定开始这次对话。让我们从一些轻松的话题开始探索吧。你最近有没有和朋友们一起做过什么让你感到特别开心的事情？可以是任何小事，比如一起看电影、去徒步旅行，或者是一起尝试新的餐厅。🌟",
  "summary": "",
  "error": null
}
2025-08-05 14:18:06,140 - server - INFO - 🟢 [req_1754374684078] ====== 响应后单例状态 ======
2025-08-05 14:18:06,140 - server - INFO - 🟢 [req_1754374684078] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:06,140 - server - INFO - 🟢 [req_1754374684078] ====== 请求完成 ======
2025-08-05 14:18:12,750 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:18:12,754 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:18:12,758 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:18:12,763 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:18:12,765 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:18:12,765 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:18:12,765 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:18:12,766 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:18:12,766 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:18:12,766 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:18:12,766 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:18:12,766 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:18:12,766 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:18:12,769 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:18:12,770 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:18:12,770 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:18:12,770 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:18:12,770 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:18:12,772 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:18:12,772 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:18:12,772 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:18:12,772 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:18:12,802 - database - INFO - Inserted document with id: 403928341
2025-08-05 14:18:12,802 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:18:12,803 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:18:12,803 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:18:12,803 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:18:12,803 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:18:12,833 - database - INFO - Inserted document with id: 6891a22459a202dbd20958ab
2025-08-05 14:18:13,241 - AIResponseProcessor - INFO - AI聊天数据保存完成: 23/23 个聊天室, 238/238 条消息
2025-08-05 14:18:13,242 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:18:13,255 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:18:13,255 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:18:13,255 - server - INFO - 🔄 自动保存完成，耗时: 0.504秒
2025-08-05 14:18:16,736 - server - INFO - 🔵 [req_1754374696736] ====== 收到新请求 ======
2025-08-05 14:18:16,737 - server - INFO - 🔵 [req_1754374696736] 时间: 2025-08-05 14:18:16
2025-08-05 14:18:16,738 - server - INFO - 🔵 [req_1754374696736] 方法: POST
2025-08-05 14:18:16,738 - server - INFO - 🔵 [req_1754374696736] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:18:16,740 - server - INFO - 🔵 [req_1754374696736] 路径: /api/v1/ai/chat
2025-08-05 14:18:16,740 - server - INFO - 🔵 [req_1754374696736] 客户端IP: 127.0.0.1
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] ====== 请求前单例状态 ======
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] ====== 请求头 ======
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] host: localhost:8000
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] connection: close
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] content-length: 49
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:16,751 - server - INFO - 🔵 [req_1754374696736] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:16,752 - server - INFO - 🔵 [req_1754374696736] content-type: application/json
2025-08-05 14:18:16,752 - server - INFO - 🔵 [req_1754374696736] sec-ch-ua-mobile: ?0
2025-08-05 14:18:16,752 - server - INFO - 🔵 [req_1754374696736] accept: */*
2025-08-05 14:18:16,752 - server - INFO - 🔵 [req_1754374696736] origin: http://localhost:5173
2025-08-05 14:18:16,752 - server - INFO - 🔵 [req_1754374696736] sec-fetch-site: same-origin
2025-08-05 14:18:16,752 - server - INFO - 🔵 [req_1754374696736] sec-fetch-mode: cors
2025-08-05 14:18:16,753 - server - INFO - 🔵 [req_1754374696736] sec-fetch-dest: empty
2025-08-05 14:18:16,753 - server - INFO - 🔵 [req_1754374696736] referer: http://localhost:5173/chat
2025-08-05 14:18:16,753 - server - INFO - 🔵 [req_1754374696736] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:16,753 - server - INFO - 🔵 [req_1754374696736] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:16,754 - server - INFO - 🔵 [req_1754374696736] ====== 请求体 ======
2025-08-05 14:18:16,754 - server - INFO - 🔵 [req_1754374696736] 原始数据: b'{"user_id":403928341,"message":"\xe4\xb8\x80\xe8\xb5\xb7\xe7\x9c\x8b\xe7\x94\xb5\xe5\xbd\xb1"}'
2025-08-05 14:18:16,754 - server - INFO - 🔵 [req_1754374696736] JSON数据: {
  "user_id": 403928341,
  "message": "一起看电影"
}
2025-08-05 14:18:16,757 - app.api.v1.AIResponseProcessor - INFO - [403928341] 收到新的AI聊天请求: message='一起看电影'
2025-08-05 14:18:16,757 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:18:16,757 - AIResponseProcessor - INFO - [403928341] 开始从内存中获取对话历史
2025-08-05 14:18:16,758 - AIResponseProcessor - INFO - [403928341] 成功从内存获取到 2 条历史记录
2025-08-05 14:18:16,758 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 1/4: 获取到 2 条历史记录
2025-08-05 14:18:16,758 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:18:16,758 - KimiInteractionAPI - INFO - [403928341] 开始处理用户消息: 一起看电影...
2025-08-05 14:18:16,758 - KimiInteractionAPI - INFO - [403928341] 发送请求到Kimi API
2025-08-05 14:18:16,758 - KimiInteractionAPI - INFO - [403928341] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:18:18,717 - KimiInteractionAPI - INFO - [403928341] 请求成功, 状态码: 200
2025-08-05 14:18:18,717 - KimiInteractionAPI - INFO - [403928341] AI响应成功
2025-08-05 14:18:18,718 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 2/4: AI响应成功，耗时: 1.96秒, 成功: True
2025-08-05 14:18:18,718 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:18:18,719 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:18:18,719 - AIResponseProcessor - INFO - [403928341] 开始保存对话历史到内存和数据库
2025-08-05 14:18:18,719 - AIResponseProcessor - INFO - 消息 239 已添加到用户 403928341 的内存中
2025-08-05 14:18:18,719 - AIResponseProcessor - INFO - 消息 240 已添加到用户 403928341 的内存中
2025-08-05 14:18:18,720 - AIResponseProcessor - INFO - [403928341] 成功更新内存缓存，新增消息IDs: 239, 240
2025-08-05 14:18:18,720 - AIResponseProcessor - INFO - [403928341] 开始异步写入数据库...
2025-08-05 14:18:18,723 - database - INFO - Inserted document with id: 239
2025-08-05 14:18:18,726 - database - INFO - Inserted document with id: 240
2025-08-05 14:18:18,726 - AIResponseProcessor - ERROR - [403928341] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:18:18,727 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 对话记录保存成功
2025-08-05 14:18:18,727 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:18:18,727 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] ====== 响应信息 ======
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] 状态码: 200
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] 处理时间: 1.973秒
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] ====== 响应头 ======
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] content-length: 295
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] content-type: application/json
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] ====== 响应体 ======
2025-08-05 14:18:18,728 - server - INFO - 🟢 [req_1754374696736] JSON响应: {
  "status": "success",
  "response": "听起来很有趣！一起看电影是一种很棒的共享体验。在和朋友一起看电影时，你最喜欢哪种类型的电影？是喜欢那些能带来紧张刺激的大片，还是更倾向于温馨治愈的文艺片？🎬",
  "summary": "",
  "error": null
}
2025-08-05 14:18:18,729 - server - INFO - 🟢 [req_1754374696736] ====== 响应后单例状态 ======
2025-08-05 14:18:18,729 - server - INFO - 🟢 [req_1754374696736] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:18,729 - server - INFO - 🟢 [req_1754374696736] ====== 请求完成 ======
2025-08-05 14:18:23,257 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:18:23,258 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:18:23,259 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:18:23,259 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:18:23,259 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:18:23,259 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:18:23,259 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:18:23,260 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:18:23,263 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:18:23,270 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:18:23,270 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:18:23,270 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:18:23,270 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:18:23,272 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:18:23,274 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:18:23,274 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:18:23,274 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:18:23,274 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:18:23,275 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:18:23,275 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:18:23,275 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:18:23,275 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:18:23,303 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:18:23,304 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:18:23,304 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:18:23,304 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:18:23,304 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:18:23,778 - AIResponseProcessor - INFO - AI聊天数据保存完成: 23/23 个聊天室, 240/240 条消息
2025-08-05 14:18:23,779 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:18:23,798 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:18:23,798 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:18:23,798 - server - INFO - 🔄 自动保存完成，耗时: 0.540秒
2025-08-05 14:18:33,800 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:18:33,803 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:18:33,804 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:18:33,804 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:18:33,804 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:18:33,804 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:18:33,804 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:18:33,805 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:18:33,805 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:18:33,805 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:18:33,805 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:18:33,805 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:18:33,805 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:18:33,817 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:18:33,819 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:18:33,819 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:18:33,819 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:18:33,819 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:18:33,820 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:18:33,820 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:18:33,821 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:18:33,821 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:18:33,851 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:18:33,851 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:18:33,852 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:18:33,852 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:18:33,852 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:18:34,209 - AIResponseProcessor - INFO - AI聊天数据保存完成: 23/23 个聊天室, 240/240 条消息
2025-08-05 14:18:34,209 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:18:34,241 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:18:34,242 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:18:34,242 - server - INFO - 🔄 自动保存完成，耗时: 0.439秒
2025-08-05 14:18:34,565 - server - INFO - 🔵 [req_1754374714565] ====== 收到新请求 ======
2025-08-05 14:18:34,566 - server - INFO - 🔵 [req_1754374714565] 时间: 2025-08-05 14:18:34
2025-08-05 14:18:34,566 - server - INFO - 🔵 [req_1754374714565] 方法: POST
2025-08-05 14:18:34,566 - server - INFO - 🔵 [req_1754374714565] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:18:34,566 - server - INFO - 🔵 [req_1754374714565] 路径: /api/v1/ai/chat
2025-08-05 14:18:34,566 - server - INFO - 🔵 [req_1754374714565] 客户端IP: 127.0.0.1
2025-08-05 14:18:34,567 - server - INFO - 🔵 [req_1754374714565] ====== 请求前单例状态 ======
2025-08-05 14:18:34,567 - server - INFO - 🔵 [req_1754374714565] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:34,567 - server - INFO - 🔵 [req_1754374714565] ====== 请求头 ======
2025-08-05 14:18:34,567 - server - INFO - 🔵 [req_1754374714565] host: localhost:8000
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] connection: close
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] content-length: 61
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] content-type: application/json
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] sec-ch-ua-mobile: ?0
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] accept: */*
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] origin: http://localhost:5173
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] sec-fetch-site: same-origin
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] sec-fetch-mode: cors
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] sec-fetch-dest: empty
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] referer: http://localhost:5173/chat
2025-08-05 14:18:34,568 - server - INFO - 🔵 [req_1754374714565] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:34,569 - server - INFO - 🔵 [req_1754374714565] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:34,569 - server - INFO - 🔵 [req_1754374714565] ====== 请求体 ======
2025-08-05 14:18:34,570 - server - INFO - 🔵 [req_1754374714565] 原始数据: b'{"user_id":403928341,"message":"\xe7\xb4\xa7\xe5\xbc\xa0\xe5\x88\xba\xe6\xbf\x80\xe7\x9a\x84\xe6\x96\x87\xe8\x89\xba\xe5\xa4\xa7\xe7\x89\x87"}'
2025-08-05 14:18:34,573 - server - INFO - 🔵 [req_1754374714565] JSON数据: {
  "user_id": 403928341,
  "message": "紧张刺激的文艺大片"
}
2025-08-05 14:18:34,581 - app.api.v1.AIResponseProcessor - INFO - [403928341] 收到新的AI聊天请求: message='紧张刺激的文艺大片'
2025-08-05 14:18:34,581 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:18:34,581 - AIResponseProcessor - INFO - [403928341] 开始从内存中获取对话历史
2025-08-05 14:18:34,582 - AIResponseProcessor - INFO - [403928341] 成功从内存获取到 4 条历史记录
2025-08-05 14:18:34,582 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 1/4: 获取到 4 条历史记录
2025-08-05 14:18:34,582 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:18:34,582 - KimiInteractionAPI - INFO - [403928341] 开始处理用户消息: 紧张刺激的文艺大片...
2025-08-05 14:18:34,582 - KimiInteractionAPI - INFO - [403928341] 发送请求到Kimi API
2025-08-05 14:18:34,582 - KimiInteractionAPI - INFO - [403928341] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:18:34,732 - KimiInteractionAPI - INFO - [403928341] 请求成功, 状态码: 429
2025-08-05 14:18:34,732 - KimiInteractionAPI - ERROR - [403928341] Kimi API调用失败 (尝试 1/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:18:34,738 - KimiInteractionAPI - INFO - [403928341] 等待 2秒后重试...
2025-08-05 14:18:36,744 - KimiInteractionAPI - INFO - [403928341] 尝试第 2/3 次请求Kimi API...
2025-08-05 14:18:36,912 - KimiInteractionAPI - INFO - [403928341] 请求成功, 状态码: 429
2025-08-05 14:18:36,913 - KimiInteractionAPI - ERROR - [403928341] Kimi API调用失败 (尝试 2/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:18:36,914 - KimiInteractionAPI - INFO - [403928341] 等待 4秒后重试...
2025-08-05 14:18:40,916 - KimiInteractionAPI - INFO - [403928341] 尝试第 3/3 次请求Kimi API...
2025-08-05 14:18:41,103 - KimiInteractionAPI - INFO - [403928341] 请求成功, 状态码: 429
2025-08-05 14:18:41,104 - KimiInteractionAPI - ERROR - [403928341] Kimi API调用失败 (尝试 3/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:18:41,105 - KimiInteractionAPI - ERROR - [403928341] Kimi API调用最终失败, 已达到最大重试次数 3
2025-08-05 14:18:41,105 - KimiInteractionAPI - ERROR - [403928341] 处理用户消息失败: Kimi API调用最终失败, 已达到最大重试次数 3
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 130, in send_message_to_ai
    response_json = self._make_api_request(request_data, user_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 218, in _make_api_request
    raise Exception(f"Kimi API调用最终失败, 已达到最大重试次数 {self.max_retries}")
Exception: Kimi API调用最终失败, 已达到最大重试次数 3
2025-08-05 14:18:41,105 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 2/4: AI响应成功，耗时: 6.52秒, 成功: True
2025-08-05 14:18:41,105 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:18:41,105 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:18:41,105 - AIResponseProcessor - INFO - [403928341] 开始保存对话历史到内存和数据库
2025-08-05 14:18:41,105 - AIResponseProcessor - INFO - 消息 241 已添加到用户 403928341 的内存中
2025-08-05 14:18:41,105 - AIResponseProcessor - INFO - 消息 242 已添加到用户 403928341 的内存中
2025-08-05 14:18:41,105 - AIResponseProcessor - INFO - [403928341] 成功更新内存缓存，新增消息IDs: 241, 242
2025-08-05 14:18:41,105 - AIResponseProcessor - INFO - [403928341] 开始异步写入数据库...
2025-08-05 14:18:41,109 - database - INFO - Inserted document with id: 241
2025-08-05 14:18:41,109 - database - INFO - Inserted document with id: 242
2025-08-05 14:18:41,109 - AIResponseProcessor - ERROR - [403928341] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:18:41,109 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 3/4: 对话记录保存成功
2025-08-05 14:18:41,109 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:18:41,110 - app.api.v1.AIResponseProcessor - INFO - [403928341] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:18:41,110 - server - INFO - 🟢 [req_1754374714565] ====== 响应信息 ======
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] 状态码: 200
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] 处理时间: 6.537秒
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] ====== 响应头 ======
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] content-length: 153
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] content-type: application/json
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] ====== 响应体 ======
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] JSON响应: {
  "status": "success",
  "response": "抱歉，我现在遇到了一些技术问题。请稍后再试，或者重新开始对话。",
  "summary": "",
  "error": null
}
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] ====== 响应后单例状态 ======
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:41,111 - server - INFO - 🟢 [req_1754374714565] ====== 请求完成 ======
2025-08-05 14:18:44,243 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:18:44,244 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:18:44,244 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:18:44,244 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:18:44,244 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:18:44,245 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:18:44,245 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:18:44,245 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:18:44,245 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:18:44,246 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:18:44,246 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:18:44,246 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:18:44,246 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:18:44,249 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:18:44,251 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:18:44,252 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:18:44,252 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:18:44,252 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:18:44,253 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:18:44,253 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:18:44,254 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:18:44,254 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:18:44,295 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:18:44,296 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:18:44,296 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:18:44,296 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:18:44,296 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:18:44,840 - AIResponseProcessor - INFO - AI聊天数据保存完成: 23/23 个聊天室, 242/242 条消息
2025-08-05 14:18:44,840 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:18:44,848 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:18:44,848 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:18:44,849 - server - INFO - 🔄 自动保存完成，耗时: 0.605秒
2025-08-05 14:18:53,248 - server - INFO - 🔵 [req_1754374733247] ====== 收到新请求 ======
2025-08-05 14:18:53,250 - server - INFO - 🔵 [req_1754374733247] 时间: 2025-08-05 14:18:53
2025-08-05 14:18:53,250 - server - INFO - 🔵 [req_1754374733247] 方法: POST
2025-08-05 14:18:53,250 - server - INFO - 🔵 [req_1754374733247] URL: http://localhost:8000/api/v1/UserManagement/create_new_user
2025-08-05 14:18:53,250 - server - INFO - 🔵 [req_1754374733247] 路径: /api/v1/UserManagement/create_new_user
2025-08-05 14:18:53,251 - server - INFO - 🔵 [req_1754374733247] 客户端IP: 127.0.0.1
2025-08-05 14:18:53,251 - server - INFO - 🔵 [req_1754374733247] ====== 请求前单例状态 ======
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] UserManagement: user_list(31), male_user_list(13), female_user_list(18), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] ====== 请求头 ======
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] host: localhost:8000
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] connection: close
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] content-length: 79
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] content-type: application/json
2025-08-05 14:18:53,252 - server - INFO - 🔵 [req_1754374733247] sec-ch-ua-mobile: ?0
2025-08-05 14:18:53,253 - server - INFO - 🔵 [req_1754374733247] accept: */*
2025-08-05 14:18:53,253 - server - INFO - 🔵 [req_1754374733247] origin: http://localhost:5173
2025-08-05 14:18:53,253 - server - INFO - 🔵 [req_1754374733247] sec-fetch-site: same-origin
2025-08-05 14:18:53,254 - server - INFO - 🔵 [req_1754374733247] sec-fetch-mode: cors
2025-08-05 14:18:53,254 - server - INFO - 🔵 [req_1754374733247] sec-fetch-dest: empty
2025-08-05 14:18:53,254 - server - INFO - 🔵 [req_1754374733247] referer: http://localhost:5173/
2025-08-05 14:18:53,254 - server - INFO - 🔵 [req_1754374733247] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:53,254 - server - INFO - 🔵 [req_1754374733247] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:53,257 - server - INFO - 🔵 [req_1754374733247] ====== 请求体 ======
2025-08-05 14:18:53,258 - server - INFO - 🔵 [req_1754374733247] 原始数据: b'{"telegram_user_name":"user_585972142","telegram_user_id":585972142,"gender":1}'
2025-08-05 14:18:53,259 - server - INFO - 🔵 [req_1754374733247] JSON数据: {
  "telegram_user_name": "user_585972142",
  "telegram_user_id": 585972142,
  "gender": 1
}
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] ====== 响应信息 ======
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] 状态码: 200
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] 处理时间: 0.009秒
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] ====== 响应头 ======
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] content-length: 36
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] content-type: application/json
2025-08-05 14:18:53,269 - server - INFO - 🟢 [req_1754374733247] ====== 响应体 ======
2025-08-05 14:18:53,270 - server - INFO - 🟢 [req_1754374733247] JSON响应: {
  "success": true,
  "user_id": 585972142
}
2025-08-05 14:18:53,270 - server - INFO - 🟢 [req_1754374733247] ====== 响应后单例状态 ======
2025-08-05 14:18:53,270 - server - INFO - 🟢 [req_1754374733247] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,270 - server - INFO - 🟢 [req_1754374733247] ====== 请求完成 ======
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] ====== 收到新请求 ======
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] 时间: 2025-08-05 14:18:53
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] 方法: POST
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] URL: http://localhost:8000/api/v1/UserManagement/edit_user_age
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] 路径: /api/v1/UserManagement/edit_user_age
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] 客户端IP: 127.0.0.1
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] ====== 请求前单例状态 ======
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] ====== 请求头 ======
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] host: localhost:8000
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] connection: close
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] content-length: 35
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] content-type: application/json
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] sec-ch-ua-mobile: ?0
2025-08-05 14:18:53,275 - server - INFO - 🔵 [req_1754374733275] accept: */*
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] origin: http://localhost:5173
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] sec-fetch-site: same-origin
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] sec-fetch-mode: cors
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] sec-fetch-dest: empty
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] referer: http://localhost:5173/
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] ====== 请求体 ======
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] 原始数据: b'{"user_id":585972142,"age":2121314}'
2025-08-05 14:18:53,276 - server - INFO - 🔵 [req_1754374733275] JSON数据: {
  "user_id": 585972142,
  "age": 2121314
}
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] ====== 响应信息 ======
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] 状态码: 200
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] 处理时间: 0.000秒
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] ====== 响应头 ======
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] content-length: 16
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] content-type: application/json
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] ====== 响应体 ======
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] JSON响应: {
  "success": true
}
2025-08-05 14:18:53,276 - server - INFO - 🟢 [req_1754374733275] ====== 响应后单例状态 ======
2025-08-05 14:18:53,277 - server - INFO - 🟢 [req_1754374733275] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,277 - server - INFO - 🟢 [req_1754374733275] ====== 请求完成 ======
2025-08-05 14:18:53,301 - server - INFO - 🔵 [req_1754374733301] ====== 收到新请求 ======
2025-08-05 14:18:53,301 - server - INFO - 🔵 [req_1754374733301] 时间: 2025-08-05 14:18:53
2025-08-05 14:18:53,301 - server - INFO - 🔵 [req_1754374733301] 方法: POST
2025-08-05 14:18:53,301 - server - INFO - 🔵 [req_1754374733301] URL: http://localhost:8000/api/v1/ai/history
2025-08-05 14:18:53,301 - server - INFO - 🔵 [req_1754374733301] 路径: /api/v1/ai/history
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] 客户端IP: 127.0.0.1
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] ====== 请求前单例状态 ======
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] ====== 请求头 ======
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] host: localhost:8000
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] connection: close
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] content-length: 21
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] content-type: application/json
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] sec-ch-ua-mobile: ?0
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] accept: */*
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] origin: http://localhost:5173
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] sec-fetch-site: same-origin
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] sec-fetch-mode: cors
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] sec-fetch-dest: empty
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] referer: http://localhost:5173/chat
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:53,302 - server - INFO - 🔵 [req_1754374733301] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:53,303 - server - INFO - 🔵 [req_1754374733301] ====== 请求体 ======
2025-08-05 14:18:53,303 - server - INFO - 🔵 [req_1754374733301] 原始数据: b'{"user_id":585972142}'
2025-08-05 14:18:53,303 - server - INFO - 🔵 [req_1754374733301] JSON数据: {
  "user_id": 585972142
}
2025-08-05 14:18:53,309 - app.api.v1.AIResponseProcessor - INFO - 开始获取用户 585972142 的AI聊天历史
2025-08-05 14:18:53,309 - AIResponseProcessor - INFO - [585972142] 开始从内存中获取对话历史
2025-08-05 14:18:53,310 - AIResponseProcessor - INFO - [585972142] 用户 585972142 在内存中没有AI聊天记录
2025-08-05 14:18:53,310 - app.api.v1.AIResponseProcessor - INFO - 成功获取用户 585972142 的AI聊天历史，共 0 条记录
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] ====== 响应信息 ======
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] 状态码: 200
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] 处理时间: 0.007秒
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] ====== 响应头 ======
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] content-length: 43
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] content-type: application/json
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] ====== 响应体 ======
2025-08-05 14:18:53,310 - server - INFO - 🟢 [req_1754374733301] JSON响应: {
  "status": "success",
  "data": [],
  "error": null
}
2025-08-05 14:18:53,311 - server - INFO - 🟢 [req_1754374733301] ====== 响应后单例状态 ======
2025-08-05 14:18:53,311 - server - INFO - 🟢 [req_1754374733301] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,311 - server - INFO - 🟢 [req_1754374733301] ====== 请求完成 ======
2025-08-05 14:18:53,320 - server - INFO - 🔵 [req_1754374733320] ====== 收到新请求 ======
2025-08-05 14:18:53,320 - server - INFO - 🔵 [req_1754374733320] 时间: 2025-08-05 14:18:53
2025-08-05 14:18:53,320 - server - INFO - 🔵 [req_1754374733320] 方法: POST
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] 路径: /api/v1/ai/chat
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] 客户端IP: 127.0.0.1
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] ====== 请求前单例状态 ======
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] ====== 请求头 ======
2025-08-05 14:18:53,321 - server - INFO - 🔵 [req_1754374733320] host: localhost:8000
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] connection: close
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] content-length: 70
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] sec-ch-ua-platform: "macOS"
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] content-type: application/json
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] sec-ch-ua-mobile: ?0
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] accept: */*
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] origin: http://localhost:5173
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] sec-fetch-site: same-origin
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] sec-fetch-mode: cors
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] sec-fetch-dest: empty
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] referer: http://localhost:5173/chat
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] ====== 请求体 ======
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] 原始数据: b'{"user_id":585972142,"message":"\xe4\xbd\xa0\xe5\xa5\xbd\xef\xbc\x8c\xe6\x88\x91\xe6\x83\xb3\xe5\xbc\x80\xe5\xa7\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xaf\xb9\xe8\xaf\x9d"}'
2025-08-05 14:18:53,322 - server - INFO - 🔵 [req_1754374733320] JSON数据: {
  "user_id": 585972142,
  "message": "你好，我想开始我们的对话"
}
2025-08-05 14:18:53,324 - app.api.v1.AIResponseProcessor - INFO - [585972142] 收到新的AI聊天请求: message='你好，我想开始我们的对话'
2025-08-05 14:18:53,324 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:18:53,324 - AIResponseProcessor - INFO - [585972142] 开始从内存中获取对话历史
2025-08-05 14:18:53,324 - AIResponseProcessor - INFO - [585972142] 用户 585972142 在内存中没有AI聊天记录
2025-08-05 14:18:53,324 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 1/4: 获取到 0 条历史记录
2025-08-05 14:18:53,324 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:18:53,324 - KimiInteractionAPI - INFO - [585972142] 开始处理用户消息: 你好，我想开始我们的对话...
2025-08-05 14:18:53,324 - KimiInteractionAPI - INFO - [585972142] 发送请求到Kimi API
2025-08-05 14:18:53,324 - KimiInteractionAPI - INFO - [585972142] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:18:53,432 - KimiInteractionAPI - INFO - [585972142] 请求成功, 状态码: 429
2025-08-05 14:18:53,432 - KimiInteractionAPI - ERROR - [585972142] Kimi API调用失败 (尝试 1/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:18:53,434 - KimiInteractionAPI - INFO - [585972142] 等待 2秒后重试...
2025-08-05 14:18:55,436 - KimiInteractionAPI - INFO - [585972142] 尝试第 2/3 次请求Kimi API...
2025-08-05 14:18:55,604 - KimiInteractionAPI - INFO - [585972142] 请求成功, 状态码: 429
2025-08-05 14:18:55,607 - KimiInteractionAPI - ERROR - [585972142] Kimi API调用失败 (尝试 2/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:18:55,611 - KimiInteractionAPI - INFO - [585972142] 等待 4秒后重试...
2025-08-05 14:18:59,617 - KimiInteractionAPI - INFO - [585972142] 尝试第 3/3 次请求Kimi API...
2025-08-05 14:18:59,793 - KimiInteractionAPI - INFO - [585972142] 请求成功, 状态码: 429
2025-08-05 14:18:59,794 - KimiInteractionAPI - ERROR - [585972142] Kimi API调用失败 (尝试 3/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:18:59,799 - KimiInteractionAPI - ERROR - [585972142] Kimi API调用最终失败, 已达到最大重试次数 3
2025-08-05 14:18:59,799 - KimiInteractionAPI - ERROR - [585972142] 处理用户消息失败: Kimi API调用最终失败, 已达到最大重试次数 3
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 130, in send_message_to_ai
    response_json = self._make_api_request(request_data, user_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 218, in _make_api_request
    raise Exception(f"Kimi API调用最终失败, 已达到最大重试次数 {self.max_retries}")
Exception: Kimi API调用最终失败, 已达到最大重试次数 3
2025-08-05 14:18:59,801 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 2/4: AI响应成功，耗时: 6.48秒, 成功: True
2025-08-05 14:18:59,801 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:18:59,801 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:18:59,801 - AIResponseProcessor - INFO - [585972142] 开始保存对话历史到内存和数据库
2025-08-05 14:18:59,801 - AIResponseProcessor - INFO - 消息 243 已添加到用户 585972142 的内存中
2025-08-05 14:18:59,801 - AIResponseProcessor - INFO - 消息 244 已添加到用户 585972142 的内存中
2025-08-05 14:18:59,801 - AIResponseProcessor - INFO - [585972142] 成功更新内存缓存，新增消息IDs: 243, 244
2025-08-05 14:18:59,801 - AIResponseProcessor - INFO - [585972142] 开始异步写入数据库...
2025-08-05 14:18:59,816 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:18:59,816 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:18:59,816 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:18:59,817 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:18:59,817 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:18:59,817 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:18:59,817 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:18:59,817 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:18:59,817 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:18:59,817 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:18:59,817 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:18:59,817 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:18:59,817 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:18:59,818 - database - INFO - Inserted document with id: 243
2025-08-05 14:18:59,819 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:18:59,820 - database - INFO - Inserted document with id: 244
2025-08-05 14:18:59,820 - AIResponseProcessor - ERROR - [585972142] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:18:59,821 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 3/4: 对话记录保存成功
2025-08-05 14:18:59,821 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:18:59,821 - app.api.v1.AIResponseProcessor - INFO - [585972142] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:18:59,822 - server - INFO - 🟢 [req_1754374733320] ====== 响应信息 ======
2025-08-05 14:18:59,822 - server - INFO - 🟢 [req_1754374733320] 状态码: 200
2025-08-05 14:18:59,822 - server - INFO - 🟢 [req_1754374733320] 处理时间: 6.499秒
2025-08-05 14:18:59,822 - server - INFO - 🟢 [req_1754374733320] ====== 响应头 ======
2025-08-05 14:18:59,822 - server - INFO - 🟢 [req_1754374733320] content-length: 153
2025-08-05 14:18:59,822 - server - INFO - 🟢 [req_1754374733320] content-type: application/json
2025-08-05 14:18:59,823 - server - INFO - 🟢 [req_1754374733320] ====== 响应体 ======
2025-08-05 14:18:59,823 - server - INFO - 🟢 [req_1754374733320] JSON响应: {
  "status": "success",
  "response": "抱歉，我现在遇到了一些技术问题。请稍后再试，或者重新开始对话。",
  "summary": "",
  "error": null
}
2025-08-05 14:18:59,824 - server - INFO - 🟢 [req_1754374733320] ====== 响应后单例状态 ======
2025-08-05 14:18:59,824 - server - INFO - 🟢 [req_1754374733320] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:18:59,825 - server - INFO - 🟢 [req_1754374733320] ====== 请求完成 ======
2025-08-05 14:18:59,829 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:18:59,830 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:18:59,830 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:18:59,830 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:18:59,833 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:18:59,833 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:18:59,833 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:18:59,833 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:18:59,895 - database - INFO - Inserted document with id: 585972142
2025-08-05 14:18:59,895 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:18:59,895 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:18:59,895 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:18:59,895 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:18:59,895 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:18:59,911 - database - INFO - Inserted document with id: 6891a25359a202dbd20958ac
2025-08-05 14:19:00,021 - AIResponseProcessor - INFO - AI聊天数据保存完成: 24/24 个聊天室, 244/244 条消息
2025-08-05 14:19:00,022 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:19:00,029 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:19:00,029 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:19:00,029 - server - INFO - 🔄 自动保存完成，耗时: 0.213秒
2025-08-05 14:19:10,030 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:19:10,032 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:19:10,032 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:19:10,033 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:19:10,033 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:19:10,033 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:19:10,033 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:19:10,033 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:19:10,033 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:19:10,033 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:19:10,033 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:19:10,033 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:19:10,034 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:19:10,038 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:19:10,039 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:19:10,039 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:19:10,039 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:19:10,039 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:19:10,040 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:19:10,040 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:19:10,040 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:19:10,041 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:19:10,070 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:19:10,070 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:19:10,070 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:19:10,070 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:19:10,070 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:19:10,467 - AIResponseProcessor - INFO - AI聊天数据保存完成: 24/24 个聊天室, 244/244 条消息
2025-08-05 14:19:10,468 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:19:10,501 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:19:10,502 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:19:10,502 - server - INFO - 🔄 自动保存完成，耗时: 0.470秒
2025-08-05 14:19:20,504 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:19:20,508 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:19:20,512 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:19:20,513 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:19:20,513 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:19:20,513 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:19:20,513 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:19:20,515 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:19:20,515 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:19:20,515 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:19:20,515 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:19:20,515 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:19:20,515 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:19:20,527 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:19:20,528 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:19:20,529 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:19:20,529 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:19:20,529 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:19:20,530 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:19:20,530 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:19:20,530 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:19:20,530 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:19:20,558 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:19:20,560 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:19:20,561 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:19:20,561 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:19:20,561 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:19:20,707 - AIResponseProcessor - INFO - AI聊天数据保存完成: 24/24 个聊天室, 244/244 条消息
2025-08-05 14:19:20,707 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:19:20,717 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:19:20,718 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:19:20,718 - server - INFO - 🔄 自动保存完成，耗时: 0.209秒
2025-08-05 14:19:30,718 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:19:30,725 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:19:30,726 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:19:30,727 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:19:30,727 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:19:30,727 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:19:30,728 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:19:30,729 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:19:30,729 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:19:30,729 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:19:30,729 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:19:30,729 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:19:30,729 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:19:30,733 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:19:30,734 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:19:30,734 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:19:30,734 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:19:30,734 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:19:30,735 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:19:30,735 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:19:30,735 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:19:30,735 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:19:30,763 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:19:30,763 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:19:30,764 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:19:30,764 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:19:30,764 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:19:31,053 - AIResponseProcessor - INFO - AI聊天数据保存完成: 24/24 个聊天室, 244/244 条消息
2025-08-05 14:19:31,053 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:19:31,075 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:19:31,076 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:19:31,076 - server - INFO - 🔄 自动保存完成，耗时: 0.351秒
2025-08-05 14:19:41,078 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:19:41,089 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:19:41,090 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:19:41,090 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:19:41,090 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:19:41,091 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:19:41,091 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:19:41,091 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:19:41,091 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:19:41,091 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:19:41,091 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:19:41,091 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:19:41,091 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:19:41,096 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:19:41,098 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:19:41,098 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:19:41,098 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:19:41,098 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:19:41,099 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:19:41,099 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:19:41,099 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:19:41,099 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:19:41,132 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:19:41,133 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:19:41,133 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:19:41,133 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:19:41,133 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:19:41,273 - AIResponseProcessor - INFO - AI聊天数据保存完成: 24/24 个聊天室, 244/244 条消息
2025-08-05 14:19:41,274 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:19:41,280 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:19:41,280 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:19:41,280 - server - INFO - 🔄 自动保存完成，耗时: 0.191秒
2025-08-05 14:19:46,379 - server - INFO - 🔵 [req_1754374786379] ====== 收到新请求 ======
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] 时间: 2025-08-05 14:19:46
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] 方法: POST
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] URL: http://localhost:8000/api/v1/UserManagement/create_new_user
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] 路径: /api/v1/UserManagement/create_new_user
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] 客户端IP: 127.0.0.1
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] ====== 请求前单例状态 ======
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] UserManagement: user_list(32), male_user_list(13), female_user_list(19), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] ====== 请求头 ======
2025-08-05 14:19:46,382 - server - INFO - 🔵 [req_1754374786379] host: localhost:8000
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] connection: close
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] content-length: 79
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] sec-ch-ua-platform: "macOS"
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] content-type: application/json
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] sec-ch-ua-mobile: ?0
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] accept: */*
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] origin: http://localhost:5173
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] sec-fetch-site: same-origin
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] sec-fetch-mode: cors
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] sec-fetch-dest: empty
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] referer: http://localhost:5173/
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] ====== 请求体 ======
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] 原始数据: b'{"telegram_user_name":"user_713240294","telegram_user_id":713240294,"gender":1}'
2025-08-05 14:19:46,383 - server - INFO - 🔵 [req_1754374786379] JSON数据: {
  "telegram_user_name": "user_713240294",
  "telegram_user_id": 713240294,
  "gender": 1
}
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] ====== 响应信息 ======
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] 状态码: 200
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] 处理时间: 0.004秒
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] ====== 响应头 ======
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] content-length: 36
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] content-type: application/json
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] ====== 响应体 ======
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] JSON响应: {
  "success": true,
  "user_id": 713240294
}
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] ====== 响应后单例状态 ======
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,387 - server - INFO - 🟢 [req_1754374786379] ====== 请求完成 ======
2025-08-05 14:19:46,395 - server - INFO - 🔵 [req_1754374786395] ====== 收到新请求 ======
2025-08-05 14:19:46,395 - server - INFO - 🔵 [req_1754374786395] 时间: 2025-08-05 14:19:46
2025-08-05 14:19:46,395 - server - INFO - 🔵 [req_1754374786395] 方法: POST
2025-08-05 14:19:46,395 - server - INFO - 🔵 [req_1754374786395] URL: http://localhost:8000/api/v1/UserManagement/edit_user_age
2025-08-05 14:19:46,395 - server - INFO - 🔵 [req_1754374786395] 路径: /api/v1/UserManagement/edit_user_age
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] 客户端IP: 127.0.0.1
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] ====== 请求前单例状态 ======
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] ====== 请求头 ======
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] host: localhost:8000
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] connection: close
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] content-length: 37
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] sec-ch-ua-platform: "macOS"
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] content-type: application/json
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] sec-ch-ua-mobile: ?0
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] accept: */*
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] origin: http://localhost:5173
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] sec-fetch-site: same-origin
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] sec-fetch-mode: cors
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] sec-fetch-dest: empty
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] referer: http://localhost:5173/
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] ====== 请求体 ======
2025-08-05 14:19:46,396 - server - INFO - 🔵 [req_1754374786395] 原始数据: b'{"user_id":713240294,"age":356725375}'
2025-08-05 14:19:46,397 - server - INFO - 🔵 [req_1754374786395] JSON数据: {
  "user_id": 713240294,
  "age": 356725375
}
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] ====== 响应信息 ======
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] 状态码: 200
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] 处理时间: 0.000秒
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] ====== 响应头 ======
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] content-length: 16
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] content-type: application/json
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] ====== 响应体 ======
2025-08-05 14:19:46,397 - server - INFO - 🟢 [req_1754374786395] JSON响应: {
  "success": true
}
2025-08-05 14:19:46,398 - server - INFO - 🟢 [req_1754374786395] ====== 响应后单例状态 ======
2025-08-05 14:19:46,398 - server - INFO - 🟢 [req_1754374786395] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,398 - server - INFO - 🟢 [req_1754374786395] ====== 请求完成 ======
2025-08-05 14:19:46,450 - server - INFO - 🔵 [req_1754374786450] ====== 收到新请求 ======
2025-08-05 14:19:46,450 - server - INFO - 🔵 [req_1754374786450] 时间: 2025-08-05 14:19:46
2025-08-05 14:19:46,451 - server - INFO - 🔵 [req_1754374786450] 方法: POST
2025-08-05 14:19:46,451 - server - INFO - 🔵 [req_1754374786450] URL: http://localhost:8000/api/v1/ai/history
2025-08-05 14:19:46,451 - server - INFO - 🔵 [req_1754374786450] 路径: /api/v1/ai/history
2025-08-05 14:19:46,451 - server - INFO - 🔵 [req_1754374786450] 客户端IP: 127.0.0.1
2025-08-05 14:19:46,451 - server - INFO - 🔵 [req_1754374786450] ====== 请求前单例状态 ======
2025-08-05 14:19:46,452 - server - INFO - 🔵 [req_1754374786450] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,453 - server - INFO - 🔵 [req_1754374786450] ====== 请求头 ======
2025-08-05 14:19:46,453 - server - INFO - 🔵 [req_1754374786450] host: localhost:8000
2025-08-05 14:19:46,453 - server - INFO - 🔵 [req_1754374786450] connection: close
2025-08-05 14:19:46,454 - server - INFO - 🔵 [req_1754374786450] content-length: 21
2025-08-05 14:19:46,454 - server - INFO - 🔵 [req_1754374786450] sec-ch-ua-platform: "macOS"
2025-08-05 14:19:46,454 - server - INFO - 🔵 [req_1754374786450] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:19:46,455 - server - INFO - 🔵 [req_1754374786450] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:19:46,455 - server - INFO - 🔵 [req_1754374786450] content-type: application/json
2025-08-05 14:19:46,455 - server - INFO - 🔵 [req_1754374786450] sec-ch-ua-mobile: ?0
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] accept: */*
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] origin: http://localhost:5173
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] sec-fetch-site: same-origin
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] sec-fetch-mode: cors
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] sec-fetch-dest: empty
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] referer: http://localhost:5173/chat
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:19:46,458 - server - INFO - 🔵 [req_1754374786450] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:19:46,459 - server - INFO - 🔵 [req_1754374786450] ====== 请求体 ======
2025-08-05 14:19:46,459 - server - INFO - 🔵 [req_1754374786450] 原始数据: b'{"user_id":713240294}'
2025-08-05 14:19:46,459 - server - INFO - 🔵 [req_1754374786450] JSON数据: {
  "user_id": 713240294
}
2025-08-05 14:19:46,460 - app.api.v1.AIResponseProcessor - INFO - 开始获取用户 713240294 的AI聊天历史
2025-08-05 14:19:46,461 - AIResponseProcessor - INFO - [713240294] 开始从内存中获取对话历史
2025-08-05 14:19:46,461 - AIResponseProcessor - INFO - [713240294] 用户 713240294 在内存中没有AI聊天记录
2025-08-05 14:19:46,461 - app.api.v1.AIResponseProcessor - INFO - 成功获取用户 713240294 的AI聊天历史，共 0 条记录
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] ====== 响应信息 ======
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] 状态码: 200
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] 处理时间: 0.002秒
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] ====== 响应头 ======
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] content-length: 43
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] content-type: application/json
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] ====== 响应体 ======
2025-08-05 14:19:46,461 - server - INFO - 🟢 [req_1754374786450] JSON响应: {
  "status": "success",
  "data": [],
  "error": null
}
2025-08-05 14:19:46,462 - server - INFO - 🟢 [req_1754374786450] ====== 响应后单例状态 ======
2025-08-05 14:19:46,462 - server - INFO - 🟢 [req_1754374786450] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,462 - server - INFO - 🟢 [req_1754374786450] ====== 请求完成 ======
2025-08-05 14:19:46,467 - server - INFO - 🔵 [req_1754374786467] ====== 收到新请求 ======
2025-08-05 14:19:46,467 - server - INFO - 🔵 [req_1754374786467] 时间: 2025-08-05 14:19:46
2025-08-05 14:19:46,468 - server - INFO - 🔵 [req_1754374786467] 方法: POST
2025-08-05 14:19:46,468 - server - INFO - 🔵 [req_1754374786467] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:19:46,470 - server - INFO - 🔵 [req_1754374786467] 路径: /api/v1/ai/chat
2025-08-05 14:19:46,470 - server - INFO - 🔵 [req_1754374786467] 客户端IP: 127.0.0.1
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] ====== 请求前单例状态 ======
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] ====== 请求头 ======
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] host: localhost:8000
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] connection: close
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] content-length: 70
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] sec-ch-ua-platform: "macOS"
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] content-type: application/json
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] sec-ch-ua-mobile: ?0
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] accept: */*
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] origin: http://localhost:5173
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] sec-fetch-site: same-origin
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] sec-fetch-mode: cors
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] sec-fetch-dest: empty
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] referer: http://localhost:5173/chat
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] ====== 请求体 ======
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] 原始数据: b'{"user_id":713240294,"message":"\xe4\xbd\xa0\xe5\xa5\xbd\xef\xbc\x8c\xe6\x88\x91\xe6\x83\xb3\xe5\xbc\x80\xe5\xa7\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xaf\xb9\xe8\xaf\x9d"}'
2025-08-05 14:19:46,471 - server - INFO - 🔵 [req_1754374786467] JSON数据: {
  "user_id": 713240294,
  "message": "你好，我想开始我们的对话"
}
2025-08-05 14:19:46,472 - app.api.v1.AIResponseProcessor - INFO - [713240294] 收到新的AI聊天请求: message='你好，我想开始我们的对话'
2025-08-05 14:19:46,472 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:19:46,472 - AIResponseProcessor - INFO - [713240294] 开始从内存中获取对话历史
2025-08-05 14:19:46,472 - AIResponseProcessor - INFO - [713240294] 用户 713240294 在内存中没有AI聊天记录
2025-08-05 14:19:46,472 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 获取到 0 条历史记录
2025-08-05 14:19:46,472 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:19:46,472 - KimiInteractionAPI - INFO - [713240294] 开始处理用户消息: 你好，我想开始我们的对话...
2025-08-05 14:19:46,472 - KimiInteractionAPI - INFO - [713240294] 发送请求到Kimi API
2025-08-05 14:19:46,472 - KimiInteractionAPI - INFO - [713240294] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:19:47,700 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 200
2025-08-05 14:19:47,702 - KimiInteractionAPI - INFO - [713240294] AI响应成功
2025-08-05 14:19:47,704 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: AI响应成功，耗时: 1.23秒, 成功: True
2025-08-05 14:19:47,705 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:19:47,705 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:19:47,705 - AIResponseProcessor - INFO - [713240294] 开始保存对话历史到内存和数据库
2025-08-05 14:19:47,705 - AIResponseProcessor - INFO - 消息 245 已添加到用户 713240294 的内存中
2025-08-05 14:19:47,705 - AIResponseProcessor - INFO - 消息 246 已添加到用户 713240294 的内存中
2025-08-05 14:19:47,705 - AIResponseProcessor - INFO - [713240294] 成功更新内存缓存，新增消息IDs: 245, 246
2025-08-05 14:19:47,705 - AIResponseProcessor - INFO - [713240294] 开始异步写入数据库...
2025-08-05 14:19:47,713 - database - INFO - Inserted document with id: 245
2025-08-05 14:19:47,716 - database - INFO - Inserted document with id: 246
2025-08-05 14:19:47,716 - AIResponseProcessor - ERROR - [713240294] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:19:47,717 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 对话记录保存成功
2025-08-05 14:19:47,717 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:19:47,718 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:19:47,719 - server - INFO - 🟢 [req_1754374786467] ====== 响应信息 ======
2025-08-05 14:19:47,719 - server - INFO - 🟢 [req_1754374786467] 状态码: 200
2025-08-05 14:19:47,719 - server - INFO - 🟢 [req_1754374786467] 处理时间: 1.248秒
2025-08-05 14:19:47,719 - server - INFO - 🟢 [req_1754374786467] ====== 响应头 ======
2025-08-05 14:19:47,719 - server - INFO - 🟢 [req_1754374786467] content-length: 261
2025-08-05 14:19:47,719 - server - INFO - 🟢 [req_1754374786467] content-type: application/json
2025-08-05 14:19:47,720 - server - INFO - 🟢 [req_1754374786467] ====== 响应体 ======
2025-08-05 14:19:47,720 - server - INFO - 🟢 [req_1754374786467] JSON响应: {
  "status": "success",
  "response": "你好！很高兴你决定开始这次探索。让我们从轻松的话题开始吧。你最喜欢和朋友们一起做什么活动？这可以帮助我了解你社交生活中的一些乐趣所在。",
  "summary": "",
  "error": null
}
2025-08-05 14:19:47,720 - server - INFO - 🟢 [req_1754374786467] ====== 响应后单例状态 ======
2025-08-05 14:19:47,720 - server - INFO - 🟢 [req_1754374786467] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:19:47,720 - server - INFO - 🟢 [req_1754374786467] ====== 请求完成 ======
2025-08-05 14:19:51,281 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:19:51,283 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:19:51,284 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:19:51,284 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:19:51,285 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:19:51,285 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:19:51,285 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:19:51,286 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:19:51,286 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:19:51,286 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:19:51,286 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:19:51,286 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:19:51,286 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:19:51,300 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:19:51,302 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:19:51,302 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:19:51,302 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:19:51,302 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:19:51,303 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:19:51,304 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:19:51,304 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:19:51,304 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:19:51,345 - database - INFO - Inserted document with id: 713240294
2025-08-05 14:19:51,345 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:19:51,346 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:19:51,346 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:19:51,346 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:19:51,346 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:19:51,372 - database - INFO - Inserted document with id: 6891a28759a202dbd20958ad
2025-08-05 14:19:51,544 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 246/246 条消息
2025-08-05 14:19:51,544 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:19:51,553 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:19:51,553 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:19:51,553 - server - INFO - 🔄 自动保存完成，耗时: 0.269秒
2025-08-05 14:20:01,554 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:20:01,556 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:20:01,556 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:20:01,556 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:20:01,557 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:20:01,557 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:20:01,557 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:20:01,557 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:20:01,557 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:20:01,557 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:20:01,558 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:20:01,558 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:20:01,558 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:20:01,562 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:20:01,564 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:20:01,565 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:20:01,565 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:20:01,565 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:20:01,569 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:20:01,569 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:20:01,569 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:20:01,570 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:20:01,598 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:20:01,598 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:20:01,598 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:20:01,598 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:20:01,599 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:20:01,763 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 246/246 条消息
2025-08-05 14:20:01,764 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:20:01,770 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:20:01,770 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:20:01,770 - server - INFO - 🔄 自动保存完成，耗时: 0.214秒
2025-08-05 14:20:11,771 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:20:11,773 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:20:11,774 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:20:11,774 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:20:11,774 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:20:11,774 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:20:11,774 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:20:11,775 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:20:11,775 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:20:11,775 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:20:11,775 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:20:11,775 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:20:11,775 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:20:11,779 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:20:11,781 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:20:11,781 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:20:11,781 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:20:11,781 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:20:11,782 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:20:11,782 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:20:11,782 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:20:11,782 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:20:11,808 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:20:11,808 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:20:11,808 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:20:11,808 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:20:11,808 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:20:12,067 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 246/246 条消息
2025-08-05 14:20:12,067 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:20:12,091 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:20:12,091 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:20:12,091 - server - INFO - 🔄 自动保存完成，耗时: 0.318秒
2025-08-05 14:20:12,095 - server - INFO - 🔵 [req_1754374812095] ====== 收到新请求 ======
2025-08-05 14:20:12,096 - server - INFO - 🔵 [req_1754374812095] 时间: 2025-08-05 14:20:12
2025-08-05 14:20:12,096 - server - INFO - 🔵 [req_1754374812095] 方法: POST
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] 路径: /api/v1/ai/chat
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] 客户端IP: 127.0.0.1
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] ====== 请求前单例状态 ======
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] ====== 请求头 ======
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] host: localhost:8000
2025-08-05 14:20:12,097 - server - INFO - 🔵 [req_1754374812095] connection: close
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] content-length: 46
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] sec-ch-ua-platform: "macOS"
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] content-type: application/json
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] sec-ch-ua-mobile: ?0
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] accept: */*
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] origin: http://localhost:5173
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] sec-fetch-site: same-origin
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] sec-fetch-mode: cors
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] sec-fetch-dest: empty
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] referer: http://localhost:5173/chat
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:20:12,098 - server - INFO - 🔵 [req_1754374812095] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:20:12,099 - server - INFO - 🔵 [req_1754374812095] ====== 请求体 ======
2025-08-05 14:20:12,099 - server - INFO - 🔵 [req_1754374812095] 原始数据: b'{"user_id":713240294,"message":"\xe4\xb8\x80\xe8\xb5\xb7\xe5\x97\xa8\xe7\x9a\xae"}'
2025-08-05 14:20:12,099 - server - INFO - 🔵 [req_1754374812095] JSON数据: {
  "user_id": 713240294,
  "message": "一起嗨皮"
}
2025-08-05 14:20:12,102 - app.api.v1.AIResponseProcessor - INFO - [713240294] 收到新的AI聊天请求: message='一起嗨皮'
2025-08-05 14:20:12,103 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:20:12,103 - AIResponseProcessor - INFO - [713240294] 开始从内存中获取对话历史
2025-08-05 14:20:12,103 - AIResponseProcessor - INFO - [713240294] 成功从内存获取到 2 条历史记录
2025-08-05 14:20:12,104 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 获取到 2 条历史记录
2025-08-05 14:20:12,104 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:20:12,104 - KimiInteractionAPI - INFO - [713240294] 开始处理用户消息: 一起嗨皮...
2025-08-05 14:20:12,104 - KimiInteractionAPI - INFO - [713240294] 发送请求到Kimi API
2025-08-05 14:20:12,105 - KimiInteractionAPI - INFO - [713240294] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:20:14,371 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 200
2025-08-05 14:20:14,372 - KimiInteractionAPI - INFO - [713240294] AI响应成功
2025-08-05 14:20:14,373 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: AI响应成功，耗时: 2.27秒, 成功: True
2025-08-05 14:20:14,373 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:20:14,373 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:20:14,374 - AIResponseProcessor - INFO - [713240294] 开始保存对话历史到内存和数据库
2025-08-05 14:20:14,374 - AIResponseProcessor - INFO - 消息 247 已添加到用户 713240294 的内存中
2025-08-05 14:20:14,374 - AIResponseProcessor - INFO - 消息 248 已添加到用户 713240294 的内存中
2025-08-05 14:20:14,374 - AIResponseProcessor - INFO - [713240294] 成功更新内存缓存，新增消息IDs: 247, 248
2025-08-05 14:20:14,374 - AIResponseProcessor - INFO - [713240294] 开始异步写入数据库...
2025-08-05 14:20:14,377 - database - INFO - Inserted document with id: 247
2025-08-05 14:20:14,379 - database - INFO - Inserted document with id: 248
2025-08-05 14:20:14,379 - AIResponseProcessor - ERROR - [713240294] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:20:14,380 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 对话记录保存成功
2025-08-05 14:20:14,380 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:20:14,380 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:20:14,381 - server - INFO - 🟢 [req_1754374812095] ====== 响应信息 ======
2025-08-05 14:20:14,381 - server - INFO - 🟢 [req_1754374812095] 状态码: 200
2025-08-05 14:20:14,381 - server - INFO - 🟢 [req_1754374812095] 处理时间: 2.281秒
2025-08-05 14:20:14,381 - server - INFO - 🟢 [req_1754374812095] ====== 响应头 ======
2025-08-05 14:20:14,381 - server - INFO - 🟢 [req_1754374812095] content-length: 351
2025-08-05 14:20:14,381 - server - INFO - 🟢 [req_1754374812095] content-type: application/json
2025-08-05 14:20:14,382 - server - INFO - 🟢 [req_1754374812095] ====== 响应体 ======
2025-08-05 14:20:14,382 - server - INFO - 🟢 [req_1754374812095] JSON响应: {
  "status": "success",
  "response": "听起来你很享受和朋友们的欢乐时光！这种轻松愉快的氛围对你来说很重要。那么，如果让你选择，你更喜欢计划一次聚会还是随性地与朋友们即兴聚会？这个问题可以帮助我了解你在生活中对于计划性和灵活性的偏好。",
  "summary": "",
  "error": null
}
2025-08-05 14:20:14,382 - server - INFO - 🟢 [req_1754374812095] ====== 响应后单例状态 ======
2025-08-05 14:20:14,382 - server - INFO - 🟢 [req_1754374812095] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:14,382 - server - INFO - 🟢 [req_1754374812095] ====== 请求完成 ======
2025-08-05 14:20:22,092 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:20:22,093 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:20:22,093 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:20:22,093 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:20:22,094 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:20:22,094 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:20:22,094 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:20:22,094 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:20:22,094 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:20:22,094 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:20:22,095 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:20:22,095 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:20:22,095 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:20:22,097 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:20:22,098 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:20:22,098 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:20:22,098 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:20:22,098 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:20:22,100 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:20:22,100 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:20:22,100 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:20:22,100 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:20:22,137 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:20:22,137 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:20:22,138 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:20:22,138 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:20:22,138 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:20:22,318 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 248/248 条消息
2025-08-05 14:20:22,319 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:20:22,325 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:20:22,325 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:20:22,325 - server - INFO - 🔄 自动保存完成，耗时: 0.233秒
2025-08-05 14:20:28,249 - server - INFO - 🔵 [req_1754374828249] ====== 收到新请求 ======
2025-08-05 14:20:28,249 - server - INFO - 🔵 [req_1754374828249] 时间: 2025-08-05 14:20:28
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] 方法: POST
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] 路径: /api/v1/ai/chat
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] 客户端IP: 127.0.0.1
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] ====== 请求前单例状态 ======
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] ====== 请求头 ======
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] host: localhost:8000
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] connection: close
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] content-length: 46
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] sec-ch-ua-platform: "macOS"
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] content-type: application/json
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] sec-ch-ua-mobile: ?0
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] accept: */*
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] origin: http://localhost:5173
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] sec-fetch-site: same-origin
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] sec-fetch-mode: cors
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] sec-fetch-dest: empty
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] referer: http://localhost:5173/chat
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:20:28,250 - server - INFO - 🔵 [req_1754374828249] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:20:28,251 - server - INFO - 🔵 [req_1754374828249] ====== 请求体 ======
2025-08-05 14:20:28,251 - server - INFO - 🔵 [req_1754374828249] 原始数据: b'{"user_id":713240294,"message":"\xe5\x85\xbc\xe8\x80\x8c\xe6\x9c\x89\xe4\xb9\x8b"}'
2025-08-05 14:20:28,251 - server - INFO - 🔵 [req_1754374828249] JSON数据: {
  "user_id": 713240294,
  "message": "兼而有之"
}
2025-08-05 14:20:28,254 - app.api.v1.AIResponseProcessor - INFO - [713240294] 收到新的AI聊天请求: message='兼而有之'
2025-08-05 14:20:28,254 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:20:28,255 - AIResponseProcessor - INFO - [713240294] 开始从内存中获取对话历史
2025-08-05 14:20:28,256 - AIResponseProcessor - INFO - [713240294] 成功从内存获取到 4 条历史记录
2025-08-05 14:20:28,256 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 获取到 4 条历史记录
2025-08-05 14:20:28,256 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:20:28,256 - KimiInteractionAPI - INFO - [713240294] 开始处理用户消息: 兼而有之...
2025-08-05 14:20:28,256 - KimiInteractionAPI - INFO - [713240294] 发送请求到Kimi API
2025-08-05 14:20:28,256 - KimiInteractionAPI - INFO - [713240294] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:20:30,428 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 200
2025-08-05 14:20:30,429 - KimiInteractionAPI - INFO - [713240294] AI响应成功
2025-08-05 14:20:30,429 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: AI响应成功，耗时: 2.17秒, 成功: True
2025-08-05 14:20:30,430 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:20:30,430 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:20:30,430 - AIResponseProcessor - INFO - [713240294] 开始保存对话历史到内存和数据库
2025-08-05 14:20:30,431 - AIResponseProcessor - INFO - 消息 249 已添加到用户 713240294 的内存中
2025-08-05 14:20:30,431 - AIResponseProcessor - INFO - 消息 250 已添加到用户 713240294 的内存中
2025-08-05 14:20:30,431 - AIResponseProcessor - INFO - [713240294] 成功更新内存缓存，新增消息IDs: 249, 250
2025-08-05 14:20:30,431 - AIResponseProcessor - INFO - [713240294] 开始异步写入数据库...
2025-08-05 14:20:30,436 - database - INFO - Inserted document with id: 249
2025-08-05 14:20:30,438 - database - INFO - Inserted document with id: 250
2025-08-05 14:20:30,438 - AIResponseProcessor - ERROR - [713240294] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:20:30,439 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 对话记录保存成功
2025-08-05 14:20:30,439 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:20:30,439 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] ====== 响应信息 ======
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] 状态码: 200
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] 处理时间: 2.187秒
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] ====== 响应头 ======
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] content-length: 390
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] content-type: application/json
2025-08-05 14:20:30,439 - server - INFO - 🟢 [req_1754374828249] ====== 响应体 ======
2025-08-05 14:20:30,440 - server - INFO - 🟢 [req_1754374828249] JSON响应: {
  "status": "success",
  "response": "看来你既喜欢有计划的聚会，也享受即兴的乐趣，这显示了你在生活中的灵活性和多样性。接下来，我想知道你通常如何安排自己的空闲时间？是喜欢把时间安排得满满当当，还是更喜欢留出一些空白时间来放松？这有助于了解你对生活节奏的偏好。",
  "summary": "",
  "error": null
}
2025-08-05 14:20:30,440 - server - INFO - 🟢 [req_1754374828249] ====== 响应后单例状态 ======
2025-08-05 14:20:30,440 - server - INFO - 🟢 [req_1754374828249] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:30,440 - server - INFO - 🟢 [req_1754374828249] ====== 请求完成 ======
2025-08-05 14:20:32,326 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:20:32,327 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:20:32,327 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:20:32,327 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:20:32,327 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:20:32,328 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:20:32,328 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:20:32,328 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:20:32,328 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:20:32,329 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:20:32,329 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:20:32,329 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:20:32,329 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:20:32,331 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:20:32,334 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:20:32,334 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:20:32,334 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:20:32,334 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:20:32,336 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:20:32,336 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:20:32,336 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:20:32,336 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:20:32,374 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:20:32,374 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:20:32,374 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:20:32,374 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:20:32,374 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:20:32,796 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 250/250 条消息
2025-08-05 14:20:32,796 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:20:32,817 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:20:32,817 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:20:32,817 - server - INFO - 🔄 自动保存完成，耗时: 0.490秒
2025-08-05 14:20:41,465 - server - INFO - 🔵 [req_1754374841465] ====== 收到新请求 ======
2025-08-05 14:20:41,467 - server - INFO - 🔵 [req_1754374841465] 时间: 2025-08-05 14:20:41
2025-08-05 14:20:41,467 - server - INFO - 🔵 [req_1754374841465] 方法: POST
2025-08-05 14:20:41,467 - server - INFO - 🔵 [req_1754374841465] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:20:41,467 - server - INFO - 🔵 [req_1754374841465] 路径: /api/v1/ai/chat
2025-08-05 14:20:41,467 - server - INFO - 🔵 [req_1754374841465] 客户端IP: 127.0.0.1
2025-08-05 14:20:41,468 - server - INFO - 🔵 [req_1754374841465] ====== 请求前单例状态 ======
2025-08-05 14:20:41,468 - server - INFO - 🔵 [req_1754374841465] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:41,468 - server - INFO - 🔵 [req_1754374841465] ====== 请求头 ======
2025-08-05 14:20:41,468 - server - INFO - 🔵 [req_1754374841465] host: localhost:8000
2025-08-05 14:20:41,468 - server - INFO - 🔵 [req_1754374841465] connection: close
2025-08-05 14:20:41,469 - server - INFO - 🔵 [req_1754374841465] content-length: 52
2025-08-05 14:20:41,470 - server - INFO - 🔵 [req_1754374841465] sec-ch-ua-platform: "macOS"
2025-08-05 14:20:41,470 - server - INFO - 🔵 [req_1754374841465] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:20:41,471 - server - INFO - 🔵 [req_1754374841465] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:20:41,472 - server - INFO - 🔵 [req_1754374841465] content-type: application/json
2025-08-05 14:20:41,472 - server - INFO - 🔵 [req_1754374841465] sec-ch-ua-mobile: ?0
2025-08-05 14:20:41,473 - server - INFO - 🔵 [req_1754374841465] accept: */*
2025-08-05 14:20:41,474 - server - INFO - 🔵 [req_1754374841465] origin: http://localhost:5173
2025-08-05 14:20:41,474 - server - INFO - 🔵 [req_1754374841465] sec-fetch-site: same-origin
2025-08-05 14:20:41,474 - server - INFO - 🔵 [req_1754374841465] sec-fetch-mode: cors
2025-08-05 14:20:41,474 - server - INFO - 🔵 [req_1754374841465] sec-fetch-dest: empty
2025-08-05 14:20:41,475 - server - INFO - 🔵 [req_1754374841465] referer: http://localhost:5173/chat
2025-08-05 14:20:41,475 - server - INFO - 🔵 [req_1754374841465] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:20:41,475 - server - INFO - 🔵 [req_1754374841465] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:20:41,478 - server - INFO - 🔵 [req_1754374841465] ====== 请求体 ======
2025-08-05 14:20:41,479 - server - INFO - 🔵 [req_1754374841465] 原始数据: b'{"user_id":713240294,"message":"\xe7\x95\x99\xe5\x87\xba\xe4\xb8\x80\xe4\xba\x9b\xe7\xa9\xba\xe7\x99\xbd"}'
2025-08-05 14:20:41,483 - server - INFO - 🔵 [req_1754374841465] JSON数据: {
  "user_id": 713240294,
  "message": "留出一些空白"
}
2025-08-05 14:20:41,492 - app.api.v1.AIResponseProcessor - INFO - [713240294] 收到新的AI聊天请求: message='留出一些空白'
2025-08-05 14:20:41,492 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:20:41,493 - AIResponseProcessor - INFO - [713240294] 开始从内存中获取对话历史
2025-08-05 14:20:41,494 - AIResponseProcessor - INFO - [713240294] 成功从内存获取到 6 条历史记录
2025-08-05 14:20:41,494 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 获取到 6 条历史记录
2025-08-05 14:20:41,494 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:20:41,494 - KimiInteractionAPI - INFO - [713240294] 开始处理用户消息: 留出一些空白...
2025-08-05 14:20:41,495 - KimiInteractionAPI - INFO - [713240294] 发送请求到Kimi API
2025-08-05 14:20:41,495 - KimiInteractionAPI - INFO - [713240294] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:20:43,044 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 200
2025-08-05 14:20:43,045 - KimiInteractionAPI - INFO - [713240294] AI响应成功
2025-08-05 14:20:43,046 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: AI响应成功，耗时: 1.55秒, 成功: True
2025-08-05 14:20:43,046 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:20:43,046 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:20:43,047 - AIResponseProcessor - INFO - [713240294] 开始保存对话历史到内存和数据库
2025-08-05 14:20:43,047 - AIResponseProcessor - INFO - 消息 251 已添加到用户 713240294 的内存中
2025-08-05 14:20:43,047 - AIResponseProcessor - INFO - 消息 252 已添加到用户 713240294 的内存中
2025-08-05 14:20:43,047 - AIResponseProcessor - INFO - [713240294] 成功更新内存缓存，新增消息IDs: 251, 252
2025-08-05 14:20:43,047 - AIResponseProcessor - INFO - [713240294] 开始异步写入数据库...
2025-08-05 14:20:43,050 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:20:43,051 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:20:43,051 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:20:43,051 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:20:43,051 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:20:43,051 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:20:43,051 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:20:43,054 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:20:43,054 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:20:43,054 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:20:43,054 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:20:43,054 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:20:43,054 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:20:43,055 - database - INFO - Inserted document with id: 251
2025-08-05 14:20:43,056 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:20:43,057 - database - INFO - Inserted document with id: 252
2025-08-05 14:20:43,057 - AIResponseProcessor - ERROR - [713240294] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:20:43,058 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 对话记录保存成功
2025-08-05 14:20:43,058 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:20:43,058 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:20:43,059 - server - INFO - 🟢 [req_1754374841465] ====== 响应信息 ======
2025-08-05 14:20:43,059 - server - INFO - 🟢 [req_1754374841465] 状态码: 200
2025-08-05 14:20:43,059 - server - INFO - 🟢 [req_1754374841465] 处理时间: 1.575秒
2025-08-05 14:20:43,059 - server - INFO - 🟢 [req_1754374841465] ====== 响应头 ======
2025-08-05 14:20:43,059 - server - INFO - 🟢 [req_1754374841465] content-length: 333
2025-08-05 14:20:43,059 - server - INFO - 🟢 [req_1754374841465] content-type: application/json
2025-08-05 14:20:43,060 - server - INFO - 🟢 [req_1754374841465] ====== 响应体 ======
2025-08-05 14:20:43,060 - server - INFO - 🟢 [req_1754374841465] JSON响应: {
  "status": "success",
  "response": "留出空白时间来放松，这表明你重视个人空间和自我恢复的时间。现在，让我们聊聊理想中的一天。如果没有任何限制，你理想中的一天会是怎样的？这个问题可以帮助我了解你对生活的理想状态和价值观。",
  "summary": "",
  "error": null
}
2025-08-05 14:20:43,060 - server - INFO - 🟢 [req_1754374841465] ====== 响应后单例状态 ======
2025-08-05 14:20:43,060 - server - INFO - 🟢 [req_1754374841465] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:43,060 - server - INFO - 🟢 [req_1754374841465] ====== 请求完成 ======
2025-08-05 14:20:43,062 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:20:43,062 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:20:43,062 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:20:43,062 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:20:43,064 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:20:43,064 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:20:43,064 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:20:43,064 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:20:43,125 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:20:43,125 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:20:43,125 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:20:43,125 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:20:43,125 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:20:43,245 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 252/252 条消息
2025-08-05 14:20:43,245 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:20:43,251 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:20:43,251 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:20:43,251 - server - INFO - 🔄 自动保存完成，耗时: 0.201秒
2025-08-05 14:20:53,251 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:20:53,254 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:20:53,254 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:20:53,254 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:20:53,254 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:20:53,254 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:20:53,255 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:20:53,255 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:20:53,255 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:20:53,255 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:20:53,255 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:20:53,255 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:20:53,255 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:20:53,259 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:20:53,262 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:20:53,262 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:20:53,263 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:20:53,263 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:20:53,264 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:20:53,264 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:20:53,264 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:20:53,264 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:20:53,302 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:20:53,302 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:20:53,303 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:20:53,303 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:20:53,303 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:20:53,518 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 252/252 条消息
2025-08-05 14:20:53,519 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:20:53,527 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:20:53,527 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:20:53,527 - server - INFO - 🔄 自动保存完成，耗时: 0.273秒
2025-08-05 14:20:56,787 - server - INFO - 🔵 [req_1754374856787] ====== 收到新请求 ======
2025-08-05 14:20:56,787 - server - INFO - 🔵 [req_1754374856787] 时间: 2025-08-05 14:20:56
2025-08-05 14:20:56,787 - server - INFO - 🔵 [req_1754374856787] 方法: POST
2025-08-05 14:20:56,787 - server - INFO - 🔵 [req_1754374856787] URL: http://localhost:8000/api/v1/ai/chat
2025-08-05 14:20:56,787 - server - INFO - 🔵 [req_1754374856787] 路径: /api/v1/ai/chat
2025-08-05 14:20:56,787 - server - INFO - 🔵 [req_1754374856787] 客户端IP: 127.0.0.1
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] ====== 请求前单例状态 ======
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] ====== 请求头 ======
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] host: localhost:8000
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] connection: close
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] content-length: 61
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] sec-ch-ua-platform: "macOS"
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:20:56,788 - server - INFO - 🔵 [req_1754374856787] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] content-type: application/json
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] sec-ch-ua-mobile: ?0
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] accept: */*
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] origin: http://localhost:5173
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] sec-fetch-site: same-origin
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] sec-fetch-mode: cors
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] sec-fetch-dest: empty
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] referer: http://localhost:5173/chat
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] ====== 请求体 ======
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] 原始数据: b'{"user_id":713240294,"message":"\xe7\x9d\xa1\xe5\xa4\xa7\xe8\xa7\x89\xef\xbc\x8c\xe5\x92\x8c\xe7\x88\xb1\xe4\xba\xba\xe4\xb8\x80\xe8\xb5\xb7"}'
2025-08-05 14:20:56,789 - server - INFO - 🔵 [req_1754374856787] JSON数据: {
  "user_id": 713240294,
  "message": "睡大觉，和爱人一起"
}
2025-08-05 14:20:56,792 - app.api.v1.AIResponseProcessor - INFO - [713240294] 收到新的AI聊天请求: message='睡大觉，和爱人一起'
2025-08-05 14:20:56,793 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 开始获取对话历史...
2025-08-05 14:20:56,793 - AIResponseProcessor - INFO - [713240294] 开始从内存中获取对话历史
2025-08-05 14:20:56,793 - AIResponseProcessor - INFO - [713240294] 成功从内存获取到 8 条历史记录
2025-08-05 14:20:56,793 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 1/4: 获取到 8 条历史记录
2025-08-05 14:20:56,793 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: 开始调用KimiInteractionAPI.send_message_to_ai...
2025-08-05 14:20:56,793 - KimiInteractionAPI - INFO - [713240294] 开始处理用户消息: 睡大觉，和爱人一起...
2025-08-05 14:20:56,795 - KimiInteractionAPI - INFO - [713240294] 发送请求到Kimi API
2025-08-05 14:20:56,795 - KimiInteractionAPI - INFO - [713240294] 尝试第 1/3 次请求Kimi API...
2025-08-05 14:20:56,962 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 429
2025-08-05 14:20:56,962 - KimiInteractionAPI - ERROR - [713240294] Kimi API调用失败 (尝试 1/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:20:56,964 - KimiInteractionAPI - INFO - [713240294] 等待 2秒后重试...
2025-08-05 14:20:58,968 - KimiInteractionAPI - INFO - [713240294] 尝试第 2/3 次请求Kimi API...
2025-08-05 14:20:59,110 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 429
2025-08-05 14:20:59,111 - KimiInteractionAPI - ERROR - [713240294] Kimi API调用失败 (尝试 2/3), 错误: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/KimiInteractionAPI.py", line 210, in _make_api_request
    response.raise_for_status()
  File "/opt/anaconda3/envs/miracle_backend_env/lib/python3.11/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://api.moonshot.cn/v1/chat/completions
2025-08-05 14:20:59,112 - KimiInteractionAPI - INFO - [713240294] 等待 4秒后重试...
2025-08-05 14:21:03,114 - KimiInteractionAPI - INFO - [713240294] 尝试第 3/3 次请求Kimi API...
2025-08-05 14:21:07,592 - KimiInteractionAPI - INFO - [713240294] 请求成功, 状态码: 200
2025-08-05 14:21:07,593 - KimiInteractionAPI - INFO - [713240294] AI响应成功
2025-08-05 14:21:07,594 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 2/4: AI响应成功，耗时: 10.80秒, 成功: True
2025-08-05 14:21:07,594 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 检查是否需要保存对话记录...
2025-08-05 14:21:07,594 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 开始保存对话记录...
2025-08-05 14:21:07,594 - AIResponseProcessor - INFO - [713240294] 开始保存对话历史到内存和数据库
2025-08-05 14:21:07,594 - AIResponseProcessor - INFO - 消息 253 已添加到用户 713240294 的内存中
2025-08-05 14:21:07,594 - AIResponseProcessor - INFO - 消息 254 已添加到用户 713240294 的内存中
2025-08-05 14:21:07,594 - AIResponseProcessor - INFO - [713240294] 成功更新内存缓存，新增消息IDs: 253, 254
2025-08-05 14:21:07,594 - AIResponseProcessor - INFO - [713240294] 开始异步写入数据库...
2025-08-05 14:21:07,597 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:21:07,598 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:21:07,598 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:21:07,598 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:21:07,598 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:21:07,598 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:21:07,598 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:21:07,598 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:21:07,598 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:21:07,598 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:21:07,598 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:21:07,598 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:21:07,598 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:21:07,599 - database - INFO - Inserted document with id: 253
2025-08-05 14:21:07,600 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:21:07,600 - database - INFO - Inserted document with id: 254
2025-08-05 14:21:07,600 - AIResponseProcessor - ERROR - [713240294] 异步写入数据库失败: Database.update_one() got an unexpected keyword argument 'upsert'
Traceback (most recent call last):
  File "/Users/miac/Documents/Projects/WeChat_demo_backend_v0/app/services/https/AIResponseProcessor.py", line 208, in save_conversation_history
    await Database.update_one(
          ^^^^^^^^^^^^^^^^^^^^
TypeError: Database.update_one() got an unexpected keyword argument 'upsert'
2025-08-05 14:21:07,601 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 3/4: 对话记录保存成功
2025-08-05 14:21:07,601 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 准备向客户端返回最终响应...
2025-08-05 14:21:07,601 - app.api.v1.AIResponseProcessor - INFO - [713240294] 步骤 4/4: 聊天请求处理完成
2025-08-05 14:21:07,602 - server - INFO - 🟢 [req_1754374856787] ====== 响应信息 ======
2025-08-05 14:21:07,603 - server - INFO - 🟢 [req_1754374856787] 状态码: 200
2025-08-05 14:21:07,603 - server - INFO - 🟢 [req_1754374856787] 处理时间: 10.813秒
2025-08-05 14:21:07,603 - server - INFO - 🟢 [req_1754374856787] ====== 响应头 ======
2025-08-05 14:21:07,603 - server - INFO - 🟢 [req_1754374856787] content-length: 958
2025-08-05 14:21:07,603 - server - INFO - 🟢 [req_1754374856787] content-type: application/json
2025-08-05 14:21:07,604 - server - INFO - 🟢 [req_1754374856787] ====== 响应体 ======
2025-08-05 14:21:07,605 - server - INFO - 🟢 [req_1754374856787] JSON响应: {
  "status": "success",
  "response": "## 🌿 关键词提取\n• 一起嗨皮\n• 留出空白\n• 睡大觉和爱人一起\n\n## 💖 你看重的关系特质\n从我们的对话中，我注意到你重视轻松愉快的社交活动，同时也享受个人空间和自我恢复的时间。你倾向于灵活安排生活，既不过于计划也不完全即兴。在你的理想生活中，休息和与爱人共度时光是非常重要的。这表明你看重的是一种既有活力又能给予彼此空间的关系，能够享受共同的快乐时光，也能尊重彼此的私人时间。",
  "summary": "## 🎯 提问问题包\n根据你分享的信息，我为你生成以下三个问题：\n\n1. 你最喜欢哪种类型的音乐，是更喜欢现场音乐会的氛围，还是在家静静地听？\n2. 当你想要放松时，你更倾向于独自享受还是与朋友一起？\n3. 你如何看待在关系中保持个人空间的重要性？",
  "error": null
}
2025-08-05 14:21:07,606 - server - INFO - 🟢 [req_1754374856787] ====== 响应后单例状态 ======
2025-08-05 14:21:07,606 - server - INFO - 🟢 [req_1754374856787] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:21:07,606 - server - INFO - 🟢 [req_1754374856787] ====== 请求完成 ======
2025-08-05 14:21:07,607 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:21:07,607 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:21:07,607 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:21:07,607 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:21:07,608 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:21:07,608 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:21:07,608 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:21:07,608 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:21:07,631 - server - INFO - 🔵 [req_1754374867631] ====== 收到新请求 ======
2025-08-05 14:21:07,631 - server - INFO - 🔵 [req_1754374867631] 时间: 2025-08-05 14:21:07
2025-08-05 14:21:07,631 - server - INFO - 🔵 [req_1754374867631] 方法: POST
2025-08-05 14:21:07,631 - server - INFO - 🔵 [req_1754374867631] URL: http://localhost:8000/api/v1/UserManagement/edit_summary
2025-08-05 14:21:07,631 - server - INFO - 🔵 [req_1754374867631] 路径: /api/v1/UserManagement/edit_summary
2025-08-05 14:21:07,632 - server - INFO - 🔵 [req_1754374867631] 客户端IP: 127.0.0.1
2025-08-05 14:21:07,632 - server - INFO - 🔵 [req_1754374867631] ====== 请求前单例状态 ======
2025-08-05 14:21:07,632 - server - INFO - 🔵 [req_1754374867631] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:21:07,632 - server - INFO - 🔵 [req_1754374867631] ====== 请求头 ======
2025-08-05 14:21:07,632 - server - INFO - 🔵 [req_1754374867631] host: localhost:8000
2025-08-05 14:21:07,632 - server - INFO - 🔵 [req_1754374867631] connection: close
2025-08-05 14:21:07,633 - server - INFO - 🔵 [req_1754374867631] content-length: 936
2025-08-05 14:21:07,633 - server - INFO - 🔵 [req_1754374867631] sec-ch-ua-platform: "macOS"
2025-08-05 14:21:07,633 - server - INFO - 🔵 [req_1754374867631] user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-05 14:21:07,633 - server - INFO - 🔵 [req_1754374867631] sec-ch-ua: "Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"
2025-08-05 14:21:07,633 - server - INFO - 🔵 [req_1754374867631] content-type: application/json
2025-08-05 14:21:07,634 - server - INFO - 🔵 [req_1754374867631] sec-ch-ua-mobile: ?0
2025-08-05 14:21:07,634 - server - INFO - 🔵 [req_1754374867631] accept: */*
2025-08-05 14:21:07,634 - server - INFO - 🔵 [req_1754374867631] origin: http://localhost:5173
2025-08-05 14:21:07,634 - server - INFO - 🔵 [req_1754374867631] sec-fetch-site: same-origin
2025-08-05 14:21:07,635 - server - INFO - 🔵 [req_1754374867631] sec-fetch-mode: cors
2025-08-05 14:21:07,635 - server - INFO - 🔵 [req_1754374867631] sec-fetch-dest: empty
2025-08-05 14:21:07,635 - server - INFO - 🔵 [req_1754374867631] referer: http://localhost:5173/chat
2025-08-05 14:21:07,635 - server - INFO - 🔵 [req_1754374867631] accept-encoding: gzip, deflate, br, zstd
2025-08-05 14:21:07,636 - server - INFO - 🔵 [req_1754374867631] accept-language: zh-CN,zh;q=0.9
2025-08-05 14:21:07,638 - server - INFO - 🔵 [req_1754374867631] ====== 请求体 ======
2025-08-05 14:21:07,638 - server - INFO - 🔵 [req_1754374867631] 原始数据: b'{"user_id":713240294,"summary":"## \xf0\x9f\x8c\xbf \xe5\x85\xb3\xe9\x94\xae\xe8\xaf\x8d\xe6\x8f\x90\xe5\x8f\x96\\n\xe2\x80\xa2 \xe4\xb8\x80\xe8\xb5\xb7\xe5\x97\xa8\xe7\x9a\xae\\n\xe2\x80\xa2 \xe7\x95\x99\xe5\x87\xba\xe7\xa9\xba\xe7\x99\xbd\\n\xe2\x80\xa2 \xe7\x9d\xa1\xe5\xa4\xa7\xe8\xa7\x89\xe5\x92\x8c\xe7\x88\xb1\xe4\xba\xba\xe4\xb8\x80\xe8\xb5\xb7\\n\\n## \xf0\x9f\x92\x96 \xe4\xbd\xa0\xe7\x9c\x8b\xe9\x87\x8d\xe7\x9a\x84\xe5\x85\xb3\xe7\xb3\xbb\xe7\x89\xb9\xe8\xb4\xa8\\n\xe4\xbb\x8e\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe5\xaf\xb9\xe8\xaf\x9d\xe4\xb8\xad\xef\xbc\x8c\xe6\x88\x91\xe6\xb3\xa8\xe6\x84\x8f\xe5\x88\xb0\xe4\xbd\xa0\xe9\x87\x8d\xe8\xa7\x86\xe8\xbd\xbb\xe6\x9d\xbe\xe6\x84\x89\xe5\xbf\xab\xe7\x9a\x84\xe7\xa4\xbe\xe4\xba\xa4\xe6\xb4\xbb\xe5\x8a\xa8\xef\xbc\x8c\xe5\x90\x8c\xe6\x97\xb6\xe4\xb9\x9f\xe4\xba\xab\xe5\x8f\x97\xe4\xb8\xaa\xe4\xba\xba\xe7\xa9\xba\xe9\x97\xb4\xe5\x92\x8c\xe8\x87\xaa\xe6\x88\x91\xe6\x81\xa2\xe5\xa4\x8d\xe7\x9a\x84\xe6\x97\xb6\xe9\x97\xb4\xe3\x80\x82\xe4\xbd\xa0\xe5\x80\xbe\xe5\x90\x91\xe4\xba\x8e\xe7\x81\xb5\xe6\xb4\xbb\xe5\xae\x89\xe6\x8e\x92\xe7\x94\x9f\xe6\xb4\xbb\xef\xbc\x8c\xe6\x97\xa2\xe4\xb8\x8d\xe8\xbf\x87\xe4\xba\x8e\xe8\xae\xa1\xe5\x88\x92\xe4\xb9\x9f\xe4\xb8\x8d\xe5\xae\x8c\xe5\x85\xa8\xe5\x8d\xb3\xe5\x85\xb4\xe3\x80\x82\xe5\x9c\xa8\xe4\xbd\xa0\xe7\x9a\x84\xe7\x90\x86\xe6\x83\xb3\xe7\x94\x9f\xe6\xb4\xbb\xe4\xb8\xad\xef\xbc\x8c\xe4\xbc\x91\xe6\x81\xaf\xe5\x92\x8c\xe4\xb8\x8e\xe7\x88\xb1\xe4\xba\xba\xe5\x85\xb1\xe5\xba\xa6\xe6\x97\xb6\xe5\x85\x89\xe6\x98\xaf\xe9\x9d\x9e\xe5\xb8\xb8\xe9\x87\x8d\xe8\xa6\x81\xe7\x9a\x84\xe3\x80\x82\xe8\xbf\x99\xe8\xa1\xa8\xe6\x98\x8e\xe4\xbd\xa0\xe7\x9c\x8b\xe9\x87\x8d\xe7\x9a\x84\xe6\x98\xaf\xe4\xb8\x80\xe7\xa7\x8d\xe6\x97\xa2\xe6\x9c\x89\xe6\xb4\xbb\xe5\x8a\x9b\xe5\x8f\x88\xe8\x83\xbd\xe7\xbb\x99\xe4\xba\x88\xe5\xbd\xbc\xe6\xad\xa4\xe7\xa9\xba\xe9\x97\xb4\xe7\x9a\x84\xe5\x85\xb3\xe7\xb3\xbb\xef\xbc\x8c\xe8\x83\xbd\xe5\xa4\x9f\xe4\xba\xab\xe5\x8f\x97\xe5\x85\xb1\xe5\x90\x8c\xe7\x9a\x84\xe5\xbf\xab\xe4\xb9\x90\xe6\x97\xb6\xe5\x85\x89\xef\xbc\x8c\xe4\xb9\x9f\xe8\x83\xbd\xe5\xb0\x8a\xe9\x87\x8d\xe5\xbd\xbc\xe6\xad\xa4\xe7\x9a\x84\xe7\xa7\x81\xe4\xba\xba\xe6\x97\xb6\xe9\x97\xb4\xe3\x80\x82\\n\\n## \xf0\x9f\x8e\xaf \xe6\x8f\x90\xe9\x97\xae\xe9\x97\xae\xe9\xa2\x98\xe5\x8c\x85\\n\xe6\xa0\xb9\xe6\x8d\xae\xe4\xbd\xa0\xe5\x88\x86\xe4\xba\xab\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf\xef\xbc\x8c\xe6\x88\x91\xe4\xb8\xba\xe4\xbd\xa0\xe7\x94\x9f\xe6\x88\x90\xe4\xbb\xa5\xe4\xb8\x8b\xe4\xb8\x89\xe4\xb8\xaa\xe9\x97\xae\xe9\xa2\x98\xef\xbc\x9a\\n\\n1. \xe4\xbd\xa0\xe6\x9c\x80\xe5\x96\x9c\xe6\xac\xa2\xe5\x93\xaa\xe7\xa7\x8d\xe7\xb1\xbb\xe5\x9e\x8b\xe7\x9a\x84\xe9\x9f\xb3\xe4\xb9\x90\xef\xbc\x8c\xe6\x98\xaf\xe6\x9b\xb4\xe5\x96\x9c\xe6\xac\xa2\xe7\x8e\xb0\xe5\x9c\xba\xe9\x9f\xb3\xe4\xb9\x90\xe4\xbc\x9a\xe7\x9a\x84\xe6\xb0\x9b\xe5\x9b\xb4\xef\xbc\x8c\xe8\xbf\x98\xe6\x98\xaf\xe5\x9c\xa8\xe5\xae\xb6\xe9\x9d\x99\xe9\x9d\x99\xe5\x9c\xb0\xe5\x90\xac\xef\xbc\x9f\\n2. \xe5\xbd\x93\xe4\xbd\xa0\xe6\x83\xb3\xe8\xa6\x81\xe6\x94\xbe\xe6\x9d\xbe\xe6\x97\xb6\xef\xbc\x8c\xe4\xbd\xa0\xe6\x9b\xb4\xe5\x80\xbe\xe5\x90\x91\xe4\xba\x8e\xe7\x8b\xac\xe8\x87\xaa\xe4\xba\xab\xe5\x8f\x97\xe8\xbf\x98\xe6\x98\xaf\xe4\xb8\x8e\xe6\x9c\x8b\xe5\x8f\x8b\xe4\xb8\x80\xe8\xb5\xb7\xef\xbc\x9f\\n3. \xe4\xbd\xa0\xe5\xa6\x82\xe4\xbd\x95\xe7\x9c\x8b\xe5\xbe\x85\xe5\x9c\xa8\xe5\x85\xb3\xe7\xb3\xbb\xe4\xb8\xad\xe4\xbf\x9d\xe6\x8c\x81\xe4\xb8\xaa\xe4\xba\xba\xe7\xa9\xba\xe9\x97\xb4\xe7\x9a\x84\xe9\x87\x8d\xe8\xa6\x81\xe6\x80\xa7\xef\xbc\x9f"}'
2025-08-05 14:21:07,640 - server - INFO - 🔵 [req_1754374867631] JSON数据: {
  "user_id": 713240294,
  "summary": "## 🌿 关键词提取\n• 一起嗨皮\n• 留出空白\n• 睡大觉和爱人一起\n\n## 💖 你看重的关系特质\n从我们的对话中，我注意到你重视轻松愉快的社交活动，同时也享受个人空间和自我恢复的时间。你倾向于灵活安排生活，既不过于计划也不完全即兴。在你的理想生活中，休息和与爱人共度时光是非常重要的。这表明你看重的是一种既有活力又能给予彼此空间的关系，能够享受共同的快乐时光，也能尊重彼此的私人时间。\n\n## 🎯 提问问题包\n根据你分享的信息，我为你生成以下三个问题：\n\n1. 你最喜欢哪种类型的音乐，是更喜欢现场音乐会的氛围，还是在家静静地听？\n2. 当你想要放松时，你更倾向于独自享受还是与朋友一起？\n3. 你如何看待在关系中保持个人空间的重要性？"
}
2025-08-05 14:21:07,657 - server - INFO - 🟢 [req_1754374867631] ====== 响应信息 ======
2025-08-05 14:21:07,657 - server - INFO - 🟢 [req_1754374867631] 状态码: 200
2025-08-05 14:21:07,657 - server - INFO - 🟢 [req_1754374867631] 处理时间: 0.015秒
2025-08-05 14:21:07,657 - server - INFO - 🟢 [req_1754374867631] ====== 响应头 ======
2025-08-05 14:21:07,657 - server - INFO - 🟢 [req_1754374867631] content-length: 16
2025-08-05 14:21:07,658 - server - INFO - 🟢 [req_1754374867631] content-type: application/json
2025-08-05 14:21:07,658 - server - INFO - 🟢 [req_1754374867631] ====== 响应体 ======
2025-08-05 14:21:07,658 - server - INFO - 🟢 [req_1754374867631] JSON响应: {
  "success": true
}
2025-08-05 14:21:07,658 - server - INFO - 🟢 [req_1754374867631] ====== 响应后单例状态 ======
2025-08-05 14:21:07,658 - server - INFO - 🟢 [req_1754374867631] UserManagement: user_list(33), male_user_list(13), female_user_list(20), counter(Not initialized) | MatchManager: match_list(0) | ChatroomManager: chatrooms(0)
2025-08-05 14:21:07,658 - server - INFO - 🟢 [req_1754374867631] ====== 请求完成 ======
2025-08-05 14:21:07,687 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:21:07,687 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:21:07,687 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:21:07,687 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:21:07,687 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:21:07,829 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:21:07,829 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:21:07,836 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:21:07,836 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:21:07,836 - server - INFO - 🔄 自动保存完成，耗时: 0.238秒
2025-08-05 14:21:17,837 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:21:17,839 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:21:17,839 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:21:17,840 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:21:17,840 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:21:17,840 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:21:17,840 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:21:17,840 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:21:17,840 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:21:17,840 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:21:17,841 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:21:17,841 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:21:17,841 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:21:17,852 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:21:17,853 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:21:17,854 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:21:17,854 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:21:17,854 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:21:17,854 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:21:17,854 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:21:17,855 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:21:17,855 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:21:17,887 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:21:17,888 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:21:17,888 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:21:17,888 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:21:17,889 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:21:18,043 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:21:18,043 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:21:18,049 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:21:18,049 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:21:18,049 - server - INFO - 🔄 自动保存完成，耗时: 0.210秒
2025-08-05 14:21:28,049 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:21:28,049 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:21:28,050 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:21:28,050 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:21:28,050 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:21:28,050 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:21:28,050 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:21:28,050 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:21:28,050 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:21:28,050 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:21:28,050 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:21:28,050 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:21:28,050 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:21:28,053 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:21:28,054 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:21:28,054 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:21:28,054 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:21:28,054 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:21:28,055 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:21:28,055 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:21:28,055 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:21:28,055 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:21:28,090 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:21:28,090 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:21:28,090 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:21:28,090 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:21:28,091 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:21:28,465 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:21:28,465 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:21:28,483 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:21:28,483 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:21:28,484 - server - INFO - 🔄 自动保存完成，耗时: 0.434秒
2025-08-05 14:21:38,485 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:21:38,488 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:21:38,488 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:21:38,488 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:21:38,489 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:21:38,489 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:21:38,489 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:21:38,489 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:21:38,489 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:21:38,489 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:21:38,489 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:21:38,490 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:21:38,490 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:21:38,494 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:21:38,497 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:21:38,497 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:21:38,497 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:21:38,497 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:21:38,500 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:21:38,501 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:21:38,501 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:21:38,501 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:21:38,537 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:21:38,540 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:21:38,541 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:21:38,542 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:21:38,542 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:21:38,747 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:21:38,747 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:21:38,754 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:21:38,754 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:21:38,754 - server - INFO - 🔄 自动保存完成，耗时: 0.266秒
2025-08-05 14:21:48,755 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:21:48,757 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:21:48,757 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:21:48,757 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:21:48,757 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:21:48,757 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:21:48,757 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:21:48,758 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:21:48,758 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:21:48,758 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:21:48,758 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:21:48,758 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:21:48,758 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:21:48,762 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:21:48,769 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:21:48,770 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:21:48,770 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:21:48,770 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:21:48,771 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:21:48,771 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:21:48,771 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:21:48,771 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:21:48,807 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:21:48,809 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:21:48,810 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:21:48,810 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:21:48,810 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:21:49,049 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:21:49,049 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:21:49,060 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:21:49,060 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:21:49,061 - server - INFO - 🔄 自动保存完成，耗时: 0.304秒
2025-08-05 14:21:59,062 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:21:59,066 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:21:59,067 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:21:59,068 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:21:59,068 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:21:59,068 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:21:59,069 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:21:59,069 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:21:59,069 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:21:59,069 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:21:59,069 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:21:59,069 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:21:59,069 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:21:59,078 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:21:59,080 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:21:59,080 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:21:59,080 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:21:59,080 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:21:59,081 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:21:59,081 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:21:59,081 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:21:59,081 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:21:59,130 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:21:59,130 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:21:59,130 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:21:59,130 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:21:59,130 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:21:59,302 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:21:59,302 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:21:59,309 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:21:59,309 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:21:59,309 - server - INFO - 🔄 自动保存完成，耗时: 0.243秒
2025-08-05 14:22:09,309 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:22:09,311 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:22:09,311 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:22:09,312 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:22:09,312 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:22:09,312 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:22:09,312 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:22:09,312 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:22:09,313 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:22:09,313 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:22:09,313 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:22:09,313 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:22:09,313 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:22:09,315 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:22:09,316 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:22:09,316 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:22:09,316 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:22:09,316 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:22:09,317 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:22:09,317 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:22:09,317 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:22:09,317 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:22:09,363 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:22:09,364 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:22:09,364 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:22:09,365 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:22:09,365 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:22:09,519 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:22:09,519 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:22:09,526 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:22:09,526 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:22:09,526 - server - INFO - 🔄 自动保存完成，耗时: 0.215秒
2025-08-05 14:22:19,527 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:22:19,528 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:22:19,528 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:22:19,529 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:22:19,529 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:22:19,529 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:22:19,529 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:22:19,529 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:22:19,530 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:22:19,530 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:22:19,530 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:22:19,530 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:22:19,530 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:22:19,532 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:22:19,534 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:22:19,534 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:22:19,534 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:22:19,534 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:22:19,536 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:22:19,536 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:22:19,536 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:22:19,536 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:22:19,581 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:22:19,581 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:22:19,582 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:22:19,582 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:22:19,582 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:22:19,862 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:22:19,863 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:22:19,877 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:22:19,877 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:22:19,877 - server - INFO - 🔄 自动保存完成，耗时: 0.349秒
2025-08-05 14:22:29,879 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:22:29,881 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:22:29,881 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:22:29,881 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:22:29,882 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:22:29,882 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:22:29,882 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:22:29,882 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:22:29,882 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:22:29,882 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:22:29,882 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:22:29,883 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:22:29,883 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:22:29,887 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:22:29,889 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:22:29,889 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:22:29,889 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:22:29,890 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:22:29,892 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:22:29,892 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:22:29,892 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:22:29,892 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:22:30,038 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:22:30,051 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:22:30,051 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:22:30,051 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:22:30,051 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:22:30,233 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:22:30,233 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:22:30,240 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:22:30,240 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:22:30,240 - server - INFO - 🔄 自动保存完成，耗时: 0.359秒
2025-08-05 14:22:40,241 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:22:40,244 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:22:40,244 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:22:40,245 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:22:40,245 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:22:40,245 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:22:40,245 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:22:40,245 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:22:40,246 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:22:40,246 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:22:40,246 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:22:40,246 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:22:40,246 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:22:40,251 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:22:40,253 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:22:40,253 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:22:40,253 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:22:40,253 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:22:40,254 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:22:40,255 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:22:40,255 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:22:40,255 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:22:40,295 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:22:40,295 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:22:40,295 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:22:40,296 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:22:40,296 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:22:40,704 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:22:40,704 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:22:40,736 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:22:40,737 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:22:40,737 - server - INFO - 🔄 自动保存完成，耗时: 0.493秒
2025-08-05 14:22:50,740 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:22:50,742 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:22:50,742 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:22:50,743 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:22:50,743 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:22:50,743 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:22:50,743 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:22:50,743 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:22:50,744 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:22:50,744 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:22:50,744 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:22:50,744 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:22:50,744 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:22:50,751 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:22:50,752 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:22:50,752 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:22:50,752 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:22:50,753 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:22:50,753 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:22:50,754 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:22:50,754 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:22:50,754 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:22:50,807 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:22:50,808 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:22:50,809 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:22:50,811 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:22:50,811 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:22:50,980 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:22:50,980 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:22:50,987 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:22:50,987 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:22:50,987 - server - INFO - 🔄 自动保存完成，耗时: 0.245秒
2025-08-05 14:23:00,989 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:23:00,998 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:23:01,002 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:23:01,003 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:23:01,003 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:23:01,003 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:23:01,003 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:23:01,003 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:23:01,003 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:23:01,003 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:23:01,003 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:23:01,004 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:23:01,004 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:23:01,007 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:23:01,008 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:23:01,008 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:23:01,008 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:23:01,009 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:23:01,009 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:23:01,009 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:23:01,009 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:23:01,009 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:23:01,059 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:23:01,059 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:23:01,059 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:23:01,059 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:23:01,059 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:23:01,334 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:23:01,335 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:23:01,350 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:23:01,350 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:23:01,350 - server - INFO - 🔄 自动保存完成，耗时: 0.352秒
2025-08-05 14:23:11,352 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:23:11,353 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:23:11,353 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:23:11,353 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:23:11,354 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:23:11,354 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:23:11,354 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:23:11,354 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:23:11,354 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:23:11,355 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:23:11,355 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:23:11,355 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:23:11,355 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:23:11,356 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:23:11,359 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:23:11,360 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:23:11,360 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:23:11,360 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:23:11,361 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:23:11,362 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:23:11,362 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:23:11,362 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:23:11,391 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:23:11,392 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:23:11,392 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:23:11,392 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:23:11,392 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:23:11,678 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:23:11,679 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:23:11,695 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:23:11,695 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:23:11,695 - server - INFO - 🔄 自动保存完成，耗时: 0.342秒
2025-08-05 14:23:21,697 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:23:21,698 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:23:21,698 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:23:21,699 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:23:21,699 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:23:21,699 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:23:21,699 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:23:21,699 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:23:21,699 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:23:21,699 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:23:21,699 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:23:21,700 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:23:21,700 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:23:21,707 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:23:21,709 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:23:21,709 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:23:21,709 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:23:21,709 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:23:21,711 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:23:21,711 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:23:21,711 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:23:21,711 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:23:21,748 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:23:21,748 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:23:21,748 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:23:21,748 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:23:21,748 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:23:22,029 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:23:22,029 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:23:22,046 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:23:22,046 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:23:22,046 - server - INFO - 🔄 自动保存完成，耗时: 0.348秒
2025-08-05 14:23:32,048 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:23:32,051 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:23:32,053 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:23:32,054 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:23:32,054 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:23:32,054 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:23:32,054 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:23:32,055 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:23:32,055 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:23:32,055 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:23:32,055 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:23:32,055 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:23:32,055 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:23:32,065 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:23:32,066 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:23:32,066 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:23:32,067 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:23:32,067 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:23:32,068 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:23:32,070 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:23:32,070 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:23:32,070 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:23:32,115 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:23:32,115 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:23:32,116 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:23:32,116 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:23:32,117 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:23:32,258 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:23:32,258 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:23:32,265 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:23:32,266 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:23:32,266 - server - INFO - 🔄 自动保存完成，耗时: 0.215秒
2025-08-05 14:23:42,267 - server - INFO - 🔄 开始执行自动保存...
2025-08-05 14:23:42,270 - server - INFO - 🔍 开始数据完备性检查...
2025-08-05 14:23:42,270 - DataIntegrity - INFO - 启动数据完备性检查...
2025-08-05 14:23:42,271 - DataIntegrity - INFO - 开始检查Match数据完备性...
2025-08-05 14:23:42,271 - DataIntegrity - INFO - Match数据检查完成，删除了 0 个非法Match，为 0 个用户补充了缺失的match_id
2025-08-05 14:23:42,271 - DataIntegrity - INFO - matches 检查完成
2025-08-05 14:23:42,271 - DataIntegrity - INFO - 开始检查User的match_ids数据完备性...
2025-08-05 14:23:42,271 - DataIntegrity - INFO - User match_ids数据检查完成
2025-08-05 14:23:42,272 - DataIntegrity - INFO - user_match_ids 检查完成
2025-08-05 14:23:42,272 - DataIntegrity - INFO - 开始检查Chatroom数据完备性...
2025-08-05 14:23:42,272 - DataIntegrity - INFO - Chatroom数据检查完成，删除了 0 个无效Chatroom
2025-08-05 14:23:42,272 - DataIntegrity - INFO - chatrooms 检查完成
2025-08-05 14:23:42,272 - DataIntegrity - INFO - 开始检查Message数据完备性...
2025-08-05 14:23:42,283 - DataIntegrity - INFO - 开始检查Chatroom的message_ids完备性...
2025-08-05 14:23:42,284 - DataIntegrity - INFO - Chatroom message_ids检查完成，更新了 0 个Chatroom
2025-08-05 14:23:42,284 - DataIntegrity - INFO - Message数据检查完成，删除了 0 个无效Message
2025-08-05 14:23:42,284 - DataIntegrity - INFO - messages 检查完成
2025-08-05 14:23:42,284 - DataIntegrity - INFO - 开始最终数据库Message完备性检查...
2025-08-05 14:23:42,285 - DataIntegrity - INFO - 最终数据库Message检查完成，删除了 0 个无效Message
2025-08-05 14:23:42,285 - DataIntegrity - INFO - database_messages 检查完成
2025-08-05 14:23:42,285 - DataIntegrity - INFO - 数据完备性检查完成: 5/5 项检查成功
2025-08-05 14:23:42,285 - server - INFO - ✅ 数据完备性检查完成: 5/5 项检查通过
2025-08-05 14:23:42,308 - server - INFO - ✅ UserManagement数据保存成功
2025-08-05 14:23:42,309 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:23:42,309 - server - INFO - ✅ MatchManager数据保存成功
2025-08-05 14:23:42,309 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:23:42,309 - server - INFO - ✅ ChatroomManager数据保存成功
2025-08-05 14:23:42,583 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:23:42,583 - server - INFO - ✅ AIResponseProcessor数据保存成功
2025-08-05 14:23:42,600 - PersonalityTestManager - INFO - 性格测试数据保存完成: 17/17 个测试会话
2025-08-05 14:23:42,600 - server - INFO - ✅ PersonalityTestManager数据保存成功
2025-08-05 14:23:42,600 - server - INFO - 🔄 自动保存完成，耗时: 0.330秒
2025-08-05 14:23:50,844 - server - INFO - 正在关闭服务...
2025-08-05 14:23:50,846 - server - INFO - 正在停止自动保存任务...
2025-08-05 14:23:50,846 - server - INFO - 自动保存任务被取消
2025-08-05 14:23:50,846 - server - INFO - 执行最后一次数据保存...
2025-08-05 14:23:50,881 - server - INFO - 最终用户数据保存完成
2025-08-05 14:23:50,881 - MatchManager - INFO - Saved 0/0 matches to database
2025-08-05 14:23:50,881 - server - INFO - 最终匹配数据保存完成
2025-08-05 14:23:50,881 - ChatroomManager - INFO - Saved 0/0 chatrooms structure to database
2025-08-05 14:23:50,881 - server - INFO - 最终聊天室数据保存完成
2025-08-05 14:23:51,073 - AIResponseProcessor - INFO - AI聊天数据保存完成: 25/25 个聊天室, 254/254 条消息
2025-08-05 14:23:51,073 - server - INFO - 最终AI聊天数据保存完成
2025-08-05 14:23:51,073 - server - INFO - 正在关闭数据库连接...
2025-08-05 14:23:51,076 - database - INFO - Closed MongoDB connection
2025-08-05 14:23:51,076 - server - INFO - 数据库连接已关闭
